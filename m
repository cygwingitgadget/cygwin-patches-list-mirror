Return-Path: <cygwin-patches-return-8428-listarch-cygwin-patches=sources.redhat.com@cygwin.com>
Received: (qmail 120848 invoked by alias); 19 Mar 2016 22:44:45 -0000
Mailing-List: contact cygwin-patches-help@cygwin.com; run by ezmlm
Precedence: bulk
List-Id: <cygwin-patches.cygwin.com>
List-Subscribe: <mailto:cygwin-patches-subscribe@cygwin.com>
List-Post: <mailto:cygwin-patches@cygwin.com>
List-Archive: <http://sourceware.org/ml/cygwin-patches/>
List-Help: <mailto:cygwin-patches-help@cygwin.com>, <http://sourceware.org/ml/#faqs>
Sender: cygwin-patches-owner@cygwin.com
Mail-Followup-To: cygwin-patches@cygwin.com
Received: (qmail 120833 invoked by uid 89); 19 Mar 2016 22:44:44 -0000
Authentication-Results: sourceware.org; auth=none
X-Virus-Found: No
X-Spam-SWARE-Status: No, score=0.2 required=5.0 tests=BAYES_20,KAM_LOTSOFHASH,SPF_HELO_PASS,SPF_PASS,TVD_RCVD_IP autolearn=no version=3.3.2 spammy=1567, movements, sel, filled
X-HELO: glup.org
Received: from 216-15-121-172.c3-0.smr-ubr2.sbo-smr.ma.static.cable.rcn.com (HELO glup.org) (216.15.121.172) by sourceware.org (qpsmtpd/0.93/v0.84-503-g423c35a) with (AES256-SHA encrypted) ESMTPS; Sat, 19 Mar 2016 22:44:34 +0000
Received: from minipixel.local (unknown [IPv6:2001:4830:1141:1:ae87:a3ff:fe0b:f9a8])	by glup.org (Postfix) with ESMTPSA id 488C2854C4;	Sat, 19 Mar 2016 18:44:31 -0400 (EDT)
Authentication-Results: glup.org; dmarc=none header.from=glup.org
Subject: Re: [PATCH] Re: Cygwin select() issues and improvements
To: cygwin-patches@cygwin.com
References: <56C03624.1030703@glup.org> <20160215125703.GE8374@calimero.vinschen.de> <56C66DDE.9070509@glup.org> <20160219104641.GA5574@calimero.vinschen.de> <20160304085843.GB8296@calimero.vinschen.de> <56E5DD8D.7060302@glup.org> <20160314101257.GE3567@calimero.vinschen.de> <56EA78DC.3040201@glup.org> <56EADD32.4010802@redhat.com>
From: john hood <cgull@glup.org>
Message-ID: <56EDD62E.3040309@glup.org>
Date: Sat, 19 Mar 2016 22:44:00 -0000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:38.0) Gecko/20100101 Thunderbird/38.6.0
MIME-Version: 1.0
In-Reply-To: <56EADD32.4010802@redhat.com>
Content-Type: multipart/signed; micalg=pgp-sha512; protocol="application/pgp-signature"; boundary="iunf7idNVxFQG8Riv2PrclGbd5K5aVjSv"
X-SW-Source: 2016-q1/txt/msg00134.txt.bz2

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--iunf7idNVxFQG8Riv2PrclGbd5K5aVjSv
Content-Type: multipart/mixed; boundary="9lmCqEtG6xgmfFWioNNxPrG6xEEcO0BH9"
From: john hood <cgull@glup.org>
To: cygwin-patches@cygwin.com
Message-ID: <56EDD62E.3040309@glup.org>
Subject: Re: [PATCH] Re: Cygwin select() issues and improvements
References: <56C03624.1030703@glup.org>
 <20160215125703.GE8374@calimero.vinschen.de> <56C66DDE.9070509@glup.org>
 <20160219104641.GA5574@calimero.vinschen.de>
 <20160304085843.GB8296@calimero.vinschen.de> <56E5DD8D.7060302@glup.org>
 <20160314101257.GE3567@calimero.vinschen.de> <56EA78DC.3040201@glup.org>
 <56EADD32.4010802@redhat.com>
In-Reply-To: <56EADD32.4010802@redhat.com>


--9lmCqEtG6xgmfFWioNNxPrG6xEEcO0BH9
Content-Type: multipart/mixed;
 boundary="------------080408090807000901090707"

This is a multi-part message in MIME format.
--------------080408090807000901090707
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Content-length: 549

On 3/17/16 12:37 PM, Eric Blake wrote:

> But that's where 'git rebase' is your friend. Just because your original
> series wasn't perfect doesn't mean you can avoid cleaning things up and
> posting an improved version.  The goal of patch submissions is to make
> the reviewer's job easier, even if it makes it longer for you to post
> the perfect patch series.

I was coming down sick when I wrote that first email and my logic was
not impeccable...

Here's a patch series with hopefully-reasonable changelog-style git
comments.

regards,

  --jh


--------------080408090807000901090707
Content-Type: text/plain; charset=UTF-8; x-mac-type="0"; x-mac-creator="0";
 name="0001-Use-high-resolution-timebases-for-select.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="0001-Use-high-resolution-timebases-for-select.patch"
Content-length: 15299

RnJvbSBjODA1NTUyY2RjOWU2NzNlZjIzMzAzODhkZGI4YjdhMGRhNzQxNzY2
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBKb2huIEhvb2QgPGNn
dWxsQGdsdXAub3JnPgpEYXRlOiBUaHUsIDI4IEphbiAyMDE2IDE3OjA4OjM5
IC0wNTAwClN1YmplY3Q6IFtQQVRDSCAxLzVdIFVzZSBoaWdoLXJlc29sdXRp
b24gdGltZWJhc2VzIGZvciBzZWxlY3QoKS4KCgkqIGN5Z3dhaXQuaDogQWRk
IGN5Z3dhaXRfdXMoKSBtZXRob2RzLgoJKiBzZWxlY3QuaDogQ2hhbmdlIHBy
b3RvdHlwZSBmb3Igc2VsZWN0X3N0dWZmOjp3YWl0KCkgZm9yIGxhcmdlcgoJ
bWljcm9zZWNvbmQgdGltZW91dHMuCgkqIHNlbGVjdC5jYyAocHNlbGVjdCk6
IENvbnZlcnQgZnJvbSBvbGQgY3lnd2luX3NlbGVjdCgpLgoJSW1wbGVtZW50
IG1pY3Jvc2Vjb25kIHRpbWVvdXRzLgoJKGN5Z3dpbl9zZWxlY3QpOiBSZXdy
aXRlIGFzIGEgd3JhcHBlciBvbiBwc2VsZWN0KCkuCgkoc2VsZWN0KTogSW1w
bGVtZW50IG1pY3Jvc2Vjb25kIHRpbWVvdXRzLgoJKHNlbGVjdF9zdHVmZjo6
d2FpdCk6IEltcGxlbWVudCBtaWNyb3NlY29uZCB0aW1lb3V0cyB3aXRoIGEg
dGltZXIKCW9iamVjdC4KLS0tCiB3aW5zdXAvY3lnd2luL2N5Z3dhaXQuaCB8
ICAyNyArKysrKysrCiB3aW5zdXAvY3lnd2luL3NlbGVjdC5jYyB8IDE4MiAr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0t
LS0KIHdpbnN1cC9jeWd3aW4vc2VsZWN0LmggIHwgICAyICstCiAzIGZpbGVz
IGNoYW5nZWQsIDE0MSBpbnNlcnRpb25zKCspLCA3MCBkZWxldGlvbnMoLSkK
CmRpZmYgLS1naXQgYS93aW5zdXAvY3lnd2luL2N5Z3dhaXQuaCBiL3dpbnN1
cC9jeWd3aW4vY3lnd2FpdC5oCmluZGV4IDEyNDBmNTQuLjNlMDJjZGQgMTAw
NjQ0Ci0tLSBhL3dpbnN1cC9jeWd3aW4vY3lnd2FpdC5oCisrKyBiL3dpbnN1
cC9jeWd3aW4vY3lnd2FpdC5oCkBAIC01OSwzICs1OSwzMCBAQCBjeWd3YWl0
IChEV09SRCBob3dsb25nKQogewogICByZXR1cm4gY3lnd2FpdCAoTlVMTCwg
aG93bG9uZyk7CiB9CisKK2V4dGVybiBpbmxpbmUgRFdPUkQgX19hdHRyaWJ1
dGVfXyAoKGFsd2F5c19pbmxpbmUpKQorY3lnd2FpdF91cyAoSEFORExFIGgs
IExPTkdMT05HIGhvd2xvbmcsIHVuc2lnbmVkIG1hc2spCit7CisgIExBUkdF
X0lOVEVHRVIgbGlfaG93bG9uZzsKKyAgUExBUkdFX0lOVEVHRVIgcGxpX2hv
d2xvbmc7CisgIGlmIChob3dsb25nIDwgMExMKQorICAgIHBsaV9ob3dsb25n
ID0gTlVMTDsKKyAgZWxzZQorICAgIHsKKyAgICAgIGxpX2hvd2xvbmcuUXVh
ZFBhcnQgPSAtKDEwTEwgKiBob3dsb25nKTsKKyAgICAgIHBsaV9ob3dsb25n
ID0gJmxpX2hvd2xvbmc7CisgICAgfQorICByZXR1cm4gY3lnd2FpdCAoaCwg
cGxpX2hvd2xvbmcsIG1hc2spOworfQorCitzdGF0aWMgaW5saW5lIERXT1JE
IF9fYXR0cmlidXRlX18gKChhbHdheXNfaW5saW5lKSkKK2N5Z3dhaXRfdXMg
KEhBTkRMRSBoLCBMT05HTE9ORyBob3dsb25nID0gLTEpCit7CisgIHJldHVy
biBjeWd3YWl0X3VzIChoLCBob3dsb25nLCBjd19jYW5jZWwgfCBjd19zaWcp
OworfQorCitzdGF0aWMgaW5saW5lIERXT1JEIF9fYXR0cmlidXRlX18gKChh
bHdheXNfaW5saW5lKSkKK2N5Z3dhaXRfdXMgKExPTkdMT05HIGhvd2xvbmcp
Cit7CisgIHJldHVybiBjeWd3YWl0X3VzIChOVUxMLCBob3dsb25nKTsKK30K
ZGlmZiAtLWdpdCBhL3dpbnN1cC9jeWd3aW4vc2VsZWN0LmNjIGIvd2luc3Vw
L2N5Z3dpbi9zZWxlY3QuY2MKaW5kZXggMWYzMjc2Yy4uOGY3NTlhNCAxMDA2
NDQKLS0tIGEvd2luc3VwL2N5Z3dpbi9zZWxlY3QuY2MKKysrIGIvd2luc3Vw
L2N5Z3dpbi9zZWxlY3QuY2MKQEAgLTg1LDQxICs4NSw2OCBAQCBkZXRhaWxz
LiAqLwogICAgICAgcmV0dXJuIC0xOyBcCiAgICAgfQogCi1zdGF0aWMgaW50
IHNlbGVjdCAoaW50LCBmZF9zZXQgKiwgZmRfc2V0ICosIGZkX3NldCAqLCBE
V09SRCk7CitzdGF0aWMgaW50IHNlbGVjdCAoaW50LCBmZF9zZXQgKiwgZmRf
c2V0ICosIGZkX3NldCAqLCBMT05HTE9ORyk7CiAKIC8qIFRoZSBtYWluIHNl
bGVjdCBjb2RlLiAgKi8KIGV4dGVybiAiQyIgaW50Ci1jeWd3aW5fc2VsZWN0
IChpbnQgbWF4ZmRzLCBmZF9zZXQgKnJlYWRmZHMsIGZkX3NldCAqd3JpdGVm
ZHMsIGZkX3NldCAqZXhjZXB0ZmRzLAotCSAgICAgICBzdHJ1Y3QgdGltZXZh
bCAqdG8pCitwc2VsZWN0KGludCBtYXhmZHMsIGZkX3NldCAqcmVhZGZkcywg
ZmRfc2V0ICp3cml0ZWZkcywgZmRfc2V0ICpleGNlcHRmZHMsCisJY29uc3Qg
c3RydWN0IHRpbWVzcGVjICp0bywgY29uc3Qgc2lnc2V0X3QgKnNldCkKIHsK
LSAgc2VsZWN0X3ByaW50ZiAoInNlbGVjdCglZCwgJXAsICVwLCAlcCwgJXAp
IiwgbWF4ZmRzLCByZWFkZmRzLCB3cml0ZWZkcywgZXhjZXB0ZmRzLCB0byk7
CisgIHNpZ3NldF90IG9sZHNldCA9IF9teV90bHMuc2lnbWFzazsKIAotICBw
dGhyZWFkX3Rlc3RjYW5jZWwgKCk7Ci0gIGludCByZXM7Ci0gIGlmIChtYXhm
ZHMgPCAwKQotICAgIHsKLSAgICAgIHNldF9lcnJubyAoRUlOVkFMKTsKLSAg
ICAgIHJlcyA9IC0xOwotICAgIH0KLSAgZWxzZQorICBfX3RyeQogICAgIHsK
LSAgICAgIC8qIENvbnZlcnQgdG8gbWlsbGlzZWNvbmRzIG9yIElORklOSVRF
IGlmIHRvID09IE5VTEwgKi8KLSAgICAgIERXT1JEIG1zID0gdG8gPyAodG8t
PnR2X3NlYyAqIDEwMDApICsgKHRvLT50dl91c2VjIC8gMTAwMCkgOiBJTkZJ
TklURTsKLSAgICAgIGlmIChtcyA9PSAwICYmIHRvLT50dl91c2VjKQotCW1z
ID0gMTsJCQkvKiBBdCBsZWFzdCAxIG1zIGdyYW51bGFyaXR5ICovCisgICAg
ICBpZiAoc2V0KQorCXNldF9zaWduYWxfbWFzayAoX215X3Rscy5zaWdtYXNr
LCAqc2V0KTsKKworICAgICAgc2VsZWN0X3ByaW50ZiAoInBzZWxlY3QoJWQs
ICVwLCAlcCwgJXAsICVwLCAlcCkiLCBtYXhmZHMsIHJlYWRmZHMsIHdyaXRl
ZmRzLCBleGNlcHRmZHMsIHRvLCBzZXQpOwogCi0gICAgICBpZiAodG8pCi0J
c2VsZWN0X3ByaW50ZiAoInRvLT50dl9zZWMgJWxkLCB0by0+dHZfdXNlYyAl
bGQsIG1zICVkIiwgdG8tPnR2X3NlYywgdG8tPnR2X3VzZWMsIG1zKTsKKyAg
ICAgIHB0aHJlYWRfdGVzdGNhbmNlbCAoKTsKKyAgICAgIGludCByZXM7Cisg
ICAgICBpZiAobWF4ZmRzIDwgMCkKKwl7CisJICBzZXRfZXJybm8gKEVJTlZB
TCk7CisJICByZXMgPSAtMTsKKwl9CiAgICAgICBlbHNlCi0Jc2VsZWN0X3By
aW50ZiAoInRvIE5VTEwsIG1zICV4IiwgbXMpOworCXsKKwkgIC8qIENvbnZl
cnQgdG8gbWljcm9zZWNvbmRzIG9yIC0xIGlmIHRvID09IE5VTEwgKi8KKwkg
IExPTkdMT05HIHVzID0gdG8gPyB0by0+dHZfc2VjICogMTAwMDAwMExMICsg
KHRvLT50dl9uc2VjICsgOTk5KSAvIDEwMDAgOiAtMUxMOworCisJICBpZiAo
dG8pCisJICAgIHNlbGVjdF9wcmludGYgKCJ0by0+dHZfc2VjICVsZCwgdG8t
PnR2X25zZWMgJWxkLCB1cyAlbGxkIiwgdG8tPnR2X3NlYywgdG8tPnR2X25z
ZWMsIHVzKTsKKwkgIGVsc2UKKwkgICAgc2VsZWN0X3ByaW50ZiAoInRvIE5V
TEwsIHVzICVsbGQiLCB1cyk7CisKKwkgIHJlcyA9IHNlbGVjdCAobWF4ZmRz
LCByZWFkZmRzID86IGFsbG9jZmRfc2V0IChtYXhmZHMpLAorCQkJd3JpdGVm
ZHMgPzogYWxsb2NmZF9zZXQgKG1heGZkcyksCisJCQlleGNlcHRmZHMgPzog
YWxsb2NmZF9zZXQgKG1heGZkcyksIHVzKTsKKwl9CisgICAgICBzeXNjYWxs
X3ByaW50ZiAoIiVSID0gc2VsZWN0KCVkLCAlcCwgJXAsICVwLCAlcCkiLCBy
ZXMsIG1heGZkcywgcmVhZGZkcywKKwkJICAgICAgd3JpdGVmZHMsIGV4Y2Vw
dGZkcywgdG8pOwogCi0gICAgICByZXMgPSBzZWxlY3QgKG1heGZkcywgcmVh
ZGZkcyA/OiBhbGxvY2ZkX3NldCAobWF4ZmRzKSwKLQkJICAgIHdyaXRlZmRz
ID86IGFsbG9jZmRfc2V0IChtYXhmZHMpLAotCQkgICAgZXhjZXB0ZmRzID86
IGFsbG9jZmRfc2V0IChtYXhmZHMpLCBtcyk7CisgICAgICBpZiAoc2V0KQor
CXNldF9zaWduYWxfbWFzayAoX215X3Rscy5zaWdtYXNrLCBvbGRzZXQpOwor
ICAgICAgcmV0dXJuIHJlczsKICAgICB9Ci0gIHN5c2NhbGxfcHJpbnRmICgi
JVIgPSBzZWxlY3QoJWQsICVwLCAlcCwgJXAsICVwKSIsIHJlcywgbWF4ZmRz
LCByZWFkZmRzLAotCQkgIHdyaXRlZmRzLCBleGNlcHRmZHMsIHRvKTsKLSAg
cmV0dXJuIHJlczsKKyAgX19leGNlcHQgKEVGQVVMVCkge30KKyAgX19lbmR0
cnkKKyAgcmV0dXJuIC0xOworfQorCisvKiBzZWxlY3QoKSBpcyBqdXN0IGEg
d3JhcHBlciBvbiBwc2VsZWN0KCkuICovCitleHRlcm4gIkMiIGludAorY3ln
d2luX3NlbGVjdCAoaW50IG1heGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9z
ZXQgKndyaXRlZmRzLCBmZF9zZXQgKmV4Y2VwdGZkcywKKwkgICAgICAgc3Ry
dWN0IHRpbWV2YWwgKnRvKQoreworICBzdHJ1Y3QgdGltZXNwZWMgdHM7Cisg
IGlmICh0bykKKyAgICB7CisgICAgICB0cy50dl9zZWMgPSB0by0+dHZfc2Vj
OworICAgICAgdHMudHZfbnNlYyA9IHRvLT50dl91c2VjICogMTAwMDsKKyAg
ICB9CisgIHJldHVybiBwc2VsZWN0IChtYXhmZHMsIHJlYWRmZHMsIHdyaXRl
ZmRzLCBleGNlcHRmZHMsCisJCSAgdG8gPyAmdHMgOiBOVUxMLCBOVUxMKTsK
IH0KIAogLyogVGhpcyBmdW5jdGlvbiBpcyBhcmJpdHJhcmlseSBzcGxpdCBv
dXQgZnJvbSBjeWd3aW5fc2VsZWN0IHRvIGF2b2lkIG9kZApAQCAtMTI3LDEz
ICsxNTQsMTMgQEAgY3lnd2luX3NlbGVjdCAoaW50IG1heGZkcywgZmRfc2V0
ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9zZXQgKmV4Y2VwdGZk
cywKICAgIGZvciB0aGUgc2VsIHZhcmlhYmxlLiAgKi8KIHN0YXRpYyBpbnQK
IHNlbGVjdCAoaW50IG1heGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQg
KndyaXRlZmRzLCBmZF9zZXQgKmV4Y2VwdGZkcywKLQlEV09SRCBtcykKKwlM
T05HTE9ORyB1cykKIHsKICAgc2VsZWN0X3N0dWZmOjp3YWl0X3N0YXRlcyB3
YWl0X3N0YXRlID0gc2VsZWN0X3N0dWZmOjpzZWxlY3RfbG9vcDsKICAgaW50
IHJldCA9IDA7CiAKICAgLyogUmVjb3JkIHRoZSBjdXJyZW50IHRpbWUgZm9y
IGxhdGVyIHVzZS4gKi8KLSAgTE9OR0xPTkcgc3RhcnRfdGltZSA9IGd0b2Qu
bXNlY3MgKCk7CisgIExPTkdMT05HIHN0YXJ0X3RpbWUgPSBndG9kLnVzZWNz
ICgpOwogCiAgIHNlbGVjdF9zdHVmZiBzZWw7CiAgIHNlbC5yZXR1cm5fb25f
c2lnbmFsID0gMDsKQEAgLTE1OCw3ICsxODUsNyBAQCBzZWxlY3QgKGludCBt
YXhmZHMsIGZkX3NldCAqcmVhZGZkcywgZmRfc2V0ICp3cml0ZWZkcywgZmRf
c2V0ICpleGNlcHRmZHMsCiAgICAgICAvKiBEZWdlbmVyYXRlIGNhc2UuICBO
byBmZHMgdG8gd2FpdCBmb3IuICBKdXN0IHdhaXQgZm9yIHRpbWUgdG8gcnVu
IG91dAogCSBvciBzaWduYWwgdG8gYXJyaXZlLiAqLwogICAgICAgaWYgKHNl
bC5zdGFydC5uZXh0ID09IE5VTEwpCi0Jc3dpdGNoIChjeWd3YWl0IChtcykp
CisJc3dpdGNoIChjeWd3YWl0X3VzICh1cykpCiAJICB7CiAJICBjYXNlIFdB
SVRfU0lHTkFMRUQ6CiAJICAgIHNlbGVjdF9wcmludGYgKCJzaWduYWwgcmVj
ZWl2ZWQiKTsKQEAgLTE3OCwxMiArMjA1LDEyIEBAIHNlbGVjdCAoaW50IG1h
eGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9z
ZXQgKmV4Y2VwdGZkcywKIAkgICAgd2FpdF9zdGF0ZSA9IHNlbGVjdF9zdHVm
Zjo6c2VsZWN0X3NldF96ZXJvOwogCSAgICBicmVhazsKIAkgIH0KLSAgICAg
IGVsc2UgaWYgKHNlbC5hbHdheXNfcmVhZHkgfHwgbXMgPT0gMCkKKyAgICAg
IGVsc2UgaWYgKHNlbC5hbHdheXNfcmVhZHkgfHwgdXMgPT0gMCkKIAkvKiBD
YXRjaCBhbnkgYWN0aXZlIGZkcyB2aWEgc2VsLnBvbGwoKSBiZWxvdyAqLwog
CXdhaXRfc3RhdGUgPSBzZWxlY3Rfc3R1ZmY6OnNlbGVjdF9vazsKICAgICAg
IGVsc2UKIAkvKiB3YWl0IGZvciBhbiBmZCB0byBiZWNvbWUgYWN0aXZlIG9y
IHRpbWUgb3V0ICovCi0Jd2FpdF9zdGF0ZSA9IHNlbC53YWl0IChyLCB3LCBl
LCBtcyk7CisJd2FpdF9zdGF0ZSA9IHNlbC53YWl0IChyLCB3LCBlLCB1cyk7
CiAKICAgICAgIHNlbGVjdF9wcmludGYgKCJzZWwud2FpdCByZXR1cm5zICVk
Iiwgd2FpdF9zdGF0ZSk7CiAKQEAgLTIwOSwxMSArMjM2LDExIEBAIHNlbGVj
dCAoaW50IG1heGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRl
ZmRzLCBmZF9zZXQgKmV4Y2VwdGZkcywKICAgICAgIHNlbC5jbGVhbnVwICgp
OwogICAgICAgc2VsLmRlc3Ryb3kgKCk7CiAgICAgICAvKiBSZWNhbGN1bGF0
ZSB0aW1lIHJlbWFpbmluZyB0byB3YWl0IGlmIHdlIGFyZSBnb2luZyB0byBi
ZSBsb29waW5nLiAqLwotICAgICAgaWYgKHdhaXRfc3RhdGUgPT0gc2VsZWN0
X3N0dWZmOjpzZWxlY3RfbG9vcCAmJiBtcyAhPSBJTkZJTklURSkKKyAgICAg
IGlmICh3YWl0X3N0YXRlID09IHNlbGVjdF9zdHVmZjo6c2VsZWN0X2xvb3Ag
JiYgdXMgIT0gLTEpCiAJewotCSAgc2VsZWN0X3ByaW50ZiAoInJlY2FsY3Vs
YXRpbmcgbXMiKTsKLQkgIExPTkdMT05HIG5vdyA9IGd0b2QubXNlY3MgKCk7
Ci0JICBpZiAobm93ID4gKHN0YXJ0X3RpbWUgKyBtcykpCisJICBzZWxlY3Rf
cHJpbnRmICgicmVjYWxjdWxhdGluZyB1cyIpOworCSAgTE9OR0xPTkcgbm93
ID0gZ3RvZC51c2VjcyAoKTsKKwkgIGlmIChub3cgPiAoc3RhcnRfdGltZSAr
IHVzKSkKIAkgICAgewogCSAgICAgIHNlbGVjdF9wcmludGYgKCJ0aW1lZCBv
dXQgYWZ0ZXIgdmVyaWZpY2F0aW9uIik7CiAJICAgICAgLyogU2V0IGRlc2Ny
aXB0b3IgYml0cyB0byB6ZXJvIHBlciBQT1NJWC4gKi8KQEAgLTIyNSw5ICsy
NTIsOSBAQCBzZWxlY3QgKGludCBtYXhmZHMsIGZkX3NldCAqcmVhZGZkcywg
ZmRfc2V0ICp3cml0ZWZkcywgZmRfc2V0ICpleGNlcHRmZHMsCiAJICAgIH0K
IAkgIGVsc2UKIAkgICAgewotCSAgICAgIG1zIC09IChub3cgLSBzdGFydF90
aW1lKTsKKwkgICAgICB1cyAtPSAobm93IC0gc3RhcnRfdGltZSk7CiAJICAg
ICAgc3RhcnRfdGltZSA9IG5vdzsKLQkgICAgICBzZWxlY3RfcHJpbnRmICgi
bXMgbm93ICV1IiwgbXMpOworCSAgICAgIHNlbGVjdF9wcmludGYgKCJ1cyBu
b3cgJWxsZCIsIHVzKTsKIAkgICAgfQogCX0KICAgICB9CkBAIC0yMzgsMzMg
KzI2NSw2IEBAIHNlbGVjdCAoaW50IG1heGZkcywgZmRfc2V0ICpyZWFkZmRz
LCBmZF9zZXQgKndyaXRlZmRzLCBmZF9zZXQgKmV4Y2VwdGZkcywKICAgcmV0
dXJuIHJldDsKIH0KIAotZXh0ZXJuICJDIiBpbnQKLXBzZWxlY3QoaW50IG1h
eGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9z
ZXQgKmV4Y2VwdGZkcywKLQljb25zdCBzdHJ1Y3QgdGltZXNwZWMgKnRzLCBj
b25zdCBzaWdzZXRfdCAqc2V0KQotewotICBzdHJ1Y3QgdGltZXZhbCB0djsK
LSAgc2lnc2V0X3Qgb2xkc2V0ID0gX215X3Rscy5zaWdtYXNrOwotCi0gIF9f
dHJ5Ci0gICAgewotICAgICAgaWYgKHRzKQotCXsKLQkgIHR2LnR2X3NlYyA9
IHRzLT50dl9zZWM7Ci0JICB0di50dl91c2VjID0gdHMtPnR2X25zZWMgLyAx
MDAwOwotCX0KLSAgICAgIGlmIChzZXQpCi0Jc2V0X3NpZ25hbF9tYXNrIChf
bXlfdGxzLnNpZ21hc2ssICpzZXQpOwotICAgICAgaW50IHJldCA9IGN5Z3dp
bl9zZWxlY3QgKG1heGZkcywgcmVhZGZkcywgd3JpdGVmZHMsIGV4Y2VwdGZk
cywKLQkJCSAgICAgICB0cyA/ICZ0diA6IE5VTEwpOwotICAgICAgaWYgKHNl
dCkKLQlzZXRfc2lnbmFsX21hc2sgKF9teV90bHMuc2lnbWFzaywgb2xkc2V0
KTsKLSAgICAgIHJldHVybiByZXQ7Ci0gICAgfQotICBfX2V4Y2VwdCAoRUZB
VUxUKSB7fQotICBfX2VuZHRyeQotICByZXR1cm4gLTE7Ci19Ci0KIC8qIENh
bGwgY2xlYW51cCBmdW5jdGlvbnMgZm9yIGFsbCBpbnNwZWN0ZWQgZmRzLiAg
R2V0cyByaWQgb2YgYW55CiAgICBleGVjdXRpbmcgdGhyZWFkcy4gKi8KIHZv
aWQKQEAgLTM2MiwxMyArMzYyLDUwIEBAIGVycjoKIC8qIFRoZSBoZWFydCBv
ZiBzZWxlY3QuICBXYWl0cyBmb3IgYW4gZmQgdG8gZG8gc29tZXRoaW5nIGlu
dGVyZXN0aW5nLiAqLwogc2VsZWN0X3N0dWZmOjp3YWl0X3N0YXRlcwogc2Vs
ZWN0X3N0dWZmOjp3YWl0IChmZF9zZXQgKnJlYWRmZHMsIGZkX3NldCAqd3Jp
dGVmZHMsIGZkX3NldCAqZXhjZXB0ZmRzLAotCQkgICAgRFdPUkQgbXMpCisJ
CSAgICBMT05HTE9ORyB1cykKIHsKICAgSEFORExFIHc0W01BWElNVU1fV0FJ
VF9PQkpFQ1RTXTsKICAgc2VsZWN0X3JlY29yZCAqcyA9ICZzdGFydDsKICAg
RFdPUkQgbSA9IDA7CiAKKyAgLyogQWx3YXlzIHdhaXQgZm9yIHNpZ25hbHMu
ICovCiAgIHdhaXRfc2lnbmFsX2Fycml2ZWQgaGVyZSAodzRbbSsrXSk7CisK
KyAgLyogU2V0IGEgdGltZW91dCwgb3Igbm90LCBmb3IgV01GTy4gKi8KKyAg
RFdPUkQgZFRpbWVvdXRNczsKKyAgaWYgKHVzID09IDApCisgICAgeworICAg
ICAgZFRpbWVvdXRNcyA9IDA7CisgICAgfQorICBlbHNlCisgICAgeworICAg
ICAgZFRpbWVvdXRNcyA9IElORklOSVRFOworICAgIH0KKyAgLyogQ3JlYXRl
IGFuZCBzZXQgYSB3YWl0YWJsZSB0aW1lciwgaWYgYSBmaW5pdGUgdGltZW91
dCBoYXMgYmVlbgorICAgICByZXF1ZXN0ZWQuICovCisgIExBUkdFX0lOVEVH
RVIgbGlUaW1lb3V0OworICBIQU5ETEUgaFRpbWVvdXQ7CisgIE5UU1RBVFVT
IHN0YXR1czsKKyAgc3RhdHVzID0gTnRDcmVhdGVUaW1lcigmaFRpbWVvdXQs
IFRJTUVSX0FMTF9BQ0NFU1MsIE5VTEwsIE5vdGlmaWNhdGlvblRpbWVyKTsK
KyAgaWYgKCFOVF9TVUNDRVNTIChzdGF0dXMpKQorICAgIHsKKyAgICAgIHNl
bGVjdF9wcmludGYoIk50Q3JlYXRlVGltZXIgZmFpbGVkICglZClcbiIsIEdl
dExhc3RFcnJvcigpKTsKKyAgICAgIHJldHVybiBzZWxlY3RfZXJyb3I7Cisg
ICAgfQorICB3NFttKytdID0gaFRpbWVvdXQ7CisgIGlmICh1cyA+PSAwKQor
ICAgIHsKKyAgICAgIGxpVGltZW91dC5RdWFkUGFydCA9IC11cyAqIDEwOwor
ICAgICAgaW50IHNldHJldDsKKyAgICAgIHN0YXR1cyA9IE50U2V0VGltZXIg
KGhUaW1lb3V0LCAmbGlUaW1lb3V0LCBOVUxMLCBOVUxMLCBGQUxTRSwgMCwg
TlVMTCk7CisgICAgICBpZiAoIU5UX1NVQ0NFU1Moc3RhdHVzKSkKKwl7CisJ
ICBzZWxlY3RfcHJpbnRmICgiTnRTZXRUaW1lciBmYWlsZWQ6ICVkICglMDh4
KVxuIiwgc2V0cmV0LCBHZXRMYXN0RXJyb3IoKSk7CisJICByZXR1cm4gc2Vs
ZWN0X2Vycm9yOworCX0KKyAgICB9CisKKyAgLyogT3B0aW9uYWxseSB3YWl0
IGZvciBwdGhyZWFkIGNhbmNlbGxhdGlvbi4gKi8KICAgaWYgKCh3NFttXSA9
IHB0aHJlYWQ6OmdldF9jYW5jZWxfZXZlbnQgKCkpICE9IE5VTEwpCiAgICAg
bSsrOwogCkBAIC0zOTcsMjEgKzQzNCwyNyBAQCBzZWxlY3Rfc3R1ZmY6Ondh
aXQgKGZkX3NldCAqcmVhZGZkcywgZmRfc2V0ICp3cml0ZWZkcywgZmRfc2V0
ICpleGNlcHRmZHMsCiBuZXh0X3doaWxlOjsKICAgICB9CiAKLSAgZGVidWdf
cHJpbnRmICgibSAlZCwgbXMgJXUiLCBtLCBtcyk7CisgIGRlYnVnX3ByaW50
ZiAoIm0gJWQsIHVzICVsbHUsIGRUaW1lb3V0TXMgJWQiLCBtLCB1cywgZFRp
bWVvdXRNcyk7CiAKICAgRFdPUkQgd2FpdF9yZXQ7CiAgIGlmICghd2luZG93
c191c2VkKQotICAgIHdhaXRfcmV0ID0gV2FpdEZvck11bHRpcGxlT2JqZWN0
cyAobSwgdzQsIEZBTFNFLCBtcyk7CisgICAgd2FpdF9yZXQgPSBXYWl0Rm9y
TXVsdGlwbGVPYmplY3RzIChtLCB3NCwgRkFMU0UsIGRUaW1lb3V0TXMpOwog
ICBlbHNlCiAgICAgLyogVXNpbmcgTVdNT19JTlBVVEFWQUlMQUJMRSBpcyB0
aGUgb2ZmaWNpYWxseSBzdXBwb3J0ZWQgc29sdXRpb24gZm9yCiAgICAgICAg
dGhlIHByb2JsZW0gdGhhdCB0aGUgY2FsbCB0byBQZWVrTWVzc2FnZSBkaXNh
cm1zIHRoZSBxdWV1ZSBzdGF0ZQogICAgICAgIHNvIHRoYXQgYSBzdWJzZXF1
ZW50IE1XRk1PIGhhbmdzLCBldmVuIGlmIHRoZXJlIGFyZSBzdGlsbCBtZXNz
YWdlcwogICAgICAgIGluIHRoZSBxdWV1ZS4gKi8KLSAgICB3YWl0X3JldCA9
IE1zZ1dhaXRGb3JNdWx0aXBsZU9iamVjdHNFeCAobSwgdzQsIG1zLAorICAg
IHdhaXRfcmV0ID0gTXNnV2FpdEZvck11bHRpcGxlT2JqZWN0c0V4IChtLCB3
NCwgZFRpbWVvdXRNcywKIAkJCQkJICAgIFFTX0FMTElOUFVUIHwgUVNfQUxM
UE9TVE1FU1NBR0UsCiAJCQkJCSAgICBNV01PX0lOUFVUQVZBSUxBQkxFKTsK
ICAgc2VsZWN0X3ByaW50ZiAoIndhaXRfcmV0ICVkLCBtID0gJWQuICB2ZXJp
ZnlpbmciLCB3YWl0X3JldCwgbSk7CiAKKyAgaWYgKGRUaW1lb3V0TXMgPT0g
SU5GSU5JVEUpCisgICAgeworICAgICAgQ2FuY2VsV2FpdGFibGVUaW1lciAo
aFRpbWVvdXQpOworICAgICAgQ2xvc2VIYW5kbGUgKGhUaW1lb3V0KTsKKyAg
ICB9CisKICAgd2FpdF9zdGF0ZXMgcmVzOwogICBzd2l0Y2ggKHdhaXRfcmV0
KQogICAgIHsKQEAgLTQzNCwxMiArNDc3LDEzIEBAIG5leHRfd2hpbGU6Owog
ICAgICAgcy0+c2V0X3NlbGVjdF9lcnJubyAoKTsKICAgICAgIHJlcyA9IHNl
bGVjdF9lcnJvcjsKICAgICAgIGJyZWFrOworICAgIGNhc2UgV0FJVF9PQkpF
Q1RfMCArIDE6CiAgICAgY2FzZSBXQUlUX1RJTUVPVVQ6CiAgICAgICBzZWxl
Y3RfcHJpbnRmICgidGltZWQgb3V0Iik7CiAgICAgICByZXMgPSBzZWxlY3Rf
c2V0X3plcm87CiAgICAgICBicmVhazsKLSAgICBjYXNlIFdBSVRfT0JKRUNU
XzAgKyAxOgotICAgICAgaWYgKHN0YXJ0ZmRzID4gMSkKKyAgICBjYXNlIFdB
SVRfT0JKRUNUXzAgKyAyOgorICAgICAgaWYgKHN0YXJ0ZmRzID4gMikKIAl7
CiAJICBjbGVhbnVwICgpOwogCSAgZGVzdHJveSAoKTsKZGlmZiAtLWdpdCBh
L3dpbnN1cC9jeWd3aW4vc2VsZWN0LmggYi93aW5zdXAvY3lnd2luL3NlbGVj
dC5oCmluZGV4IDAwMzU4MjAuLjU4MWVlNGUgMTAwNjQ0Ci0tLSBhL3dpbnN1
cC9jeWd3aW4vc2VsZWN0LmgKKysrIGIvd2luc3VwL2N5Z3dpbi9zZWxlY3Qu
aApAQCAtOTYsNyArOTYsNyBAQCBwdWJsaWM6CiAKICAgYm9vbCB0ZXN0X2Fu
ZF9zZXQgKGludCwgZmRfc2V0ICosIGZkX3NldCAqLCBmZF9zZXQgKik7CiAg
IGludCBwb2xsIChmZF9zZXQgKiwgZmRfc2V0ICosIGZkX3NldCAqKTsKLSAg
d2FpdF9zdGF0ZXMgd2FpdCAoZmRfc2V0ICosIGZkX3NldCAqLCBmZF9zZXQg
KiwgRFdPUkQpOworICB3YWl0X3N0YXRlcyB3YWl0IChmZF9zZXQgKiwgZmRf
c2V0ICosIGZkX3NldCAqLCBMT05HTE9ORyk7CiAgIHZvaWQgY2xlYW51cCAo
KTsKICAgdm9pZCBkZXN0cm95ICgpOwogCi0tIAoyLjcuMgoK

--------------080408090807000901090707
Content-Type: text/plain; charset=UTF-8; x-mac-type="0"; x-mac-creator="0";
 name="0002-Move-get_nonascii_key-into-fhandler_console.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="0002-Move-get_nonascii_key-into-fhandler_console.patch"
Content-length: 3441

RnJvbSAyMjVmODUyNTk0ZDlmZjZhMTIzMTA2M2VjZTNkNTI5YjljYzFiZjdm
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBKb2huIEhvb2QgPGNn
dWxsQGdsdXAub3JnPgpEYXRlOiBTYXQsIDMwIEphbiAyMDE2IDE3OjMzOjM2
IC0wNTAwClN1YmplY3Q6IFtQQVRDSCAyLzVdIE1vdmUgZ2V0X25vbmFzY2lp
X2tleSBpbnRvIGZoYW5kbGVyX2NvbnNvbGUuCgoJKiBmaGFuZGxlci5oIChm
aGFuZGxlcl9jb25zb2xlKTogTW92ZSBnZXRfbm9uYXNjaWlfa2V5KCkgZnJv
bQoJc2VsZWN0LmMgaW50byB0aGlzIGNsYXNzLgoJKiBzZWxlY3QuY2MgKHBl
ZWtfY29uc29sZSk6IE1vdmUgZ2V0X25vbmFzY2lpX2tleSgpIGludG8KCWZo
YW5kbGVyX2NvbnNvbGUgY2xhc3MuCi0tLQogd2luc3VwL2N5Z3dpbi9maGFu
ZGxlci5oICAgICAgICAgIHwgMSArCiB3aW5zdXAvY3lnd2luL2ZoYW5kbGVy
X2NvbnNvbGUuY2MgfCA0ICstLS0KIHdpbnN1cC9jeWd3aW4vc2VsZWN0LmNj
ICAgICAgICAgICB8IDMgKy0tCiAzIGZpbGVzIGNoYW5nZWQsIDMgaW5zZXJ0
aW9ucygrKSwgNSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS93aW5zdXAv
Y3lnd2luL2ZoYW5kbGVyLmggYi93aW5zdXAvY3lnd2luL2ZoYW5kbGVyLmgK
aW5kZXggMWMxODYyYi4uMmRiZTM3NyAxMDA2NDQKLS0tIGEvd2luc3VwL2N5
Z3dpbi9maGFuZGxlci5oCisrKyBiL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIu
aApAQCAtMTQ2OSw2ICsxNDY5LDcgQEAgcHJpdmF0ZToKICAgYm9vbCBzZXRf
dW5pdCAoKTsKICAgc3RhdGljIGJvb2wgbmVlZF9pbnZpc2libGUgKCk7CiAg
IHN0YXRpYyB2b2lkIGZyZWVfY29uc29sZSAoKTsKKyAgc3RhdGljIGNvbnN0
IGNoYXIgKmdldF9ub25hc2NpaV9rZXkgKElOUFVUX1JFQ09SRCYgaW5wdXRf
cmVjLCBjaGFyICopOwogCiAgIGZoYW5kbGVyX2NvbnNvbGUgKHZvaWQgKikg
e30KIApkaWZmIC0tZ2l0IGEvd2luc3VwL2N5Z3dpbi9maGFuZGxlcl9jb25z
b2xlLmNjIGIvd2luc3VwL2N5Z3dpbi9maGFuZGxlcl9jb25zb2xlLmNjCmlu
ZGV4IGVmMmQxYzUuLmY2ODNlOTAgMTAwNjQ0Ci0tLSBhL3dpbnN1cC9jeWd3
aW4vZmhhbmRsZXJfY29uc29sZS5jYworKysgYi93aW5zdXAvY3lnd2luL2Zo
YW5kbGVyX2NvbnNvbGUuY2MKQEAgLTQ2LDggKzQ2LDYgQEAgZGV0YWlscy4g
Ki8KICNkZWZpbmUgc3JUb3AgKGNvbi5iLnNyV2luZG93LlRvcCArIGNvbi5z
Y3JvbGxfcmVnaW9uLlRvcCkKICNkZWZpbmUgc3JCb3R0b20gKChjb24uc2Ny
b2xsX3JlZ2lvbi5Cb3R0b20gPCAwKSA/IGNvbi5iLnNyV2luZG93LkJvdHRv
bSA6IGNvbi5iLnNyV2luZG93LlRvcCArIGNvbi5zY3JvbGxfcmVnaW9uLkJv
dHRvbSkKIAotY29uc3QgY2hhciAqZ2V0X25vbmFzY2lpX2tleSAoSU5QVVRf
UkVDT1JEJiwgY2hhciAqKTsKLQogY29uc3QgdW5zaWduZWQgZmhhbmRsZXJf
Y29uc29sZTo6TUFYX1dSSVRFX0NIQVJTID0gMTYzODQ7CiAKIGZoYW5kbGVy
X2NvbnNvbGU6OmNvbnNvbGVfc3RhdGUgTk9fQ09QWSAqZmhhbmRsZXJfY29u
c29sZTo6c2hhcmVkX2NvbnNvbGVfaW5mbzsKQEAgLTIzOTEsNyArMjM4OSw3
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgewogfTsKIAogY29uc3QgY2hhciAq
Ci1nZXRfbm9uYXNjaWlfa2V5IChJTlBVVF9SRUNPUkQmIGlucHV0X3JlYywg
Y2hhciAqdG1wKQorZmhhbmRsZXJfY29uc29sZTo6Z2V0X25vbmFzY2lpX2tl
eSAoSU5QVVRfUkVDT1JEJiBpbnB1dF9yZWMsIGNoYXIgKnRtcCkKIHsKICNk
ZWZpbmUgTk9STUFMICAwCiAjZGVmaW5lIFNISUZUCTEKZGlmZiAtLWdpdCBh
L3dpbnN1cC9jeWd3aW4vc2VsZWN0LmNjIGIvd2luc3VwL2N5Z3dpbi9zZWxl
Y3QuY2MKaW5kZXggOGY3NTlhNC4uMTAyMDVhMCAxMDA2NDQKLS0tIGEvd2lu
c3VwL2N5Z3dpbi9zZWxlY3QuY2MKKysrIGIvd2luc3VwL2N5Z3dpbi9zZWxl
Y3QuY2MKQEAgLTg4Myw3ICs4ODMsNiBAQCBmaGFuZGxlcl9maWZvOjpzZWxl
Y3RfZXhjZXB0IChzZWxlY3Rfc3R1ZmYgKnNzKQogc3RhdGljIGludAogcGVl
a19jb25zb2xlIChzZWxlY3RfcmVjb3JkICptZSwgYm9vbCkKIHsKLSAgZXh0
ZXJuIGNvbnN0IGNoYXIgKiBnZXRfbm9uYXNjaWlfa2V5IChJTlBVVF9SRUNP
UkQmIGlucHV0X3JlYywgY2hhciAqKTsKICAgZmhhbmRsZXJfY29uc29sZSAq
ZmggPSAoZmhhbmRsZXJfY29uc29sZSAqKSBtZS0+Zmg7CiAKICAgaWYgKCFt
ZS0+cmVhZF9zZWxlY3RlZCkKQEAgLTkyNSw3ICs5MjQsNyBAQCBwZWVrX2Nv
bnNvbGUgKHNlbGVjdF9yZWNvcmQgKm1lLCBib29sKQogCSAgewogCSAgICBp
ZiAoaXJlYy5FdmVudC5LZXlFdmVudC5iS2V5RG93bgogCQkmJiAoaXJlYy5F
dmVudC5LZXlFdmVudC51Q2hhci5Bc2NpaUNoYXIKLQkJICAgIHx8IGdldF9u
b25hc2NpaV9rZXkgKGlyZWMsIHRtcGJ1ZikpKQorCQkgICAgfHwgZmhhbmRs
ZXJfY29uc29sZTo6Z2V0X25vbmFzY2lpX2tleSAoaXJlYywgdG1wYnVmKSkp
CiAJICAgICAgcmV0dXJuIG1lLT5yZWFkX3JlYWR5ID0gdHJ1ZTsKIAkgIH0K
IAllbHNlCi0tIAoyLjcuMgoK

--------------080408090807000901090707
Content-Type: text/plain; charset=UTF-8; x-mac-type="0"; x-mac-creator="0";
 name="0003-Debug-printfs.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="0003-Debug-printfs.patch"
Content-length: 4689

RnJvbSBiMmUyYjVhYzFkNmI2MjYxMGM1MWE2NjExM2U1YWI5N2IxZDQzNzUw
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBKb2huIEhvb2QgPGNn
dWxsQGdsdXAub3JnPgpEYXRlOiBTYXQsIDMwIEphbiAyMDE2IDE3OjM3OjMz
IC0wNTAwClN1YmplY3Q6IFtQQVRDSCAzLzVdIERlYnVnIHByaW50ZnMuCgoJ
KiBmaGFuZGxlci5jYyAoZmhhbmRsZXJfYmFzZTo6Z2V0X3JlYWRhaGVhZCk6
IEFkZCBkZWJ1ZyBjb2RlLgoJKiBmaGFuZGxlcl9jb25zb2xlLmNjIChmaGFu
ZGxlcl9jb25zb2xlOjpyZWFkKTogQWRkIGRlYnVnIGNvZGUuCgkqIHNlbGVj
dC5jYyAocHNlbGVjdCk6IEFkZCBkZWJ1ZyBjb2RlLgoJKHBlZWtfY29uc29s
ZSk6IEFkZCBkZWJ1ZyBjb2RlLgotLS0KIHdpbnN1cC9jeWd3aW4vZmhhbmRs
ZXIuY2MgICAgICAgICB8ICAxICsKIHdpbnN1cC9jeWd3aW4vZmhhbmRsZXJf
Y29uc29sZS5jYyB8IDEwICsrKysrKysrKy0KIHdpbnN1cC9jeWd3aW4vc2Vs
ZWN0LmNjICAgICAgICAgICB8IDEyICsrKysrKysrKysrLQogMyBmaWxlcyBj
aGFuZ2VkLCAyMSBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygtKQoKZGlm
ZiAtLWdpdCBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIuY2MgYi93aW5zdXAv
Y3lnd2luL2ZoYW5kbGVyLmNjCmluZGV4IDMzNzQzZDQuLjg2Zjc3YzMgMTAw
NjQ0Ci0tLSBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIuY2MKKysrIGIvd2lu
c3VwL2N5Z3dpbi9maGFuZGxlci5jYwpAQCAtOTAsNiArOTAsNyBAQCBmaGFu
ZGxlcl9iYXNlOjpnZXRfcmVhZGFoZWFkICgpCiAgIC8qIEZJWE1FIC0gbm90
IHRocmVhZCBzYWZlICovCiAgIGlmIChyYWl4Z2V0ID49IHJhbGVuKQogICAg
IHJhaXhnZXQgPSByYWl4cHV0ID0gcmFsZW4gPSAwOworICBkZWJ1Z19wcmlu
dGYoImF2YWlsYWJsZTogJWQiLCBjaHJldCA+IC0xKTsKICAgcmV0dXJuIGNo
cmV0OwogfQogCmRpZmYgLS1naXQgYS93aW5zdXAvY3lnd2luL2ZoYW5kbGVy
X2NvbnNvbGUuY2MgYi93aW5zdXAvY3lnd2luL2ZoYW5kbGVyX2NvbnNvbGUu
Y2MKaW5kZXggZjY4M2U5MC4uNWRkMDcxYyAxMDA2NDQKLS0tIGEvd2luc3Vw
L2N5Z3dpbi9maGFuZGxlcl9jb25zb2xlLmNjCisrKyBiL3dpbnN1cC9jeWd3
aW4vZmhhbmRsZXJfY29uc29sZS5jYwpAQCAtMzA5LDYgKzMwOSw4IEBAIGZo
YW5kbGVyX2NvbnNvbGU6OnJlYWQgKHZvaWQgKnB2LCBzaXplX3QmIGJ1Zmxl
bikKICAgaW50IGNoOwogICBzZXRfaW5wdXRfc3RhdGUgKCk7CiAKKyAgZGVi
dWdfcHJpbnRmKCJyZXF1ZXN0ZWQgYnVmbGVuICVkIiwgYnVmbGVuKTsKKwog
ICAvKiBDaGVjayBjb25zb2xlIHJlYWQtYWhlYWQgYnVmZmVyIGZpbGxlZCBm
cm9tIHRlcm1pbmFsIHJlcXVlc3RzICovCiAgIGlmIChjb24uY29uc19yYXBv
aSAmJiAqY29uLmNvbnNfcmFwb2kpCiAgICAgewpAQCAtMzE4LDYgKzMyMCw3
IEBAIGZoYW5kbGVyX2NvbnNvbGU6OnJlYWQgKHZvaWQgKnB2LCBzaXplX3Qm
IGJ1ZmxlbikKICAgICB9CiAKICAgaW50IGNvcGllZF9jaGFycyA9IGdldF9y
ZWFkYWhlYWRfaW50b19idWZmZXIgKGJ1ZiwgYnVmbGVuKTsKKyAgZGVidWdf
cHJpbnRmKCJjb3BpZWRfY2hhcnMgJWQiLCBjb3BpZWRfY2hhcnMpOwogCiAg
IGlmIChjb3BpZWRfY2hhcnMpCiAgICAgewpAQCAtNjk1LDkgKzY5OCwxMSBA
QCBmaGFuZGxlcl9jb25zb2xlOjpyZWFkICh2b2lkICpwdiwgc2l6ZV90JiBi
dWZsZW4pCiAJICBjb250aW51ZTsKIAl9CiAKKyAgICAgIGRlYnVnX3ByaW50
ZigidG9hZGQgPSAlcCwgbnJlYWQgPSAlZCIsIHRvYWRkLCBucmVhZCk7CiAg
ICAgICBpZiAodG9hZGQpCiAJewotCSAgbGluZV9lZGl0X3N0YXR1cyByZXMg
PSBsaW5lX2VkaXQgKHRvYWRkLCBucmVhZCwgdGkpOworCSAgc3NpemVfdCBi
eXRlc19yZWFkOworCSAgbGluZV9lZGl0X3N0YXR1cyByZXMgPSBsaW5lX2Vk
aXQgKHRvYWRkLCBucmVhZCwgdGksICZieXRlc19yZWFkKTsKIAkgIGlmIChy
ZXMgPT0gbGluZV9lZGl0X3NpZ25hbGxlZCkKIAkgICAgZ290byBzaWdfZXhp
dDsKIAkgIGVsc2UgaWYgKHJlcyA9PSBsaW5lX2VkaXRfaW5wdXRfZG9uZSkK
QEAgLTcwNSw2ICs3MTAsOCBAQCBmaGFuZGxlcl9jb25zb2xlOjpyZWFkICh2
b2lkICpwdiwgc2l6ZV90JiBidWZsZW4pCiAJfQogICAgIH0KIAorICBkZWJ1
Z19wcmludGYoInJhbGVuID0gJWQsIGJ5dGVzID0gJWQiLCByYWxlbiwgcmFs
ZW4gLSByYWl4Z2V0KTsKKwogICB3aGlsZSAoYnVmbGVuKQogICAgIGlmICgo
Y2ggPSBnZXRfcmVhZGFoZWFkICgpKSA8IDApCiAgICAgICBicmVhazsKQEAg
LTcxNiw2ICs3MjMsNyBAQCBmaGFuZGxlcl9jb25zb2xlOjpyZWFkICh2b2lk
ICpwdiwgc2l6ZV90JiBidWZsZW4pCiAjdW5kZWYgYnVmCiAKICAgYnVmbGVu
ID0gY29waWVkX2NoYXJzOworICBkZWJ1Z19wcmludGYoImJ1ZmxlbiBzZXQg
dG8gJWQiLCBidWZsZW4pOwogICByZXR1cm47CiAKIGVycjoKZGlmZiAtLWdp
dCBhL3dpbnN1cC9jeWd3aW4vc2VsZWN0LmNjIGIvd2luc3VwL2N5Z3dpbi9z
ZWxlY3QuY2MKaW5kZXggMTAyMDVhMC4uMjViMGM1YSAxMDA2NDQKLS0tIGEv
d2luc3VwL2N5Z3dpbi9zZWxlY3QuY2MKKysrIGIvd2luc3VwL2N5Z3dpbi9z
ZWxlY3QuY2MKQEAgLTkyNSwxOCArOTI1LDI4IEBAIHBlZWtfY29uc29sZSAo
c2VsZWN0X3JlY29yZCAqbWUsIGJvb2wpCiAJICAgIGlmIChpcmVjLkV2ZW50
LktleUV2ZW50LmJLZXlEb3duCiAJCSYmIChpcmVjLkV2ZW50LktleUV2ZW50
LnVDaGFyLkFzY2lpQ2hhcgogCQkgICAgfHwgZmhhbmRsZXJfY29uc29sZTo6
Z2V0X25vbmFzY2lpX2tleSAoaXJlYywgdG1wYnVmKSkpCi0JICAgICAgcmV0
dXJuIG1lLT5yZWFkX3JlYWR5ID0gdHJ1ZTsKKwkgICAgICB7CisJCWRlYnVn
X3ByaW50ZigicGVla2VkIEtFWV9FVkVOVCIpOworCQlyZXR1cm4gbWUtPnJl
YWRfcmVhZHkgPSB0cnVlOworCSAgICAgIH0KIAkgIH0KIAllbHNlCiAJICB7
CiAJICAgIGlmIChpcmVjLkV2ZW50VHlwZSA9PSBNT1VTRV9FVkVOVAogCQkm
JiBmaC0+bW91c2VfYXdhcmUgKGlyZWMuRXZlbnQuTW91c2VFdmVudCkpCisJ
ICAgICAgeworCQlkZWJ1Z19wcmludGYoInBlZWtlZCBNT1VTRV9FVkVOVCIp
OwogCQlyZXR1cm4gbWUtPnJlYWRfcmVhZHkgPSB0cnVlOworCSAgICAgIH0K
IAkgICAgaWYgKGlyZWMuRXZlbnRUeXBlID09IEZPQ1VTX0VWRU5UICYmIGZo
LT5mb2N1c19hd2FyZSAoKSkKKwkgICAgICB7CisJCWRlYnVnX3ByaW50Zigi
cGVla2VkIEZPQ1VTX0VWRU5UIik7CiAJCXJldHVybiBtZS0+cmVhZF9yZWFk
eSA9IHRydWU7CisJICAgICAgfQogCSAgfQogCiAJLyogUmVhZCBhbmQgZGlz
Y2FyZCB0aGUgZXZlbnQgKi8KKwlkZWJ1Z19wcmludGYoImRpc2NhcmRlZCBv
dGhlciBldmVudCIpOwogCVJlYWRDb25zb2xlSW5wdXQgKGgsICZpcmVjLCAx
LCAmZXZlbnRzX3JlYWQpOwogICAgICAgfQogCi0tIAoyLjcuMgoK

--------------080408090807000901090707
Content-Type: text/plain; charset=UTF-8; x-mac-type="0"; x-mac-creator="0";
 name="0004-Improve-and-simplify-select.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="0004-Improve-and-simplify-select.patch"
Content-length: 8662

RnJvbSBjZjJkYjAxNGZlZmQ0YTg0ODgzMTZjZjkzMTMzMjViNzllMjU1MThk
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBKb2huIEhvb2QgPGNn
dWxsQGdsdXAub3JnPgpEYXRlOiBUaHUsIDQgRmViIDIwMTYgMDA6NDQ6NTYg
LTA1MDAKU3ViamVjdDogW1BBVENIIDQvNV0gSW1wcm92ZSBhbmQgc2ltcGxp
Znkgc2VsZWN0KCkuCgoJKiBjeWd3YWl0LmggKGN5Z3dhaXRfdXMpIFJlbW92
ZTsgdGhpcyByZXZlcnRzIHByZXZpb3VzIGNoYW5nZXMuCgkqIHNlbGVjdC5o
OiBFbGltaW5hdGUgcmVkdW5kYW50IHNlbGVjdF9zdHVmZjo6c2VsZWN0X2xv
b3Agc3RhdGUuCgkqIHNlbGVjdC5jYyAoc2VsZWN0KTogRWxpbWluYXRlIHJl
ZHVuZGFudAoJc2VsZWN0X3N0dWZmOjpzZWxlY3RfbG9vcCBzdGF0ZS4gIEVs
aW1pbmF0ZSByZWR1bmRhbnQgY29kZSBmb3IKCXplcm8gdGltZW91dC4gIERv
IG5vdCByZXR1cm4gZWFybHkgb24gZWFybHkgdGltZXIgcmV0dXJuLgoJKHNl
bGVjdF9zdHVmZjo6d2FpdCk6IEVsaW1pbmF0ZSByZWR1bmRhbnQKCXNlbGVj
dF9zdHVmZjo6c2VsZWN0X2xvb3Agc3RhdGUuCi0tLQogd2luc3VwL2N5Z3dp
bi9jeWd3YWl0LmggfCAyNyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KIHdpbnN1
cC9jeWd3aW4vc2VsZWN0LmNjIHwgNjMgKysrKysrKysrKysrLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogd2luc3VwL2N5Z3dpbi9z
ZWxlY3QuaCAgfCAgMSAtCiAzIGZpbGVzIGNoYW5nZWQsIDE1IGluc2VydGlv
bnMoKyksIDc2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3dpbnN1cC9j
eWd3aW4vY3lnd2FpdC5oIGIvd2luc3VwL2N5Z3dpbi9jeWd3YWl0LmgKaW5k
ZXggM2UwMmNkZC4uMTI0MGY1NCAxMDA2NDQKLS0tIGEvd2luc3VwL2N5Z3dp
bi9jeWd3YWl0LmgKKysrIGIvd2luc3VwL2N5Z3dpbi9jeWd3YWl0LmgKQEAg
LTU5LDMwICs1OSwzIEBAIGN5Z3dhaXQgKERXT1JEIGhvd2xvbmcpCiB7CiAg
IHJldHVybiBjeWd3YWl0IChOVUxMLCBob3dsb25nKTsKIH0KLQotZXh0ZXJu
IGlubGluZSBEV09SRCBfX2F0dHJpYnV0ZV9fICgoYWx3YXlzX2lubGluZSkp
Ci1jeWd3YWl0X3VzIChIQU5ETEUgaCwgTE9OR0xPTkcgaG93bG9uZywgdW5z
aWduZWQgbWFzaykKLXsKLSAgTEFSR0VfSU5URUdFUiBsaV9ob3dsb25nOwot
ICBQTEFSR0VfSU5URUdFUiBwbGlfaG93bG9uZzsKLSAgaWYgKGhvd2xvbmcg
PCAwTEwpCi0gICAgcGxpX2hvd2xvbmcgPSBOVUxMOwotICBlbHNlCi0gICAg
ewotICAgICAgbGlfaG93bG9uZy5RdWFkUGFydCA9IC0oMTBMTCAqIGhvd2xv
bmcpOwotICAgICAgcGxpX2hvd2xvbmcgPSAmbGlfaG93bG9uZzsKLSAgICB9
Ci0gIHJldHVybiBjeWd3YWl0IChoLCBwbGlfaG93bG9uZywgbWFzayk7Ci19
Ci0KLXN0YXRpYyBpbmxpbmUgRFdPUkQgX19hdHRyaWJ1dGVfXyAoKGFsd2F5
c19pbmxpbmUpKQotY3lnd2FpdF91cyAoSEFORExFIGgsIExPTkdMT05HIGhv
d2xvbmcgPSAtMSkKLXsKLSAgcmV0dXJuIGN5Z3dhaXRfdXMgKGgsIGhvd2xv
bmcsIGN3X2NhbmNlbCB8IGN3X3NpZyk7Ci19Ci0KLXN0YXRpYyBpbmxpbmUg
RFdPUkQgX19hdHRyaWJ1dGVfXyAoKGFsd2F5c19pbmxpbmUpKQotY3lnd2Fp
dF91cyAoTE9OR0xPTkcgaG93bG9uZykKLXsKLSAgcmV0dXJuIGN5Z3dhaXRf
dXMgKE5VTEwsIGhvd2xvbmcpOwotfQpkaWZmIC0tZ2l0IGEvd2luc3VwL2N5
Z3dpbi9zZWxlY3QuY2MgYi93aW5zdXAvY3lnd2luL3NlbGVjdC5jYwppbmRl
eCAyNWIwYzVhLi41NTZhNzlmIDEwMDY0NAotLS0gYS93aW5zdXAvY3lnd2lu
L3NlbGVjdC5jYworKysgYi93aW5zdXAvY3lnd2luL3NlbGVjdC5jYwpAQCAt
MzIsNyArMzIsNiBAQCBkZXRhaWxzLiAqLwogI2luY2x1ZGUgInBpbmZvLmgi
CiAjaW5jbHVkZSAic2lncHJvYy5oIgogI2luY2x1ZGUgImN5Z3Rscy5oIgot
I2luY2x1ZGUgImN5Z3dhaXQuaCIKIAogLyoKICAqIEFsbCB0aGVzZSBkZWZp
bmVzIGJlbG93IHNob3VsZCBiZSBpbiBzeXMvdHlwZXMuaApAQCAtMTU2LDcg
KzE1NSw3IEBAIHN0YXRpYyBpbnQKIHNlbGVjdCAoaW50IG1heGZkcywgZmRf
c2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9zZXQgKmV4Y2Vw
dGZkcywKIAlMT05HTE9ORyB1cykKIHsKLSAgc2VsZWN0X3N0dWZmOjp3YWl0
X3N0YXRlcyB3YWl0X3N0YXRlID0gc2VsZWN0X3N0dWZmOjpzZWxlY3RfbG9v
cDsKKyAgc2VsZWN0X3N0dWZmOjp3YWl0X3N0YXRlcyB3YWl0X3N0YXRlID0g
c2VsZWN0X3N0dWZmOjpzZWxlY3Rfc2V0X3plcm87CiAgIGludCByZXQgPSAw
OwogCiAgIC8qIFJlY29yZCB0aGUgY3VycmVudCB0aW1lIGZvciBsYXRlciB1
c2UuICovCkBAIC0xODIsMzAgKzE4MSw3IEBAIHNlbGVjdCAoaW50IG1heGZk
cywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9zZXQg
KmV4Y2VwdGZkcywKIAkgIH0KICAgICAgIHNlbGVjdF9wcmludGYgKCJzZWwu
YWx3YXlzX3JlYWR5ICVkIiwgc2VsLmFsd2F5c19yZWFkeSk7CiAKLSAgICAg
IC8qIERlZ2VuZXJhdGUgY2FzZS4gIE5vIGZkcyB0byB3YWl0IGZvci4gIEp1
c3Qgd2FpdCBmb3IgdGltZSB0byBydW4gb3V0Ci0JIG9yIHNpZ25hbCB0byBh
cnJpdmUuICovCi0gICAgICBpZiAoc2VsLnN0YXJ0Lm5leHQgPT0gTlVMTCkK
LQlzd2l0Y2ggKGN5Z3dhaXRfdXMgKHVzKSkKLQkgIHsKLQkgIGNhc2UgV0FJ
VF9TSUdOQUxFRDoKLQkgICAgc2VsZWN0X3ByaW50ZiAoInNpZ25hbCByZWNl
aXZlZCIpOwotCSAgICAvKiBzZWxlY3QoKSBpcyBhbHdheXMgaW50ZXJydXB0
ZWQgYnkgYSBzaWduYWwgc28gc2V0IEVJTlRSLAotCSAgICAgICB1bmNvbmRp
dGlvbmFsbHksIGlnbm9yaW5nIGFueSBTQV9SRVNUQVJUIGRldGVjdGlvbiBi
eQotCSAgICAgICBjYWxsX3NpZ25hbF9oYW5kbGVyKCkuICAqLwotCSAgICBf
bXlfdGxzLmNhbGxfc2lnbmFsX2hhbmRsZXIgKCk7Ci0JICAgIHNldF9zaWdf
ZXJybm8gKEVJTlRSKTsKLQkgICAgd2FpdF9zdGF0ZSA9IHNlbGVjdF9zdHVm
Zjo6c2VsZWN0X3NpZ25hbGxlZDsKLQkgICAgYnJlYWs7Ci0JICBjYXNlIFdB
SVRfQ0FOQ0VMRUQ6Ci0JICAgIHNlbC5kZXN0cm95ICgpOwotCSAgICBwdGhy
ZWFkOjpzdGF0aWNfY2FuY2VsX3NlbGYgKCk7Ci0JICAgIC8qTk9UUkVBQ0hF
RCovCi0JICBkZWZhdWx0OgotCSAgICAvKiBTZXQgd2FpdF9zdGF0ZSB0byB6
ZXJvIGJlbG93LiAqLwotCSAgICB3YWl0X3N0YXRlID0gc2VsZWN0X3N0dWZm
OjpzZWxlY3Rfc2V0X3plcm87Ci0JICAgIGJyZWFrOwotCSAgfQotICAgICAg
ZWxzZSBpZiAoc2VsLmFsd2F5c19yZWFkeSB8fCB1cyA9PSAwKQorICAgICAg
aWYgKHNlbC5hbHdheXNfcmVhZHkgfHwgdXMgPT0gMCkKIAkvKiBDYXRjaCBh
bnkgYWN0aXZlIGZkcyB2aWEgc2VsLnBvbGwoKSBiZWxvdyAqLwogCXdhaXRf
c3RhdGUgPSBzZWxlY3Rfc3R1ZmY6OnNlbGVjdF9vazsKICAgICAgIGVsc2UK
QEAgLTIxNCwyOSArMTkwLDI0IEBAIHNlbGVjdCAoaW50IG1heGZkcywgZmRf
c2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBmZF9zZXQgKmV4Y2Vw
dGZkcywKIAogICAgICAgc2VsZWN0X3ByaW50ZiAoInNlbC53YWl0IHJldHVy
bnMgJWQiLCB3YWl0X3N0YXRlKTsKIAotICAgICAgaWYgKHdhaXRfc3RhdGUg
Pj0gc2VsZWN0X3N0dWZmOjpzZWxlY3Rfb2spCisgICAgICBpZiAod2FpdF9z
dGF0ZSA9PSBzZWxlY3Rfc3R1ZmY6OnNlbGVjdF9vaykKIAl7CiAJICBVTklY
X0ZEX1pFUk8gKHJlYWRmZHMsIG1heGZkcyk7CiAJICBVTklYX0ZEX1pFUk8g
KHdyaXRlZmRzLCBtYXhmZHMpOwogCSAgVU5JWF9GRF9aRVJPIChleGNlcHRm
ZHMsIG1heGZkcyk7Ci0JICBpZiAod2FpdF9zdGF0ZSA9PSBzZWxlY3Rfc3R1
ZmY6OnNlbGVjdF9zZXRfemVybykKLQkgICAgcmV0ID0gMDsKLQkgIGVsc2UK
LQkgICAgewotCSAgICAgIC8qIFNldCBiaXQgbWFzayBmcm9tIHNlbCByZWNv
cmRzLiAgVGhpcyBhbHNvIHNldHMgcmV0IHRvIHRoZQotCQkgcmlnaHQgdmFs
dWUgPj0gMCwgbWF0Y2hpbmcgdGhlIG51bWJlciBvZiBiaXRzIHNldCBpbiB0
aGUKLQkJIGZkcyByZWNvcmRzLiAgaWYgcmV0IGlzIDAsIGNvbnRpbnVlIHRv
IGxvb3AuICovCi0JICAgICAgcmV0ID0gc2VsLnBvbGwgKHJlYWRmZHMsIHdy
aXRlZmRzLCBleGNlcHRmZHMpOwotCSAgICAgIGlmICghcmV0KQotCQl3YWl0
X3N0YXRlID0gc2VsZWN0X3N0dWZmOjpzZWxlY3RfbG9vcDsKLQkgICAgfQor
CSAgLyogU2V0IGJpdCBtYXNrIGZyb20gc2VsIHJlY29yZHMuICBUaGlzIGFs
c28gc2V0cyByZXQgdG8gdGhlCisJICAgICByaWdodCB2YWx1ZSA+PSAwLCBt
YXRjaGluZyB0aGUgbnVtYmVyIG9mIGJpdHMgc2V0IGluIHRoZQorCSAgICAg
ZmRzIHJlY29yZHMuICBpZiByZXQgaXMgMCwgY29udGludWUgdG8gbG9vcC4g
Ki8KKwkgIHJldCA9IHNlbC5wb2xsIChyZWFkZmRzLCB3cml0ZWZkcywgZXhj
ZXB0ZmRzKTsKKwkgIGlmICghcmV0KQorCSAgICB3YWl0X3N0YXRlID0gc2Vs
ZWN0X3N0dWZmOjpzZWxlY3Rfc2V0X3plcm87CiAJfQogICAgICAgLyogQWx3
YXlzIGNsZWFuIHVwIGV2ZXJ5dGhpbmcgaGVyZS4gIElmIHdlJ3JlIGxvb3Bp
bmcgdGhlbiBidWlsZCBpdAogCSBhbGwgdXAgYWdhaW4uICAqLwogICAgICAg
c2VsLmNsZWFudXAgKCk7CiAgICAgICBzZWwuZGVzdHJveSAoKTsKLSAgICAg
IC8qIFJlY2FsY3VsYXRlIHRpbWUgcmVtYWluaW5nIHRvIHdhaXQgaWYgd2Ug
YXJlIGdvaW5nIHRvIGJlIGxvb3BpbmcuICovCi0gICAgICBpZiAod2FpdF9z
dGF0ZSA9PSBzZWxlY3Rfc3R1ZmY6OnNlbGVjdF9sb29wICYmIHVzICE9IC0x
KQorICAgICAgLyogQ2hlY2sgYW5kIHJlY2FsY3VsYXRlIHRpbWVvdXQuICov
CisgICAgICBpZiAodXMgIT0gLTFMTCAmJiB3YWl0X3N0YXRlID09IHNlbGVj
dF9zdHVmZjo6c2VsZWN0X3NldF96ZXJvKQogCXsKIAkgIHNlbGVjdF9wcmlu
dGYgKCJyZWNhbGN1bGF0aW5nIHVzIik7CiAJICBMT05HTE9ORyBub3cgPSBn
dG9kLnVzZWNzICgpOwpAQCAtMjU4LDcgKzIyOSw3IEBAIHNlbGVjdCAoaW50
IG1heGZkcywgZmRfc2V0ICpyZWFkZmRzLCBmZF9zZXQgKndyaXRlZmRzLCBm
ZF9zZXQgKmV4Y2VwdGZkcywKIAkgICAgfQogCX0KICAgICB9Ci0gIHdoaWxl
ICh3YWl0X3N0YXRlID09IHNlbGVjdF9zdHVmZjo6c2VsZWN0X2xvb3ApOwor
ICB3aGlsZSAod2FpdF9zdGF0ZSA9PSBzZWxlY3Rfc3R1ZmY6OnNlbGVjdF9z
ZXRfemVybyk7CiAKICAgaWYgKHdhaXRfc3RhdGUgPCBzZWxlY3Rfc3R1ZmY6
OnNlbGVjdF9vaykKICAgICByZXQgPSAtMTsKQEAgLTQ5NCw3ICs0NjUsNyBA
QCBuZXh0X3doaWxlOjsKIAkgdG8gd2FpdCBmb3IuICAqLwogICAgIGRlZmF1
bHQ6CiAgICAgICBzID0gJnN0YXJ0OwotICAgICAgYm9vbCBnb3RvbmUgPSBm
YWxzZTsKKyAgICAgIHJlcyA9IHNlbGVjdF9zZXRfemVybzsKICAgICAgIC8q
IFNvbWUgdHlwZXMgb2Ygb2JqZWN0cyAoZS5nLiwgY29uc29sZXMpIHdha2Ug
dXAgb24gImluYXBwcm9wcmlhdGUiCiAJIGV2ZW50cyBsaWtlIG1vdXNlIG1v
dmVtZW50cy4gIFRoZSB2ZXJpZnkgZnVuY3Rpb24gd2lsbCBkZXRlY3QgdGhl
c2UKIAkgc2l0dWF0aW9ucy4gIElmIGl0IHJldHVybnMgZmFsc2UsIHRoZW4g
dGhpcyB3YWtldXAgd2FzIGEgZmFsc2UgYWxhcm0KQEAgLTUwOCwxMyArNDc5
LDkgQEAgbmV4dF93aGlsZTo7CiAJICB9CiAJZWxzZSBpZiAoKCgod2FpdF9y
ZXQgPj0gbSAmJiBzLT53aW5kb3dzX2hhbmRsZSkgfHwgcy0+aCA9PSB3NFt3
YWl0X3JldF0pKQogCQkgJiYgcy0+dmVyaWZ5IChzLCByZWFkZmRzLCB3cml0
ZWZkcywgZXhjZXB0ZmRzKSkKLQkgIGdvdG9uZSA9IHRydWU7CisJICByZXMg
PSBzZWxlY3Rfb2s7CiAKLSAgICAgIGlmICghZ290b25lKQotCXJlcyA9IHNl
bGVjdF9sb29wOwotICAgICAgZWxzZQotCXJlcyA9IHNlbGVjdF9vazsKLSAg
ICAgIHNlbGVjdF9wcmludGYgKCJnb3RvbmUgJWQiLCBnb3RvbmUpOworICAg
ICAgc2VsZWN0X3ByaW50ZiAoInJlcyBhZnRlciB2ZXJpZnkgJWQiLCByZXMp
OwogICAgICAgYnJlYWs7CiAgICAgfQogb3V0OgpkaWZmIC0tZ2l0IGEvd2lu
c3VwL2N5Z3dpbi9zZWxlY3QuaCBiL3dpbnN1cC9jeWd3aW4vc2VsZWN0LmgK
aW5kZXggNTgxZWU0ZS4uM2M3NDlhZCAxMDA2NDQKLS0tIGEvd2luc3VwL2N5
Z3dpbi9zZWxlY3QuaAorKysgYi93aW5zdXAvY3lnd2luL3NlbGVjdC5oCkBA
IC03OCw3ICs3OCw2IEBAIHB1YmxpYzoKICAgZW51bSB3YWl0X3N0YXRlcwog
ICB7CiAgICAgc2VsZWN0X3NpZ25hbGxlZCA9IC0zLAotICAgIHNlbGVjdF9s
b29wID0gLTIsCiAgICAgc2VsZWN0X2Vycm9yID0gLTEsCiAgICAgc2VsZWN0
X29rID0gMCwKICAgICBzZWxlY3Rfc2V0X3plcm8gPSAxCi0tIAoyLjcuMgoK

--------------080408090807000901090707
Content-Type: text/plain; charset=UTF-8; x-mac-type="0"; x-mac-creator="0";
 name="0005-winsup-testsuite-configure-chmod-a-x.patch"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="0005-winsup-testsuite-configure-chmod-a-x.patch"
Content-length: 627

RnJvbSAzZjNmNzExMmY5NDhkNzBjMTUwNDY2NDFjZjNjYzg5OGE5Y2E0Yzcx
IE1vbiBTZXAgMTcgMDA6MDA6MDAgMjAwMQpGcm9tOiBKb2huIEhvb2QgPGNn
dWxsQGdsdXAub3JnPgpEYXRlOiBGcmksIDE4IE1hciAyMDE2IDA0OjMxOjE2
IC0wNDAwClN1YmplY3Q6IFtQQVRDSCA1LzVdIAkqIHdpbnN1cC90ZXN0c3Vp
dGUvY29uZmlndXJlOiBjaG1vZCBhK3gKCi0tLQogd2luc3VwL3Rlc3RzdWl0
ZS9jb25maWd1cmUgfCAwCiAxIGZpbGUgY2hhbmdlZCwgMCBpbnNlcnRpb25z
KCspLCAwIGRlbGV0aW9ucygtKQogbW9kZSBjaGFuZ2UgMTAwNjQ0ID0+IDEw
MDc1NSB3aW5zdXAvdGVzdHN1aXRlL2NvbmZpZ3VyZQoKZGlmZiAtLWdpdCBh
L3dpbnN1cC90ZXN0c3VpdGUvY29uZmlndXJlIGIvd2luc3VwL3Rlc3RzdWl0
ZS9jb25maWd1cmUKb2xkIG1vZGUgMTAwNjQ0Cm5ldyBtb2RlIDEwMDc1NQot
LSAKMi43LjIKCg==

--------------080408090807000901090707--

--9lmCqEtG6xgmfFWioNNxPrG6xEEcO0BH9--

--iunf7idNVxFQG8Riv2PrclGbd5K5aVjSv
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"
Content-length: 842

-----BEGIN PGP SIGNATURE-----
Comment: GPGTools - https://gpgtools.org

iQIcBAEBCgAGBQJW7dZOAAoJEPA0E1Pu4Sd32X8P/1whXEJBiN8I9rDJ3LodxCz7
S4uLPBnxI7Otg13PaOe7/n1EgfjClE+3CQO0TbqSr7tsO+hFVTy2Why8EVeLLMFd
5+YbuofHulPXv3mYsFEWJI+0d6C+OYm+lErJ7Uy/A3uJ0ltyWCqaopW2f8xjoRN6
nSKHdgI57cy30GC3fl4w9wo6m46aWZCWcRk4SELcxwhAPn5G6HUr7Wq++SRjsemo
6+lCWet6hzEtiKgUlquGw5BaVcJ4JZ/Yv3ycF3W327C+0OrBTGaulMByPTCeSisy
pkZsHuIJCA9FCtG4JH5d5JEcp/gSciEwo47x2ReZm5IfZT3UlaupIGh7IJNDBEWR
BWH2biQ9sBDEwDjWS9UeSq+qKXcTvscUHM5zT5x7NoqiElxmGWvLnmSt2VKyMDzq
5f9cErdvS4+e4rS/4OBcHpnnEUoxV+b7yeGgiflsPrFLApvzPw809ATqBNaJfy2h
2XuiK7TqtSegO7iw0icmR9/Ep8WOxuvn+UT8ZIeuCpk4cwGcvAfDJt7brIFHGA6O
2+O2mUy2hTf5GLbushdZ8bdvyjucT4d3gBGB72LfGmfi8F5A0KxoFzvxJDZI3JzW
XKycdOnjoASpUWRspDnsfQcq/I/j2UzChHC9alri197HpTouSC4/9UV+TMgbSvMi
9IlS4fKy7fStQYJvKmlw
=6F+3
-----END PGP SIGNATURE-----

--iunf7idNVxFQG8Riv2PrclGbd5K5aVjSv--
