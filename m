Return-Path: <cygwin-patches-return-6444-listarch-cygwin-patches=sources.redhat.com@cygwin.com>
Received: (qmail 16642 invoked by alias); 13 Mar 2009 21:48:09 -0000
Received: (qmail 16632 invoked by uid 22791); 13 Mar 2009 21:48:08 -0000
X-Spam-Check-By: sourceware.org
Received: from pool-173-76-42-111.bstnma.fios.verizon.net (HELO cgf.cx) (173.76.42.111)     by sourceware.org (qpsmtpd/0.43rc1) with ESMTP; Fri, 13 Mar 2009 21:48:04 +0000
Received: from ednor.cgf.cx (ednor.casa.cgf.cx [192.168.187.5]) 	by cgf.cx (Postfix) with ESMTP id 653BC13C022 	for <cygwin-patches@cygwin.com>; Fri, 13 Mar 2009 17:47:54 -0400 (EDT)
Received: by ednor.cgf.cx (Postfix, from userid 201) 	id 57D032B385; Fri, 13 Mar 2009 17:47:54 -0400 (EDT)
Date: Fri, 13 Mar 2009 21:48:00 -0000
From: Christopher Faylor <cgf-use-the-mailinglist-please@cygwin.com>
To: cygwin-patches@cygwin.com
Subject: Re: errno.h: ESTRPIPE
Message-ID: <20090313214754.GB12746@ednor.casa.cgf.cx>
Reply-To: cygwin-patches@cygwin.com
Mail-Followup-To: cygwin-patches@cygwin.com
References: <49B8A1F8.1030306@users.sourceforge.net> <20090312085748.GE14431@calimero.vinschen.de> <49B98AC4.1040202@users.sourceforge.net> <20090313103036.GA13010@calimero.vinschen.de> <49BA4D48.1030705@etr-usa.com> <20090313145026.GB11253@ednor.casa.cgf.cx> <20090313205949.GE9322@calimero.vinschen.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20090313205949.GE9322@calimero.vinschen.de>
User-Agent: Mutt/1.5.16 (2007-06-09)
Mailing-List: contact cygwin-patches-help@cygwin.com; run by ezmlm
Precedence: bulk
List-Id: <cygwin-patches.cygwin.com>
List-Subscribe: <mailto:cygwin-patches-subscribe@cygwin.com>
List-Post: <mailto:cygwin-patches@cygwin.com>
List-Archive: <http://sourceware.org/ml/cygwin-patches/>
List-Help: <mailto:cygwin-patches-help@cygwin.com>, <http://sourceware.org/ml/#faqs>
Sender: cygwin-patches-owner@cygwin.com
Mail-Followup-To: cygwin-patches@cygwin.com
X-SW-Source: 2009-q1/txt/msg00042.txt.bz2

On Fri, Mar 13, 2009 at 09:59:49PM +0100, Corinna Vinschen wrote:
>On Mar 13 10:50, Christopher Faylor wrote:
>> On Fri, Mar 13, 2009 at 06:10:48AM -0600, Warren Young wrote:
>> > Corinna Vinschen wrote:
>> >> This is very Linux device specific and this never occurs on Cygwin.
>> >> What about just defining this error code to some arbitrary value like
>> >>   #ifdef __CYGWIN__
>> >>   #define ESTRPIPE 9999
>> >>   #endif
>> >
>> > I like it.  If there are any other errno constants supported by Linux but 
>> > not Cygwin, you could also define them with the same value.  It would 
>> > effectively be the "this never happens" value.
>> 
>> I'm not sure that you got this but I think Corinna was suggesting that
>> this should be defined in the code in question rather than in Cygwin
>> itself.
>
>Right.
>
>> I don't have a problem defining unique errnos that currently never
>> happen if it makes Cygwin more compatible with Linux.  I just think that
>> the value should be marked as
>> 
>> /* Linux compatibility: this currently can never happen */
>
>Hmm, this doesn't make much sense in the newlib errno.h.  We already
>have a couple of errnos which are not generated by Cygwin without such
>a comment.

I was just trying optimistically to avoid the mailing list email
wondering why the errno wasn't being generated.

>>Yaakov's intent was to reduce the amount of special casing required
>>when porting to Cygwin to remove the need to do #ifdef __CYGWIN__'s.  I
>>think he knows that he could have ifdef'ed this since I suspect that
>>he's had to do that many times in the past.
>>
>>Defining a unique value means that, if we do decide at some point to
>>add functionality which utilizes that errno there will be no need to
>>recompile the application.
>
>That's quite a good argument.  If you both think it's a good idea to
>define this new errno, I'm fine with it, too.

I was wondering if we should add a conditionalized "#include
<cygwin/errno.h>" to newlib's errno.h.  Then we could add things without
littering the file with #ifdef CYGWIN's.

cgf
