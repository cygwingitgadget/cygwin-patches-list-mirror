Return-Path: <cygwin-patches-return-9415-listarch-cygwin-patches=sources.redhat.com@cygwin.com>
Received: (qmail 49565 invoked by alias); 26 May 2019 15:10:55 -0000
Mailing-List: contact cygwin-patches-help@cygwin.com; run by ezmlm
Precedence: bulk
List-Id: <cygwin-patches.cygwin.com>
List-Subscribe: <mailto:cygwin-patches-subscribe@cygwin.com>
List-Post: <mailto:cygwin-patches@cygwin.com>
List-Archive: <http://sourceware.org/ml/cygwin-patches/>
List-Help: <mailto:cygwin-patches-help@cygwin.com>, <http://sourceware.org/ml/#faqs>
Sender: cygwin-patches-owner@cygwin.com
Mail-Followup-To: cygwin-patches@cygwin.com
Received: (qmail 49489 invoked by uid 89); 26 May 2019 15:10:54 -0000
Authentication-Results: sourceware.org; auth=none
X-Spam-SWARE-Status: No, score=-23.9 required=5.0 tests=AWL,BAYES_00,GIT_PATCH_0,GIT_PATCH_1,GIT_PATCH_2,GIT_PATCH_3,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS,UNSUBSCRIBE_BODY autolearn=ham version=3.3.1 spammy=forces, closing, cancelled, performs
X-HELO: NAM05-DM3-obe.outbound.protection.outlook.com
Received: from mail-eopbgr730108.outbound.protection.outlook.com (HELO NAM05-DM3-obe.outbound.protection.outlook.com) (40.107.73.108) by sourceware.org (qpsmtpd/0.93/v0.84-503-g423c35a) with ESMTP; Sun, 26 May 2019 15:10:50 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=cornell.edu; s=selector2; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=ADD1dfrs81tRQ1VFsywzCUZpW1yuBS8yyP6fuOASXl4=; b=OLvSSMW55XXDXnTbGX82sNmZXICvL0RGaRDt8vHE6/lm/9+ufT82U4QIg8nINF1N0/wJAHFPl9UynKmbXXIy6Kw4JCEG0yeyCRX1jO/rZs3TeWIdyFk8Xb+7wtncPuYPoCY08VUxdOwWqzPUYZ9/Jigm7YpStzC2UlvTrsAAgTw=
Received: from DM6PR04MB5211.namprd04.prod.outlook.com (20.178.24.208) by DM6PR04MB4777.namprd04.prod.outlook.com (20.176.107.206) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.1922.15; Sun, 26 May 2019 15:10:38 +0000
Received: from DM6PR04MB5211.namprd04.prod.outlook.com ([fe80::510a:3a42:f346:a4d8]) by DM6PR04MB5211.namprd04.prod.outlook.com ([fe80::510a:3a42:f346:a4d8%7]) with mapi id 15.20.1922.021; Sun, 26 May 2019 15:10:38 +0000
From: Ken Brown <kbrown@cornell.edu>
To: "cygwin-patches@cygwin.com" <cygwin-patches@cygwin.com>
Subject: [PATCH draft 5/6] Cygwin: remove the fhandler_base_overlapped class
Date: Sun, 26 May 2019 15:10:00 -0000
Message-ID: <20190526151019.2187-6-kbrown@cornell.edu>
References: <20190526151019.2187-1-kbrown@cornell.edu>
In-Reply-To: <20190526151019.2187-1-kbrown@cornell.edu>
authentication-results: spf=none (sender IP is ) smtp.mailfrom=kbrown@cornell.edu;
x-ms-exchange-purlcount: 2
x-ms-oob-tlc-oobclassifiers: OLM:6790;
received-spf: None (protection.outlook.com: cornell.edu does not designate permitted sender hosts)
x-ms-exchange-senderadcheck: 1
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: ksb2@cornell.edu
X-IsSubscribed: yes
X-SW-Source: 2019-q2/txt/msg00122.txt.bz2

VGhlcmUgYXJlIG5vIGxvbmdlciBhbnkgY2xhc3NlcyBkZXJpdmVkIGZyb20g
aXQuDQoNCkFsc28gcmVtb3ZlIHRoZSAnd2FzX25vbmJsb2NraW5nJyBmbGFn
LCB3aGljaCB3YXMgbmVlZGVkIG9ubHkgZm9yDQpmaGFuZGxlcl9iYXNlX292
ZXJsYXBwZWQuDQotLS0NCiB3aW5zdXAvY3lnd2luL2ZoYW5kbGVyLmNjIHwg
MzgzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQog
d2luc3VwL2N5Z3dpbi9maGFuZGxlci5oICB8ICA3NSArLS0tLS0tLQ0KIHdp
bnN1cC9jeWd3aW4vc3lzY2FsbHMuY2MgfCAgIDEgLQ0KIDMgZmlsZXMgY2hh
bmdlZCwgMSBpbnNlcnRpb24oKyksIDQ1OCBkZWxldGlvbnMoLSkNCg0KZGlm
ZiAtLWdpdCBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIuY2MgYi93aW5zdXAv
Y3lnd2luL2ZoYW5kbGVyLmNjDQppbmRleCBiMGM5YzUwYzMuLmJiNjE4ZmE4
OCAxMDA2NDQNCi0tLSBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIuY2MNCisr
KyBiL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIuY2MNCkBAIC0zMCwxNiArMzAs
MTAgQEAgZGV0YWlscy4gKi8NCiAjaW5jbHVkZSA8YXNtL3NvY2tldC5oPg0K
ICNpbmNsdWRlICJjeWd3YWl0LmgiDQogDQotI2RlZmluZSBNQVhfT1ZFUkxB
UFBFRF9XUklURV9MRU4gKDY0ICogMTAyNCAqIDEwMjQpDQotI2RlZmluZSBN
SU5fT1ZFUkxBUFBFRF9XUklURV9MRU4gKDEgKiAxMDI0ICogMTAyNCkNCi0N
CiBzdGF0aWMgY29uc3QgaW50IENIVU5LX1NJWkUgPSAxMDI0OyAvKiBVc2Vk
IGZvciBjcmxmIGNvbnZlcnNpb25zICovDQogDQogc3RydWN0IF9fY3lnd2lu
X3BlcmZpbGUgKnBlcmZpbGVfdGFibGU7DQogDQotSEFORExFIE5PX0NPUFkg
ZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkOjphc2lvX2RvbmU7DQotTE9ORyBO
T19DT1BZIGZoYW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZDo6YXNpb19jbG9zZV9j
b3VudGVyOw0KLQ0KIHZvaWQNCiBmaGFuZGxlcl9iYXNlOjpyZXNldCAoY29u
c3QgZmhhbmRsZXJfYmFzZSAqZnJvbSkNCiB7DQpAQCAtMTk2LDggKzE5MCw2
IEBAIGZoYW5kbGVyX2Jhc2U6OnNldF9mbGFncyAoaW50IGZsYWdzLCBpbnQg
c3VwcGxpZWRfYmluKQ0KICAgICBiaW4gPSB3YmluYXJ5ICgpIHx8IHJiaW5h
cnkgKCkgPyBPX0JJTkFSWSA6IE9fVEVYVDsNCiANCiAgIG9wZW5mbGFncyA9
IGZsYWdzIHwgYmluOw0KLSAgaWYgKG9wZW5mbGFncyAmIE9fTk9OQkxPQ0sp
DQotICAgIHdhc19ub25ibG9ja2luZyAodHJ1ZSk7DQogDQogICBiaW4gJj0g
T19CSU5BUlk7DQogICByYmluYXJ5IChiaW4gPyB0cnVlIDogZmFsc2UpOw0K
QEAgLTEyMjMsODggKzEyMTUsNiBAQCBmaGFuZGxlcl9iYXNlOjpjbG9zZSAo
KQ0KICAgcmV0dXJuIHJlczsNCiB9DQogDQotRFdPUkQgV0lOQVBJDQotZmx1
c2hfYXN5bmNfaW8gKHZvaWQgKmFyZykNCi17DQotICBmaGFuZGxlcl9iYXNl
X292ZXJsYXBwZWQgKmZoID0gKGZoYW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZCAq
KSBhcmc7DQotICBkZWJ1Z19vbmx5X3ByaW50ZiAoIndhaXRpbmcgZm9yIHdy
aXRlIEkvTyBmb3IgJXMiLCBmaC0+Z2V0X25hbWUgKCkpOw0KLSAgRFdPUkQg
bmJ5dGVzOw0KLSAgYm9vbCByZXMgPSBHZXRPdmVybGFwcGVkUmVzdWx0IChm
aC0+Z2V0X291dHB1dF9oYW5kbGUgKCksDQotCQkJCSAgZmgtPmdldF9vdmVy
bGFwcGVkICgpLCAmbmJ5dGVzLCB0cnVlKTsNCi0gIGRlYnVnX3ByaW50ZiAo
ImZpbmlzaGVkIHdhaXRpbmcgZm9yIEkvTyBmcm9tICVzLCByZXMgJWQiLCBm
aC0+Z2V0X25hbWUgKCksDQotCQlyZXMpOw0KLSAgZmgtPmNsb3NlICgpOw0K
LSAgZGVsZXRlIGZoOw0KLQ0KLSAgSW50ZXJsb2NrZWREZWNyZW1lbnQgKCZm
aGFuZGxlcl9iYXNlX292ZXJsYXBwZWQ6OmFzaW9fY2xvc2VfY291bnRlcik7
DQotICBTZXRFdmVudCAoZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkOjphc2lv
X2RvbmUpOw0KLQ0KLSAgX215X3Rscy5fY3RpbmZvLT5hdXRvX3JlbGVhc2Ug
KCk7DQotICByZXR1cm4gMDsNCi19DQotDQotdm9pZA0KLWZoYW5kbGVyX2Jh
c2Vfb3ZlcmxhcHBlZDo6Zmx1c2hfYWxsX2FzeW5jX2lvICgpDQotew0KLSAg
d2hpbGUgKGFzaW9fY2xvc2VfY291bnRlciA+IDApDQotICAgIGlmIChXYWl0
Rm9yU2luZ2xlT2JqZWN0IChhc2lvX2RvbmUsIElORklOSVRFKSAhPSBXQUlU
X09CSkVDVF8wKQ0KLSAgICAgIHsNCi0Jc3lzdGVtX3ByaW50ZiAoIldhaXRG
b3JTaW5nbGVPYmplY3QgZmFpbGVkLCBwb3NzaWJsZSBkYXRhIGxvc3MgaW4g
cGlwZSwgJUUiKTsNCi0JYnJlYWs7DQotICAgICAgfQ0KLSAgYXNpb19jbG9z
ZV9jb3VudGVyID0gMDsNCi0gIGlmIChhc2lvX2RvbmUpDQotICAgIENsb3Nl
SGFuZGxlIChhc2lvX2RvbmUpOw0KLX0NCi0NCi0vKiBTdGFydCBhIHRocmVh
ZCB0byBoYW5kbGUgY2xvc2luZyBvZiBvdmVybGFwcGVkIGFzeW5jaHJvbm91
cyBJL08gc2luY2UNCi0gICBXaW5kb3dzIGFtYXppbmdseSBkb2VzIG5vdCBz
ZWVtIHRvIGFsd2F5cyBmbHVzaCBJL08gb24gY2xvc2UuICAqLw0KLXZvaWQN
Ci1maGFuZGxlcl9iYXNlX292ZXJsYXBwZWQ6OmNoZWNrX2xhdGVyICgpDQot
ew0KLSAgc2V0X2Nsb3NlX29uX2V4ZWMgKHRydWUpOw0KLSAgY2hhciBidWZb
TUFYX1BBVEhdOw0KLSAgaWYgKCFhc2lvX2RvbmUNCi0gICAgICAmJiAhKGFz
aW9fZG9uZSA9IENyZWF0ZUV2ZW50ICgmc2VjX25vbmVfbmloLCBmYWxzZSwg
ZmFsc2UsDQotCQkJCSAgICBzaGFyZWRfbmFtZSAoYnVmLCAiYXNpbyIsDQot
CQkJCQkJIEdldEN1cnJlbnRQcm9jZXNzSWQgKCkpKSkpDQotICAgIGFwaV9m
YXRhbCAoIkNyZWF0ZUV2ZW50IGZhaWxlZCwgJUUiKTsNCi0NCi0gIEludGVy
bG9ja2VkSW5jcmVtZW50ICgmYXNpb19jbG9zZV9jb3VudGVyKTsNCi0gIGlm
ICghbmV3IGN5Z3RocmVhZChmbHVzaF9hc3luY19pbywgdGhpcywgImZsYXNp
byIpKQ0KLSAgICBhcGlfZmF0YWwgKCJjb3VsZG4ndCBjcmVhdGUgYSB0aHJl
YWQgdG8gdHJhY2sgYXN5bmMgSS9PLCAlRSIpOw0KLSAgZGVidWdfcHJpbnRm
ICgic3RhcnRlZCB0aHJlYWQgdG8gaGFuZGxlIGFzeW5jaHJvbm91cyBjbG9z
aW5nIGZvciAlcyIsIGdldF9uYW1lICgpKTsNCi19DQotDQotaW50DQotZmhh
bmRsZXJfYmFzZV9vdmVybGFwcGVkOjpjbG9zZSAoKQ0KLXsNCi0gIGludCBy
ZXM7DQotICBpbnQgd3JpdGVyID0gKGdldF9hY2Nlc3MgKCkgJiBHRU5FUklD
X1dSSVRFKTsNCi0gIC8qIE5lZWQgdG8gdHJlYXQgbm9uLWJsb2NraW5nIEkv
TyBzcGVjaWFsbHkgYmVjYXVzZSBXaW5kb3dzIGFwcGVhcnMgdG8NCi0gICAg
IGJlIGJyYWluLWRlYWQuICBXZSdyZSBjaGVja2luZyBoZXJlIGlmIHRoZSBk
ZXNjcmlwdG9yIHdhcyBldmVyIHNldA0KLSAgICAgdG8gbm9uYmxvY2tpbmcs
IHJhdGhlciB0aGFuIGNoZWNraW5nIGlmIGl0J3Mgbm9uYmxvY2tpbmcgYXQg
Y2xvc2UgdGltZS4NCi0gICAgIFRoZSByZWFzb24gaXMgdGhhdCBhcHBsaWNh
dGlvbnMgbWF5IHN3aXRjaCBiYWNrIHRvIGJsb2NraW5nIChmb3IgdGhlDQot
ICAgICBzYWtlIG9mIHNvbWUgb3RoZXIgYXBwbGljYXRpb24gYWNjZXNzaW5n
IHRoaXMgZGVzY3JpcHRvcikgd2l0aG91dA0KLSAgICAgcGVyZm9ybWFpbmcg
YW55IGZ1cnRoZXIgSS9PLiAgVGhlc2UgYXBwbGljYXRpb25zIHdvdWxkIHN1
ZmZlciBkYXRhDQotICAgICBsb3NzLCB3aGljaCB0aGlzIHdvcmthcm91bmQg
aXMgdHJ5aW5nIHRvIGZpeC4gKi8NCi0gIGlmICh3cml0ZXIgJiYgd2FzX25v
bmJsb2NraW5nICgpICYmIGhhc19vbmdvaW5nX2lvICgpKQ0KLSAgICB7DQot
ICAgICAgY2xvbmUgKEhFQVBfM19GSEFORExFUiktPmNoZWNrX2xhdGVyICgp
Ow0KLSAgICAgIHJlcyA9IDA7DQotICAgIH0NCi0gIGVsc2UNCi0gICAgew0K
LSAgICAgLyogQ2FuY2VsbGluZyBzZWVtcyB0byBiZSBuZWNlc3NhcnkgZm9y
IGNhc2VzIHdoZXJlIGEgcmVhZGVyIGlzDQotCSBzdGlsbCBleGVjdXRpbmcg
d2hlbiBhIHNpZ25hbCBoYW5kbGVyIHBlcmZvcm1zIGEgY2xvc2UuICAqLw0K
LSAgICAgIGlmICghd3JpdGVyKQ0KLQlDYW5jZWxJbyAoZ2V0X2hhbmRsZSAo
KSk7DQotICAgICAgZGVzdHJveV9vdmVybGFwcGVkICgpOw0KLSAgICAgIHJl
cyA9IGZoYW5kbGVyX2Jhc2U6OmNsb3NlICgpOw0KLSAgICB9DQotICByZXR1
cm4gcmVzOw0KLX0NCi0NCiBpbnQNCiBmaGFuZGxlcl9iYXNlOjppb2N0bCAo
dW5zaWduZWQgaW50IGNtZCwgdm9pZCAqYnVmKQ0KIHsNCkBAIC0xNDIyLDE0
ICsxMzMyLDYgQEAgZmhhbmRsZXJfYmFzZTo6ZHVwIChmaGFuZGxlcl9iYXNl
ICpjaGlsZCwgaW50KQ0KICAgcmV0dXJuIDA7DQogfQ0KIA0KLWludA0KLWZo
YW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZDo6ZHVwIChmaGFuZGxlcl9iYXNlICpj
aGlsZCwgaW50IGZsYWdzKQ0KLXsNCi0gIGludCByZXMgPSBmaGFuZGxlcl9i
YXNlOjpkdXAgKGNoaWxkLCBmbGFncykgfHwNCi0JICAgICgoZmhhbmRsZXJf
YmFzZV9vdmVybGFwcGVkICopIGNoaWxkKS0+c2V0dXBfb3ZlcmxhcHBlZCAo
KTsNCi0gIHJldHVybiByZXM7DQotfQ0KLQ0KIGludCBmaGFuZGxlcl9iYXNl
OjpmY250bCAoaW50IGNtZCwgaW50cHRyX3QgYXJnKQ0KIHsNCiAgIGludCBy
ZXM7DQpAQCAtMTY0OSwxMyArMTU1MSw2IEBAIGZoYW5kbGVyX2Jhc2U6OmZp
eHVwX2FmdGVyX2ZvcmsgKEhBTkRMRSBwYXJlbnQpDQogICAgIGRlbF9teV9s
b2NrcyAoYWZ0ZXJfZm9yayk7DQogfQ0KIA0KLXZvaWQNCi1maGFuZGxlcl9i
YXNlX292ZXJsYXBwZWQ6OmZpeHVwX2FmdGVyX2ZvcmsgKEhBTkRMRSBwYXJl
bnQpDQotew0KLSAgc2V0dXBfb3ZlcmxhcHBlZCAoKTsNCi0gIGZoYW5kbGVy
X2Jhc2U6OmZpeHVwX2FmdGVyX2ZvcmsgKHBhcmVudCk7DQotfQ0KLQ0KIHZv
aWQNCiBmaGFuZGxlcl9iYXNlOjpmaXh1cF9hZnRlcl9leGVjICgpDQogew0K
QEAgLTE2NjQsMTIgKzE1NTksNiBAQCBmaGFuZGxlcl9iYXNlOjpmaXh1cF9h
ZnRlcl9leGVjICgpDQogICAgIGRlbF9teV9sb2NrcyAoYWZ0ZXJfZXhlYyk7
DQogICBtYW5kYXRvcnlfbG9ja2luZyAoZmFsc2UpOw0KIH0NCi12b2lkDQot
ZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkOjpmaXh1cF9hZnRlcl9leGVjICgp
DQotew0KLSAgc2V0dXBfb3ZlcmxhcHBlZCAoKTsNCi0gIGZoYW5kbGVyX2Jh
c2U6OmZpeHVwX2FmdGVyX2V4ZWMgKCk7DQotfQ0KIA0KIGJvb2wNCiBmaGFu
ZGxlcl9iYXNlOjppc19ub25ibG9ja2luZyAoKQ0KQEAgLTE2ODMsOCArMTU3
Miw2IEBAIGZoYW5kbGVyX2Jhc2U6OnNldF9ub25ibG9ja2luZyAoaW50IHll
cykNCiAgIGludCBjdXJyZW50ID0gb3BlbmZsYWdzICYgT19OT05CTE9DS19N
QVNLOw0KICAgaW50IG5ld19mbGFncyA9IHllcyA/ICghY3VycmVudCA/IE9f
Tk9OQkxPQ0sgOiBjdXJyZW50KSA6IDA7DQogICBvcGVuZmxhZ3MgPSAob3Bl
bmZsYWdzICYgfk9fTk9OQkxPQ0tfTUFTSykgfCBuZXdfZmxhZ3M7DQotICBp
ZiAobmV3X2ZsYWdzKQ0KLSAgICB3YXNfbm9uYmxvY2tpbmcgKHRydWUpOw0K
IH0NCiANCiBpbnQNCkBAIC0xOTQ4LDI3MyArMTgzNSwzIEBAIGZoYW5kbGVy
X2Jhc2U6OmZwYXRoY29uZiAoaW50IHYpDQogICAgIH0NCiAgIHJldHVybiAt
MTsNCiB9DQotDQotLyogT3ZlcmxhcHBlZCBJL08gKi8NCi0NCi1pbnQgX19y
ZWcxDQotZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkOjpzZXR1cF9vdmVybGFw
cGVkICgpDQotew0KLSAgT1ZFUkxBUFBFRCAqb3YgPSBnZXRfb3ZlcmxhcHBl
ZF9idWZmZXIgKCk7DQotICBtZW1zZXQgKG92LCAwLCBzaXplb2YgKCpvdikp
Ow0KLSAgc2V0X292ZXJsYXBwZWQgKG92KTsNCi0gIG92LT5oRXZlbnQgPSBD
cmVhdGVFdmVudCAoJnNlY19ub25lX25paCwgdHJ1ZSwgdHJ1ZSwgTlVMTCk7
DQotICBpb19wZW5kaW5nID0gZmFsc2U7DQotICByZXR1cm4gb3YtPmhFdmVu
dCA/IDAgOiAtMTsNCi19DQotDQotdm9pZCBfX3JlZzENCi1maGFuZGxlcl9i
YXNlX292ZXJsYXBwZWQ6OmRlc3Ryb3lfb3ZlcmxhcHBlZCAoKQ0KLXsNCi0g
IE9WRVJMQVBQRUQgKm92ID0gZ2V0X292ZXJsYXBwZWQgKCk7DQotICBpZiAo
b3YgJiYgb3YtPmhFdmVudCkNCi0gICAgew0KLSAgICAgIFNldEV2ZW50IChv
di0+aEV2ZW50KTsNCi0gICAgICBDbG9zZUhhbmRsZSAob3YtPmhFdmVudCk7
DQotICAgICAgb3YtPmhFdmVudCA9IE5VTEw7DQotICAgIH0NCi0gIGlvX3Bl
bmRpbmcgPSBmYWxzZTsNCi0gIGdldF9vdmVybGFwcGVkICgpID0gTlVMTDsN
Ci19DQotDQotYm9vbCBfX3JlZzENCi1maGFuZGxlcl9iYXNlX292ZXJsYXBw
ZWQ6Omhhc19vbmdvaW5nX2lvICgpDQotew0KLSAgaWYgKCFpb19wZW5kaW5n
KQ0KLSAgICByZXR1cm4gZmFsc2U7DQotDQotICBpZiAoIUlzRXZlbnRTaWdu
YWxsZWQgKGdldF9vdmVybGFwcGVkICgpLT5oRXZlbnQpKQ0KLSAgICByZXR1
cm4gdHJ1ZTsNCi0gIGlvX3BlbmRpbmcgPSBmYWxzZTsNCi0gIERXT1JEIG5i
eXRlczsNCi0gIEdldE92ZXJsYXBwZWRSZXN1bHQgKGdldF9vdXRwdXRfaGFu
ZGxlICgpLCBnZXRfb3ZlcmxhcHBlZCAoKSwgJm5ieXRlcywgZmFsc2UpOw0K
LSAgcmV0dXJuIGZhbHNlOw0KLX0NCi0NCi1maGFuZGxlcl9iYXNlX292ZXJs
YXBwZWQ6OndhaXRfcmV0dXJuIF9fcmVnMw0KLWZoYW5kbGVyX2Jhc2Vfb3Zl
cmxhcHBlZDo6d2FpdF9vdmVybGFwcGVkIChib29sIGlucmVzLCBib29sIHdy
aXRpbmcsIERXT1JEICpieXRlcywgYm9vbCBub25ibG9ja2luZywgRFdPUkQg
bGVuKQ0KLXsNCi0gIGlmICghZ2V0X292ZXJsYXBwZWQgKCkpDQotICAgIHJl
dHVybiBpbnJlcyA/IG92ZXJsYXBwZWRfc3VjY2VzcyA6IG92ZXJsYXBwZWRf
ZXJyb3I7DQotDQotICB3YWl0X3JldHVybiByZXMgPSBvdmVybGFwcGVkX3Vu
a25vd247DQotICBEV09SRCBlcnI7DQotICBpZiAoaW5yZXMpDQotICAgIC8q
IGhhbmRsZSBiZWxvdyAqLzsNCi0gIGVsc2UgaWYgKChlcnIgPSBHZXRMYXN0
RXJyb3IgKCkpICE9IEVSUk9SX0lPX1BFTkRJTkcpDQotICAgIHJlcyA9IG92
ZXJsYXBwZWRfZXJyb3I7DQotICBlbHNlIGlmICghbm9uYmxvY2tpbmcpDQot
ICAgIC8qIGhhbmRsZSBiZWxvdyAqLzsNCi0gIGVsc2UgaWYgKCF3cml0aW5n
KQ0KLSAgICBTZXRFdmVudCAoZ2V0X292ZXJsYXBwZWQgKCktPmhFdmVudCk7
CS8qIEZvcmNlIGltbWVkaWF0ZSBXRk1PIHJldHVybiAqLw0KLSAgZWxzZQ0K
LSAgICB7DQotICAgICAgKmJ5dGVzID0gbGVuOwkJCQkvKiBBc3N1bWUgdGhh
dCB0aGlzIHdvcmtlZCAqLw0KLSAgICAgIGlvX3BlbmRpbmcgPSB0cnVlOwkJ
CS8qICBidXQgZG9uJ3QgYWxsb3cgc3Vic2VxdWVudCAqLw0KLSAgICAgIHJl
cyA9IG92ZXJsYXBwZWRfc3VjY2VzczsJCQkvKiAgd3JpdGVzIHVudGlsIGNv
bXBsZXRlZCAqLw0KLSAgICB9DQotICBpZiAocmVzID09IG92ZXJsYXBwZWRf
dW5rbm93bikNCi0gICAgew0KLSAgICAgIERXT1JEIHdmcmVzID0gY3lnd2Fp
dCAoZ2V0X292ZXJsYXBwZWQgKCktPmhFdmVudCk7DQotICAgICAgSEFORExF
IGggPSB3cml0aW5nID8gZ2V0X291dHB1dF9oYW5kbGUgKCkgOiBnZXRfaGFu
ZGxlICgpOw0KLSAgICAgIEJPT0wgd29yZXM7DQotICAgICAgaWYgKGlzY2xv
c2VkICgpKQ0KLQl7DQotCSAgc3dpdGNoICh3ZnJlcykNCi0JICAgIHsNCi0J
ICAgIGNhc2UgV0FJVF9PQkpFQ1RfMDoNCi0JICAgICAgZXJyID0gRVJST1Jf
SU5WQUxJRF9IQU5ETEU7DQotCSAgICAgIGJyZWFrOw0KLQkgICAgY2FzZSBX
QUlUX1NJR05BTEVEOg0KLQkgICAgICBlcnIgPSBFUlJPUl9JTlZBTElEX0FU
X0lOVEVSUlVQVF9USU1FOw0KLQkgICAgICBicmVhazsNCi0JICAgIGRlZmF1
bHQ6DQotCSAgICAgIGVyciA9IEdldExhc3RFcnJvciAoKTsNCi0JICAgICAg
YnJlYWs7DQotCSAgICB9DQotCSAgcmVzID0gb3ZlcmxhcHBlZF9lcnJvcjsN
Ci0JfQ0KLSAgICAgIGVsc2UNCi0Jew0KLQkgIC8qIENhbmNlbGxpbmcgaGVy
ZSB0byBwcmV2ZW50IHJhY2VzLiAgSXQncyBwb3NzaWJsZSB0aGF0IHRoZSBJ
L08gaGFzDQotCSAgICAgY29tcGxldGVkIGFscmVhZHksIGluIHdoaWNoIGNh
c2UgdGhpcyBpcyBhIG5vLW9wLiAgT3RoZXJ3aXNlLA0KLQkgICAgIFdGTU8g
cmV0dXJuZWQgYmVjYXVzZSAxKSBUaGlzIGlzIGEgbm9uLWJsb2NraW5nIGNh
bGwsIDIpIGEgc2lnbmFsDQotCSAgICAgYXJyaXZlZCwgb3IgMykgdGhlIG9w
ZXJhdGlvbiB3YXMgY2FuY2VsbGVkLiAgVGhlc2UgY2FzZXMgbWF5IGJlDQot
CSAgICAgb3ZlcnJpZGRlbiBieSB0aGUgcmV0dXJuIG9mIEdldE92ZXJsYXBw
ZWRSZXN1bHQgd2hpY2ggY291bGQgZGV0ZWN0DQotCSAgICAgdGhhdCBJL08g
Y29tcGxldGlvbiBvY2N1cnJlZC4gICovDQotCSAgQ2FuY2VsSW8gKGgpOw0K
LQkgIHdvcmVzID0gR2V0T3ZlcmxhcHBlZFJlc3VsdCAoaCwgZ2V0X292ZXJs
YXBwZWQgKCksIGJ5dGVzLCBmYWxzZSk7DQotCSAgZXJyID0gR2V0TGFzdEVy
cm9yICgpOw0KLQkgIFJlc2V0RXZlbnQgKGdldF9vdmVybGFwcGVkICgpLT5o
RXZlbnQpOwkvKiBQcm9iYWJseSBub3QgbmVlZGVkIGJ1dCBDWUEgKi8NCi0J
ICBkZWJ1Z19wcmludGYgKCJ3ZnJlcyAldSwgd29yZXMgJWQsIGJ5dGVzICV1
Iiwgd2ZyZXMsIHdvcmVzLCAqYnl0ZXMpOw0KLQkgIGlmICh3b3JlcykNCi0J
ICAgIHJlcyA9IG92ZXJsYXBwZWRfc3VjY2VzczsJLyogb3BlcmF0aW9uIHN1
Y2NlZWRlZCAqLw0KLQkgIGVsc2UgaWYgKHdmcmVzID09IFdBSVRfT0JKRUNU
XzAgKyAxKQ0KLQkgICAgew0KLQkgICAgICBlcnIgPSBFUlJPUl9JTlZBTElE
X0FUX0lOVEVSUlVQVF9USU1FOyAvKiBmb3JjZXMgYW4gRUlOVFIgYmVsb3cg
Ki8NCi0JICAgICAgZGVidWdfcHJpbnRmICgic2lnbmFsIik7DQotCSAgICAg
IHJlcyA9IG92ZXJsYXBwZWRfZXJyb3I7DQotCSAgICB9DQotCSAgZWxzZSBp
ZiAod2ZyZXMgPT0gV0FJVF9PQkpFQ1RfMCArIDIpDQotCSAgICBwdGhyZWFk
OjpzdGF0aWNfY2FuY2VsX3NlbGYgKCk7CQkvKiBuZXZlciByZXR1cm5zICov
DQotCSAgZWxzZSBpZiAobm9uYmxvY2tpbmcpDQotCSAgICByZXMgPSBvdmVy
bGFwcGVkX25vbmJsb2NraW5nX25vX2RhdGE7CS8qIG1vcmUgaGFuZGxpbmcg
YmVsb3cgKi8NCi0JICBlbHNlDQotCSAgICB7DQotCSAgICAgIGRlYnVnX3By
aW50ZiAoIkdldE92ZXJsYXBwZWRSZXN1bHQgZmFpbGVkLCBoICVwLCBieXRl
cyAldSwgJUUiLCBoLCAqYnl0ZXMpOw0KLQkgICAgICByZXMgPSBvdmVybGFw
cGVkX2Vycm9yOw0KLQkgICAgfQ0KLQl9DQotICAgIH0NCi0NCi0gIGlmIChy
ZXMgPT0gb3ZlcmxhcHBlZF9zdWNjZXNzKQ0KLSAgICB7DQotICAgICAgZGVi
dWdfcHJpbnRmICgibm9ybWFsICVzLCAldSBieXRlcyBpc3BpcGUoKSAlZCIs
IHdyaXRpbmcgPyAid3JpdGUiIDogInJlYWQiLCAqYnl0ZXMsIGlzcGlwZSAo
KSk7DQotICAgICAgaWYgKCpieXRlcyA9PSAwICYmICF3cml0aW5nICYmIGlz
cGlwZSAoKSkNCi0JcmVzID0gb3ZlcmxhcHBlZF9udWxscmVhZDsNCi0gICAg
fQ0KLSAgZWxzZSBpZiAocmVzID09IG92ZXJsYXBwZWRfbm9uYmxvY2tpbmdf
bm9fZGF0YSkNCi0gICAgew0KLSAgICAgICpieXRlcyA9IChEV09SRCkgLTE7
DQotICAgICAgc2V0X2Vycm5vIChFQUdBSU4pOw0KLSAgICAgIGRlYnVnX3By
aW50ZiAoIm5vIGRhdGEgdG8gcmVhZCBmb3Igbm9uYmxvY2tpbmcgSS9PIik7
DQotICAgIH0NCi0gIGVsc2UgaWYgKGVyciA9PSBFUlJPUl9IQU5ETEVfRU9G
IHx8IGVyciA9PSBFUlJPUl9CUk9LRU5fUElQRSkNCi0gICAgew0KLSAgICAg
IGRlYnVnX3ByaW50ZiAoIkVPRiwgJUUiKTsNCi0gICAgICAqYnl0ZXMgPSAw
Ow0KLSAgICAgIHJlcyA9IG92ZXJsYXBwZWRfc3VjY2VzczsNCi0gICAgICBp
ZiAod3JpdGluZyAmJiBlcnIgPT0gRVJST1JfQlJPS0VOX1BJUEUpDQotCXJh
aXNlIChTSUdQSVBFKTsNCi0gICAgfQ0KLSAgZWxzZQ0KLSAgICB7DQotICAg
ICAgZGVidWdfcHJpbnRmICgicmVzICV1LCBXaW4zMiBFcnJvciAldSIsICh1
bnNpZ25lZCkgcmVzLCBlcnIpOw0KLSAgICAgICpieXRlcyA9IChEV09SRCkg
LTE7DQotICAgICAgX19zZXRlcnJub19mcm9tX3dpbl9lcnJvciAoZXJyKTsN
Ci0gICAgICBpZiAod3JpdGluZyAmJiBlcnIgPT0gRVJST1JfTk9fREFUQSkN
Ci0JcmFpc2UgKFNJR1BJUEUpOw0KLSAgICB9DQotDQotICByZXR1cm4gcmVz
Ow0KLX0NCi0NCi12b2lkIF9fcmVnMw0KLWZoYW5kbGVyX2Jhc2Vfb3Zlcmxh
cHBlZDo6cmF3X3JlYWQgKHZvaWQgKnB0ciwgc2l6ZV90JiBsZW4pDQotew0K
LSAgRFdPUkQgbmJ5dGVzOw0KLSAgYm9vbCBrZWVwX2xvb3Bpbmc7DQotICBk
bw0KLSAgICB7DQotICAgICAgYm9vbCByZXMgPSBSZWFkRmlsZSAoZ2V0X2hh
bmRsZSAoKSwgcHRyLCBsZW4sICZuYnl0ZXMsDQotCQkJICAgZ2V0X292ZXJs
YXBwZWQgKCkpOw0KLSAgICAgIHN3aXRjaCAod2FpdF9vdmVybGFwcGVkIChy
ZXMsIGZhbHNlLCAmbmJ5dGVzLCBpc19ub25ibG9ja2luZyAoKSkpDQotCXsN
Ci0JY2FzZSBvdmVybGFwcGVkX251bGxyZWFkOg0KLQkgIGtlZXBfbG9vcGlu
ZyA9IHRydWU7DQotCSAgYnJlYWs7DQotCWRlZmF1bHQ6CS8qIEFkZGVkIHRv
IHF1aWV0IGdjYyAqLw0KLQljYXNlIG92ZXJsYXBwZWRfc3VjY2VzczoNCi0J
Y2FzZSBvdmVybGFwcGVkX2Vycm9yOg0KLQkgIGtlZXBfbG9vcGluZyA9IGZh
bHNlOw0KLQkgIGJyZWFrOw0KLQl9DQotICAgIH0NCi0gIHdoaWxlIChrZWVw
X2xvb3BpbmcpOw0KLSAgbGVuID0gKG5ieXRlcyA9PSAoRFdPUkQpIC0xKSA/
IChzaXplX3QpIC0xIDogKHNpemVfdCkgbmJ5dGVzOw0KLX0NCi0NCi1zc2l6
ZV90IF9fcmVnMw0KLWZoYW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZDo6cmF3X3dy
aXRlIChjb25zdCB2b2lkICpwdHIsIHNpemVfdCBsZW4pDQotew0KLSAgc2l6
ZV90IG5ieXRlczsNCi0gIGlmIChoYXNfb25nb2luZ19pbyAoKSkNCi0gICAg
ew0KLSAgICAgIHNldF9lcnJubyAoRUFHQUlOKTsNCi0gICAgICBuYnl0ZXMg
PSAoc2l6ZV90KSAtMTsNCi0gICAgfQ0KLSAgZWxzZQ0KLSAgICB7DQotICAg
ICAgc2l6ZV90IGNodW5rOw0KLSAgICAgIGlmICghbWF4X2F0b21pY193cml0
ZSB8fCBsZW4gPCBtYXhfYXRvbWljX3dyaXRlKQ0KLQljaHVuayA9IE1JTiAo
bGVuLCBJTlRfTUFYKTsNCi0gICAgICBlbHNlIGlmIChpc19ub25ibG9ja2lu
ZyAoKSkNCi0JY2h1bmsgPSBsZW4gPSBtYXhfYXRvbWljX3dyaXRlOw0KLSAg
ICAgIGVsc2UNCi0JY2h1bmsgPSBtYXhfYXRvbWljX3dyaXRlOw0KLQ0KLSAg
ICAgIC8qIE1TRE4gIldyaXRlRmlsZSIgY29udGFpbnMgdGhlIGZvbGxvd2lu
ZyBub3RlOiAiQWNjZXNzaW5nIHRoZSBvdXRwdXQNCi0gICAgICAgICBidWZm
ZXIgd2hpbGUgYSB3cml0ZSBvcGVyYXRpb24gaXMgdXNpbmcgdGhlIGJ1ZmZl
ciBtYXkgbGVhZCB0bw0KLQkgY29ycnVwdGlvbiBvZiB0aGUgZGF0YSB3cml0
dGVuIGZyb20gdGhhdCBidWZmZXIuICBbLi4uXSAgVGhpcyBjYW4NCi0JIGJl
IHBhcnRpY3VsYXJseSBwcm9ibGVtYXRpYyB3aGVuIHVzaW5nIGFuIGFzeW5j
aHJvbm91cyBmaWxlIGhhbmRsZS4NCi0JIChodHRwczovL21zZG4ubWljcm9z
b2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9hYTM2NTc0
NykNCi0NCi0JIE1TRE4gIlN5bmNocm9ub3VzIGFuZCBBc3luY2hyb25vdXMg
SS9PIiBjb250YWlucyB0aGUgZm9sbG93aW5nIG5vdGU6DQotCSAiRG8gbm90
IGRlYWxsb2NhdGUgb3IgbW9kaWZ5IFsuLi5dIHRoZSBkYXRhIGJ1ZmZlciB1
bnRpbCBhbGwNCi0JIGFzeW5jaHJvbm91cyBJL08gb3BlcmF0aW9ucyB0byB0
aGUgZmlsZSBvYmplY3QgaGF2ZSBiZWVuIGNvbXBsZXRlZC4iDQotCSAoaHR0
cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS93aW5kb3dz
L2Rlc2t0b3AvYWEzNjU2ODMpDQotDQotCSBUaGlzIHByb2JsZW0gaXMgYSBu
b24taXNzdWUgZm9yIGJsb2NraW5nIEkvTywgYnV0IGl0IGNhbiBsZWFkIHRv
DQotCSBwcm9ibGVtcyB3aGVuIHVzaW5nIG5vbmJsb2NraW5nIEkvTy4gIENv
bnNpZGVyOg0KLQkgLSBUaGUgYXBwbGljYXRpb24gdXNlcyBhIHN0YXRpYyBi
dWZmZXIgaW4gcmVwZWF0ZWQgY2FsbHMgdG8NCi0JICAgbm9uLWJsb2NraW5n
IHdyaXRlLg0KLQkgLSBUaGUgcHJldmlvdXMgd3JpdGUgcmV0dXJuZWQgd2l0
aCBzdWNjZXNzLCBidXQgdGhlIG92ZXJsYXBwZWQgSS9PDQotCSAgIG9wZXJh
dGlvbiBpcyBvbmdvaW5nLg0KLQkgLSBUaGUgYXBwbGljYXRpb24gY29waWVz
IHRoZSBuZXh0IHNldCBvZiBkYXRhIHRvIHRoZSBzdGF0aWMgYnVmZmVyLA0K
LQkgICB0aHVzIG92ZXJ3cml0aW5nIGRhdGEgc3RpbGwgYWNjZXNzZWQgYnkg
dGhlIHByZXZpb3VzIHdyaXRlIGNhbGwuDQotCSAtLT4gcG90ZW50aWFsIGRh
dGEgY29ycnVwdGlvbi4NCi0NCi0JIFdoYXQgd2UgZG8gaGVyZSBpcyB0byBh
bGxvY2F0ZSBhIHBlci1maGFuZGxlciBidWZmZXIgYmlnIGVub3VnaA0KLQkg
dG8gcGVyZm9ybSB0aGUgbWF4aW11bSBhdG9taWMgb3BlcmF0aW9uIGZyb20s
IGNvcHkgdGhlIHVzZXIgc3BhY2UNCi0JIGRhdGEgb3ZlciB0byB0aGlzIGJ1
ZmZlciBhbmQgdGhlbiBjYWxsIE50V3JpdGVGaWxlIG9uIHRoaXMgYnVmZmVy
Lg0KLQkgVGhpcyBkZWNvdXBsZXMgdGhlIHdyaXRlIG9wZXJhdGlvbiBmcm9t
IHRoZSB1c2VyIGJ1ZmZlciBhbmQgdGhlDQotCSB1c2VyIGJ1ZmZlciBjYW4g
YmUgcmV1c2VkIHdpdGhvdXQgZGF0YSBjb3JydXB0aW9uIGlzc3Vlcy4NCi0N
Ci0JIFNpbmNlIG5vIGZ1cnRoZXIgd3JpdGUgY2FuIG9jY3VyIHdoaWxlIHdl
J3JlIHN0aWxsIGhhdmluZyBvbmdvaW5nDQotCSBJL08sIHRoaXMgc2hvdWxk
IGJlIHJlYXNhbmFibHkgc2FmZS4NCi0NCi0JIE5vdGU6IFdlIG9ubHkgaGF2
ZSBwcm9vZiB0aGF0IHRoaXMgcHJvYmxlbSBhY3R1YWxseSBvY2N1cnMgb24g
V2luZQ0KLQkgeWV0LiAgSG93ZXZlciwgdGhlIE1TRE4gbGFuZ3VhZ2UgaW5k
aWNhdGVzIHRoYXQgdGhpcyBtYXkgYmUgYSByZWFsDQotCSBwcm9ibGVtIG9u
IHJlYWwgV2luZG93cyBhcyB3ZWxsLiAqLw0KLSAgICAgIGlmIChpc19ub25i
bG9ja2luZyAoKSkNCi0Jew0KLQkgIGlmICghYXRvbWljX3dyaXRlX2J1ZikN
Ci0JICAgIGF0b21pY193cml0ZV9idWYgPSBjbWFsbG9jX2Fib3J0IChIRUFQ
X0JVRiwgbWF4X2F0b21pY193cml0ZSk7DQotCSAgcHRyID0gbWVtY3B5IChh
dG9taWNfd3JpdGVfYnVmLCBwdHIsIGNodW5rKTsNCi0JfQ0KLQ0KLSAgICAg
IG5ieXRlcyA9IDA7DQotICAgICAgRFdPUkQgbmJ5dGVzX25vdyA9IDA7DQot
ICAgICAgLyogV3JpdGUgdG8gZmQgaW4gc21hbGxlciBjaHVua3MsIGFjY3Vt
dWxhdGluZyBhIHRvdGFsLg0KLQkgSWYgdGhlcmUncyBhbiBlcnJvciwganVz
dCByZXR1cm4gdGhlIGFjY3VtdWxhdGVkIHRvdGFsDQotCSB1bmxlc3MgdGhl
IGZpcnN0IHdyaXRlIGZhaWxzLCBpbiB3aGljaCBjYXNlIHJldHVybiB2YWx1
ZQ0KLQkgZnJvbSB3YWl0X292ZXJsYXBwZWQoKS4gKi8NCi0gICAgICB3aGls
ZSAobmJ5dGVzIDwgbGVuKQ0KLQl7DQotCSAgc2l6ZV90IGxlZnQgPSBsZW4g
LSBuYnl0ZXM7DQotCSAgc2l6ZV90IGxlbjE7DQotCSAgaWYgKGxlZnQgPiBj
aHVuaykNCi0JICAgIGxlbjEgPSBjaHVuazsNCi0JICBlbHNlDQotCSAgICBs
ZW4xID0gbGVmdDsNCi0JICBib29sIHJlcyA9IFdyaXRlRmlsZSAoZ2V0X291
dHB1dF9oYW5kbGUgKCksIHB0ciwgbGVuMSwgJm5ieXRlc19ub3csDQotCQkJ
CWdldF9vdmVybGFwcGVkICgpKTsNCi0JICBzd2l0Y2ggKHdhaXRfb3Zlcmxh
cHBlZCAocmVzLCB0cnVlLCAmbmJ5dGVzX25vdywNCi0JCQkJICAgaXNfbm9u
YmxvY2tpbmcgKCksIGxlbjEpKQ0KLQkgICAgew0KLQkgICAgY2FzZSBvdmVy
bGFwcGVkX3N1Y2Nlc3M6DQotCSAgICAgIHB0ciA9ICgoY2hhciAqKSBwdHIp
ICsgY2h1bms7DQotCSAgICAgIG5ieXRlcyArPSBuYnl0ZXNfbm93Ow0KLQkg
ICAgICBicmVhazsNCi0JICAgIGNhc2Ugb3ZlcmxhcHBlZF9lcnJvcjoNCi0J
ICAgICAgbGVuID0gMDsJCS8qIHRlcm1pbmF0ZSBsb29wICovDQotCSAgICBj
YXNlIG92ZXJsYXBwZWRfdW5rbm93bjoNCi0JICAgIGNhc2Ugb3ZlcmxhcHBl
ZF9udWxscmVhZDoNCi0JICAgIGNhc2Ugb3ZlcmxhcHBlZF9ub25ibG9ja2lu
Z19ub19kYXRhOg0KLQkgICAgICBicmVhazsNCi0JICAgIH0NCi0JfQ0KLSAg
ICAgIGlmICghbmJ5dGVzKQ0KLQluYnl0ZXMgPSAobmJ5dGVzX25vdyA9PSAo
RFdPUkQpIC0xKSA/IChzaXplX3QpIC0xIDogbmJ5dGVzX25vdzsNCi0gICAg
fQ0KLSAgcmV0dXJuIG5ieXRlczsNCi19DQpkaWZmIC0tZ2l0IGEvd2luc3Vw
L2N5Z3dpbi9maGFuZGxlci5oIGIvd2luc3VwL2N5Z3dpbi9maGFuZGxlci5o
DQppbmRleCA3YWEwMWQxMDEuLjU1YjQ5YmNlZCAxMDA2NDQNCi0tLSBhL3dp
bnN1cC9jeWd3aW4vZmhhbmRsZXIuaA0KKysrIGIvd2luc3VwL2N5Z3dpbi9m
aGFuZGxlci5oDQpAQCAtMTYyLDE2ICsxNjIsMTIgQEAgY2xhc3MgZmhhbmRs
ZXJfYmFzZQ0KICAgICB1bnNpZ25lZCBuZWVkX2ZvcmtfZml4dXAgICAgOiAx
OyAvKiBTZXQgaWYgbmVlZCB0byBmaXh1cCBhZnRlciBmb3JrLiAqLw0KICAg
ICB1bnNpZ25lZCBpc2Nsb3NlZAkJOiAxOyAvKiBTZXQgd2hlbiBmaGFuZGxl
ciBpcyBjbG9zZWQuICovDQogICAgIHVuc2lnbmVkIG1hbmRhdG9yeV9sb2Nr
aW5nCTogMTsgLyogV2luZG93cyBtYW5kYXRvcnkgbG9ja2luZyAqLw0KLSAg
ICB1bnNpZ25lZCB3YXNfbm9uYmxvY2tpbmcJOiAxOyAvKiBTZXQgd2hlbiBz
ZXR0aW5nIE9fTk9OQkxPQ0suICBOZXZlcg0KLQkJCQkJcmVzZXQuICBUaGlz
IGlzIGZvciB0aGUgc2FrZSBvZg0KLQkJCQkJZmhhbmRsZXJfYmFzZV9vdmVy
bGFwcGVkOjpjbG9zZS4gKi8NCiANCiAgICBwdWJsaWM6DQogICAgIHN0YXR1
c19mbGFncyAoKSA6DQogICAgICAgcmJpbmFyeSAoMCksIHJiaW5zZXQgKDAp
LCB3YmluYXJ5ICgwKSwgd2JpbnNldCAoMCksIG5vaGFuZGxlICgwKSwNCiAg
ICAgICBkaWRfbHNlZWsgKDApLCBxdWVyeV9vcGVuIChub19xdWVyeSksIGNs
b3NlX29uX2V4ZWMgKDApLA0KLSAgICAgIG5lZWRfZm9ya19maXh1cCAoMCks
IGlzY2xvc2VkICgwKSwgbWFuZGF0b3J5X2xvY2tpbmcgKDApLA0KLSAgICAg
IHdhc19ub25ibG9ja2luZyAoMCkNCisgICAgICBuZWVkX2ZvcmtfZml4dXAg
KDApLCBpc2Nsb3NlZCAoMCksIG1hbmRhdG9yeV9sb2NraW5nICgwKQ0KICAg
ICAgIHt9DQogICB9IHN0YXR1cywgb3Blbl9zdGF0dXM7DQogDQpAQCAtMjY4
LDcgKzI2NCw2IEBAIGNsYXNzIGZoYW5kbGVyX2Jhc2UNCiAgIElNUExFTUVO
VF9TVEFUVVNfRkxBRyAoYm9vbCwgbmVlZF9mb3JrX2ZpeHVwKQ0KICAgSU1Q
TEVNRU5UX1NUQVRVU19GTEFHIChib29sLCBpc2Nsb3NlZCkNCiAgIElNUExF
TUVOVF9TVEFUVVNfRkxBRyAoYm9vbCwgbWFuZGF0b3J5X2xvY2tpbmcpDQot
ICBJTVBMRU1FTlRfU1RBVFVTX0ZMQUcgKGJvb2wsIHdhc19ub25ibG9ja2lu
ZykNCiANCiAgIGludCBnZXRfZGVmYXVsdF9mbW9kZSAoaW50IGZsYWdzKTsN
CiANCkBAIC0xMTE5LDc0ICsxMTE0LDYgQEAgY2xhc3MgZmhhbmRsZXJfc29j
a2V0X3VuaXggOiBwdWJsaWMgZmhhbmRsZXJfc29ja2V0DQogDQogI2VuZGlm
IC8qIF9fV0lUSF9BRl9VTklYICovDQogDQotY2xhc3MgZmhhbmRsZXJfYmFz
ZV9vdmVybGFwcGVkOiBwdWJsaWMgZmhhbmRsZXJfYmFzZQ0KLXsNCi0gIHN0
YXRpYyBIQU5ETEUgYXNpb19kb25lOw0KLSAgc3RhdGljIExPTkcgYXNpb19j
bG9zZV9jb3VudGVyOw0KLXByb3RlY3RlZDoNCi0gIGVudW0gd2FpdF9yZXR1
cm4NCi0gIHsNCi0gICAgb3ZlcmxhcHBlZF91bmtub3duID0gMCwNCi0gICAg
b3ZlcmxhcHBlZF9zdWNjZXNzLA0KLSAgICBvdmVybGFwcGVkX25vbmJsb2Nr
aW5nX25vX2RhdGEsDQotICAgIG92ZXJsYXBwZWRfbnVsbHJlYWQsDQotICAg
IG92ZXJsYXBwZWRfZXJyb3INCi0gIH07DQotICBib29sIGlvX3BlbmRpbmc7
DQotICBPVkVSTEFQUEVEIGlvX3N0YXR1czsNCi0gIE9WRVJMQVBQRUQgKm92
ZXJsYXBwZWQ7DQotICBzaXplX3QgbWF4X2F0b21pY193cml0ZTsNCi0gIHZv
aWQgKmF0b21pY193cml0ZV9idWY7DQotcHVibGljOg0KLSAgd2FpdF9yZXR1
cm4gX19yZWczIHdhaXRfb3ZlcmxhcHBlZCAoYm9vbCwgYm9vbCwgRFdPUkQg
KiwgYm9vbCwgRFdPUkQgPSAwKTsNCi0gIGludCBfX3JlZzEgc2V0dXBfb3Zl
cmxhcHBlZCAoKTsNCi0gIHZvaWQgX19yZWcxIGRlc3Ryb3lfb3ZlcmxhcHBl
ZCAoKTsNCi0gIHZpcnR1YWwgdm9pZCBfX3JlZzMgcmF3X3JlYWQgKHZvaWQg
KnB0ciwgc2l6ZV90JiBsZW4pOw0KLSAgdmlydHVhbCBzc2l6ZV90IF9fcmVn
MyByYXdfd3JpdGUgKGNvbnN0IHZvaWQgKnB0ciwgc2l6ZV90IGxlbik7DQot
ICBPVkVSTEFQUEVEIComZ2V0X292ZXJsYXBwZWQgKCkge3JldHVybiBvdmVy
bGFwcGVkO30NCi0gIE9WRVJMQVBQRUQgKmdldF9vdmVybGFwcGVkX2J1ZmZl
ciAoKSB7cmV0dXJuICZpb19zdGF0dXM7fQ0KLSAgdm9pZCBzZXRfb3Zlcmxh
cHBlZCAoT1ZFUkxBUFBFRCAqb3YpIHtvdmVybGFwcGVkID0gb3Y7fQ0KLSAg
ZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkICgpOiBpb19wZW5kaW5nIChmYWxz
ZSksIG92ZXJsYXBwZWQgKE5VTEwpLCBtYXhfYXRvbWljX3dyaXRlICgwKSwg
YXRvbWljX3dyaXRlX2J1ZiAoTlVMTCkNCi0gIHsNCi0gICAgbWVtc2V0ICgm
aW9fc3RhdHVzLCAwLCBzaXplb2YgaW9fc3RhdHVzKTsNCi0gIH0NCi0gIGJv
b2wgX19yZWcxIGhhc19vbmdvaW5nX2lvICgpOw0KLQ0KLSAgdm9pZCBmaXh1
cF9hZnRlcl9mb3JrIChIQU5ETEUpOw0KLSAgdm9pZCBmaXh1cF9hZnRlcl9l
eGVjICgpOw0KLQ0KLSAgaW50IGNsb3NlICgpOw0KLSAgaW50IGR1cCAoZmhh
bmRsZXJfYmFzZSAqY2hpbGQsIGludCk7DQotDQotICB2b2lkIGNoZWNrX2xh
dGVyICgpOw0KLSAgc3RhdGljIHZvaWQgX19yZWcxIGZsdXNoX2FsbF9hc3lu
Y19pbyAoKTs7DQotDQotICBmaGFuZGxlcl9iYXNlX292ZXJsYXBwZWQgKHZv
aWQgKikge30NCi0gIH5maGFuZGxlcl9iYXNlX292ZXJsYXBwZWQgKCkNCi0g
IHsNCi0gICAgaWYgKGF0b21pY193cml0ZV9idWYpDQotICAgICAgY2ZyZWUg
KGF0b21pY193cml0ZV9idWYpOw0KLSAgfQ0KLQ0KLSAgdmlydHVhbCB2b2lk
IGNvcHl0byAoZmhhbmRsZXJfYmFzZSAqeCkNCi0gIHsNCi0gICAgeC0+cGMu
ZnJlZV9zdHJpbmdzICgpOw0KLSAgICAqcmVpbnRlcnByZXRfY2FzdDxmaGFu
ZGxlcl9iYXNlX292ZXJsYXBwZWQgKj4gKHgpID0gKnRoaXM7DQotICAgIHJl
aW50ZXJwcmV0X2Nhc3Q8ZmhhbmRsZXJfYmFzZV9vdmVybGFwcGVkICo+ICh4
KS0+YXRvbWljX3dyaXRlX2J1ZiA9IE5VTEw7DQotICAgIHgtPnJlc2V0ICh0
aGlzKTsNCi0gIH0NCi0NCi0gIHZpcnR1YWwgZmhhbmRsZXJfYmFzZV9vdmVy
bGFwcGVkICpjbG9uZSAoY3lnaGVhcF90eXBlcyBtYWxsb2NfdHlwZSA9IEhF
QVBfRkhBTkRMRVIpDQotICB7DQotICAgIHZvaWQgKnB0ciA9ICh2b2lkICop
IGNjYWxsb2MgKG1hbGxvY190eXBlLCAxLCBzaXplb2YgKGZoYW5kbGVyX2Jh
c2Vfb3ZlcmxhcHBlZCkpOw0KLSAgICBmaGFuZGxlcl9iYXNlX292ZXJsYXBw
ZWQgKmZoID0gbmV3IChwdHIpIGZoYW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZCAo
cHRyKTsNCi0gICAgY29weXRvIChmaCk7DQotICAgIHJldHVybiBmaDsNCi0g
IH0NCi0NCi0gIGZyaWVuZCBEV09SRCBXSU5BUEkgZmx1c2hfYXN5bmNfaW8g
KHZvaWQgKik7DQotfTsNCi0NCiBjbGFzcyBmaGFuZGxlcl9waXBlOiBwdWJs
aWMgZmhhbmRsZXJfYmFzZQ0KIHsNCiBwcml2YXRlOg0KZGlmZiAtLWdpdCBh
L3dpbnN1cC9jeWd3aW4vc3lzY2FsbHMuY2MgYi93aW5zdXAvY3lnd2luL3N5
c2NhbGxzLmNjDQppbmRleCBhOTE0YWU4YTkuLjYzNGI4YmEwZSAxMDA2NDQN
Ci0tLSBhL3dpbnN1cC9jeWd3aW4vc3lzY2FsbHMuY2MNCisrKyBiL3dpbnN1
cC9jeWd3aW4vc3lzY2FsbHMuY2MNCkBAIC0xMDksNyArMTA5LDYgQEAgY2xv
c2VfYWxsX2ZpbGVzIChib29sIG5vcmVsZWFzZSkNCiAgIGlmICghaGF2ZV9l
eGVjZWQgJiYgY3lnaGVhcC0+Y3R0eSkNCiAgICAgY3lnaGVhcC0+Y2xvc2Vf
Y3R0eSAoKTsNCiANCi0gIGZoYW5kbGVyX2Jhc2Vfb3ZlcmxhcHBlZDo6Zmx1
c2hfYWxsX2FzeW5jX2lvICgpOw0KICAgaWYgKGgpDQogICAgIFNldFN0ZEhh
bmRsZSAoU1REX0VSUk9SX0hBTkRMRSwgaCk7DQogICBjeWdoZWFwLT5mZHRh
Yi51bmxvY2sgKCk7DQotLSANCjIuMTcuMA0KDQo=
