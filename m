From: "Robert Collins" <robert.collins@itdomain.com.au>
To: "Corinna Vinschen" <cygwin-patches@cygwin.com>
Subject: Re: updated: Categories and basic dependency handling for setup
Date: Wed, 13 Jun 2001 17:01:00 -0000
Message-id: <021301c0f465$45dc3eb0$0200a8c0@lifelesswks>
References: <EA18B9FA0FE4194AA2B4CDB91F73C0EF7A00@itdomain002.itdomain.net.au> <20010613162448.M1144@cygbert.vinschen.de> <020601c0f464$78636260$0200a8c0@lifelesswks>
X-SW-Source: 2001-q2/msg00292.html
Content-type: multipart/mixed; boundary="----------=_1583532848-65438-68"

This is a multi-part message in MIME format...

------------=_1583532848-65438-68
Content-length: 906

Sorry - found I'd missed the list updating from the older patches :[

try this instead. (Note: the automatically included packages are added
to the end of the list, not in alphabetical order. Thats a TODO: for
me).

Rob

----- Original Message -----
From: "Robert Collins" <robert.collins@itdomain.com.au>
To: "Corinna Vinschen" <cygwin-patches@cygwin.com>
Sent: Thursday, June 14, 2001 9:56 AM
Subject: Re: updated: Categories and basic dependency handling for setup


>
> ----- Original Message -----
> From: "Corinna Vinschen" <cygwin-patches@cygwin.com>
> >
> > Did I miss something?
> >
> > Corinna
> >
>
> Could you try the attached updated patch - this is against current
CVS.
> I tried the same experiment you did - stand setup.ini, no
installed.db,
> added category: shell to ash. Clicking full/part shows me
> current   new   src category  package
>           @skip     shell     ash
>
>
> Rob
>

------------=_1583532848-65438-68
Content-Type: text/x-diff; charset=us-ascii; name="depends4.patch"
Content-Disposition: inline; filename="depends4.patch"
Content-Transfer-Encoding: base64
Content-Length: 14693

PyAudGFyLmNjLnN3cAo/IGRlcGVuZHMyLnBhdGNoCj8gZGVwZW5kczMucGF0
Y2gKSW5kZXg6IGNob29zZS5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJD
UyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2NpbnN0YWxsL2Nob29zZS5j
Yyx2CnJldHJpZXZpbmcgcmV2aXNpb24gMi4yNApkaWZmIC11IC1wIC1yMi4y
NCBjaG9vc2UuY2MKLS0tIGNob29zZS5jYwkyMDAxLzA2LzEzIDE2OjExOjAx
CTIuMjQKKysrIGNob29zZS5jYwkyMDAxLzA2LzE0IDAwOjAxOjAyCkBAIC04
MSwxNCArODEsMjAgQEAgaGVhZGVyc1tdID0gewogI2RlZmluZSBORVdfQ09M
IDEKICAgeyAiU3JjPyIsIDQsIDAsIDAgfSwKICNkZWZpbmUgU1JDX0NPTCAy
CisgIHsgIkNhdGVnb3J5IiwgOCwgMCwgMCB9LAorI2RlZmluZSBDQVRFR09S
WV9DT0wgMwogICB7ICJQYWNrYWdlIiwgNywgMCwgMCB9LAotI2RlZmluZSBQ
QUNLQUdFX0NPTCAzCisjZGVmaW5lIFBBQ0tBR0VfQ09MIDQKICAgeyAwLCAw
LCAwLCAwIH0KIH07CiAjZGVmaW5lIE5VTV9DT0xVTU5TIChzaXplb2YgKGhl
YWRlcnMpIC8gKHNpemVvZiAoaGVhZGVyc1swXSkpIC0gMSkKIAogaW50ICpw
YWNrYWdlX2luZGV4ZXMsIG5pbmRleGVzOwogCitzdGF0aWMgaW50IGFkZF9y
ZXF1aXJlZChQYWNrYWdlICpwa2cpOworc3RhdGljIHZvaWQgc2V0X2Z1bGxf
bGlzdCAoSFdORCBoLCBpbnQgaXNmdWxsKTsKKworCiBzdGF0aWMgYm9vbAog
aXNpbnN0YWxsZWQgKFBhY2thZ2UgKnBrZywgaW50IHRydXN0KQogewpAQCAt
OTksNiArMTA1LDE3IEBAIGlzaW5zdGFsbGVkIChQYWNrYWdlICpwa2csIGlu
dCB0cnVzdCkKIAkgICBzdHJjbXAgKHBrZy0+aW5zdGFsbGVkLT52ZXJzaW9u
LCBwa2ctPmluZm9bdHJ1c3RdLnZlcnNpb24pID09IDA7CiB9CiAKK3N0YXRp
YyBQYWNrYWdlICoKK2ZpbmRfcGFja2FnZSAoY29uc3QgY2hhciAqbmFtZSkK
K3sKKyAgZm9yIChQYWNrYWdlICpwa2cgPSBwYWNrYWdlOyBwa2ctPm5hbWU7
IHBrZysrKQorICAgIHsKKyAgICAgIGlmICghc3RyY2FzZWNtcChuYW1lLCBw
a2ctPm5hbWUpKQorICAgICAgICByZXR1cm4gcGtnOworICAgIH0KKyAgcmV0
dXJuIE5VTEw7Cit9CisKIHN0YXRpYyB2b2lkCiBzZXRfYWN0aW9uIChQYWNr
YWdlICpwa2csIGJvb2wgcHJlaW5jKQogewpAQCAtMTUyLDYgKzE2OSw3NCBA
QCBzZXRfYWN0aW9uIChQYWNrYWdlICpwa2csIGJvb2wgcHJlaW5jKQogICAg
ICAgfQogfQogCitzdGF0aWMgaW50CithZGRfcmVxdWlyZWQgKFBhY2thZ2Ug
KnBrZykKK3sKKyAgRGVwZW5kZW5jeSAqZHA7CisgIFBhY2thZ2UgKnJlcXVp
cmVkOworICBpbnQgYzsKKyAgaW50IGNoYW5nZWQgPSAwOworICBkcCA9IHBr
Zy0+cmVxdWlyZWQ7CisgIHN3aXRjaCAocGtnLT5hY3Rpb24pCisgICAgewor
ICAgIGNhc2UgQUNUSU9OX1VOSU5TVEFMTDoKKyAgICBjYXNlIEFDVElPTl9F
UlJPUjoKKyAgICBjYXNlIEFDVElPTl9VTktOT1dOOgorICAgIGNhc2UgQUNU
SU9OX1NSQ19PTkxZOgorICAgIGNhc2UgQUNUSU9OX1NLSVA6CisgICAgICBy
ZXR1cm4gMDsKKyAgICBkZWZhdWx0OgorICAgICAgYnJlYWs7CisgICAgfQor
ICB3aGlsZSAoZHApCisgICAgeworICAgICAgaWYgKChyZXF1aXJlZCA9IGZp
bmRfcGFja2FnZShkcC0+cGFja2FnZSkpID09IE5VTEwpCisgICAgICAgIHsK
KyAgICAgICAgICBkcD1kcC0+bmV4dDsKKyAgICAgICAgICBjb250aW51ZTsK
KyAgICAgICAgfQorICAgICAgc3dpdGNoIChyZXF1aXJlZC0+YWN0aW9uKQor
ICAgICAgICB7CisJY2FzZSBBQ1RJT05fUFJFVjoKKwljYXNlIEFDVElPTl9D
VVJSOgorCWNhc2UgQUNUSU9OX1RFU1Q6CisJY2FzZSBBQ1RJT05fTEFTVDoK
KwljYXNlIEFDVElPTl9TQU1FX0NVUlI6CisJY2FzZSBBQ1RJT05fU0FNRV9U
RVNUOgorCWNhc2UgQUNUSU9OX1NBTUVfUFJFVjoKKwljYXNlIEFDVElPTl9S
RURPOgorCWNhc2UgQUNUSU9OX1NBTUVfTEFTVDoKKwkgIC8qIHdlIGFyZSBp
bnN0YWxsaW5nIGEgdXNlciBzZWxlY3RlZCB2ZXJzaW9uICovCisJICBicmVh
azsKKwkKKwljYXNlIEFDVElPTl9VTklOU1RBTEw6CisJICAvKiBpdCdzIGFs
cmVhZHkgaW5zdGFsbGVkIC0gbGVhdmUgaXQgKi8KKwkgIHJlcXVpcmVkLT5h
Y3Rpb24gPSBBQ1RJT05fU0tJUDsKKwkgIGJyZWFrOworCWNhc2UgQUNUSU9O
X0VSUk9SOgorCWNhc2UgQUNUSU9OX1VOS05PV046CisJY2FzZSBBQ1RJT05f
U1JDX09OTFk6CisJY2FzZSBBQ1RJT05fU0tJUDoKKwkgIC8qIHRoZSBjdXJy
ZW50IGluc3RhbGwgd2lsbCBmYWlsICovCisJICByZXF1aXJlZC0+YWN0aW9u
ID0gQUNUSU9OX1BSRVY7IC8qIHRoaXMgZmluZCBwcmV2LCB0aGVuIGN1cnIs
IHRoZW4gdGVzdC4gKi8KKwkgIHNldF9hY3Rpb24ocmVxdWlyZWQsIDApOwkg
IC8qIHdlIG5lZWQgYSBmaW5kX2Jlc3QgdGhhdCBnZXRzIGluc3RhbGxlZCwg
Ki8KKwkgIGNoYW5nZWQrKzsJCQkgIC8qIHRoZW4gY3VycmVudCwgdGhlbiBw
cmV2LCB0aGVuIHRlc3QgKi8KKwkgIC8qIHdlIHNob3VsZCBpbnNlcnQgdGhl
IHBhY2thZ2UgaW4gYWxwaGFiZXRpY2FsIG9yZGVyICovCisJICBwYWNrYWdl
X2luZGV4ZXNbbmluZGV4ZXMrK10gPSByZXF1aXJlZCAtIHBhY2thZ2U7CisJ
ICBicmVhazsKKwlkZWZhdWx0OgorCSAgbG9nICgwLCAic2hvdWxkIG5ldmVy
IGdldCBoZXJlICVkXG4iLCByZXF1aXJlZC0+YWN0aW9uKTsKKwl9CisvKiAg
ICAgIGZvciAoYyA9IDA7IGMgPCBleHRyYVtpXS5ucGljazsgYysrKQorICAg
ICAgIGlmIChwYWNrYWdlW2ldLnRydXN0ID09IGV4dHJhW2ldLmNob29zZXJb
Y10udHJ1c3QpCisgICAgICAgICBleHRyYVtpXS5waWNrID0gYzsgKi8KKyAg
ICAgIGNoYW5nZWQgKz0gYWRkX3JlcXVpcmVkIChyZXF1aXJlZCk7CisgICAg
ICBkcD1kcC0+bmV4dDsKKyAgICB9CisgIHJldHVybiBjaGFuZ2VkOworfQor
CisKIGNvbnN0IGNoYXIgKgogY2hvb3NlX2NhcHRpb24gKFBhY2thZ2UgKnBr
ZykKIHsKQEAgLTI0NCw2ICszMjksOSBAQCBwYWludCAoSFdORCBod25kKQog
ICAgICAgQml0Qmx0IChoZGMsIHggKyBoZWFkZXJzW1NSQ19DT0xdLngsIGJ5
LCAxMSwgMTEsCiAJICAgICAgYml0bWFwX2RjLCAwLCAwLCBTUkNDT1BZKTsK
IAorICAgICAgaWYgKHBhY2thZ2VbaV0uY2F0ZWdvcnkpCisgICAgICAgVGV4
dE91dCAoaGRjLCB4ICsgaGVhZGVyc1tDQVRFR09SWV9DT0xdLngsIHIsIHBh
Y2thZ2VbaV0uY2F0ZWdvcnksIHN0cmxlbiAocGFja2FnZVtpXS5jYXRlZ29y
eSkpOworCiAgICAgICBpZiAocGFja2FnZVtpXS5zZGVzYykKIAlzID0gcGFj
a2FnZVtpXS5zZGVzYzsKICAgICAgIGVsc2UKQEAgLTMzNiw3ICs0MjQsNyBA
QCBsaXN0X2hzY3JvbGwgKEhXTkQgaHduZCwgSFdORCBoY3RsLCBVSU5UCiBz
dGF0aWMgTFJFU1VMVCBDQUxMQkFDSwogbGlzdF9jbGljayAoSFdORCBod25k
LCBCT09MIGRibGNsaywgaW50IHgsIGludCB5LCBVSU5UIGhpdENvZGUpCiB7
Ci0gIGludCByOworICBpbnQgcixyZWZyZXNoOwogCiAgIGlmIChuaW5kZXhl
cyA9PSAwKQogICAgIHJldHVybiAwOwpAQCAtMzU2LDE1ICs0NDQsMzcgQEAg
bGlzdF9jbGljayAoSFdORCBod25kLCBCT09MIGRibGNsaywgaW50IAogICBp
ZiAoeCA+PSBoZWFkZXJzW05FV19DT0xdLnggLSAoSE1BUkdJTiAvIDIpICYm
IHggPD0gaGVhZGVyc1tORVdfQ09MICsgMV0ueCAtIEhNQVJHSU4vMikKICAg
ICBzZXRfYWN0aW9uIChwa2csIDEpOwogCisgIC8qIEFkZCBhbnkgcGFja2Fn
ZXMgdGhhdCBhcmUgbmVlZGVkIGJ5IHRoaXMgcGFja2FnZSAqLworICByZWZy
ZXNoID0gYWRkX3JlcXVpcmVkKHBrZyk7CisKICAgaWYgKHggPj0gaGVhZGVy
c1tTUkNfQ09MXS54IC0gSE1BUkdJTi8yICYmIHggPD0gaGVhZGVyc1tTUkNf
Q09MICsgMV0ueCAtIEhNQVJHSU4vMikKICAgICBwa2ctPnNyY3BpY2tlZCBe
PSAxOwogCi0gIFJFQ1QgcmVjdDsKLSAgcmVjdC5sZWZ0ID0gaGVhZGVyc1tO
RVdfQ09MXS54IC0gc2Nyb2xsX3VsY194OwotICByZWN0LnJpZ2h0ID0gaGVh
ZGVyc1tTUkNfQ09MICsgMV0ueCAtIHNjcm9sbF91bGNfeDsKLSAgcmVjdC50
b3AgPSBoZWFkZXJfaGVpZ2h0ICsgciAqIHJvd19oZWlnaHQgLSBzY3JvbGxf
dWxjX3k7Ci0gIHJlY3QuYm90dG9tID0gcmVjdC50b3AgKyByb3dfaGVpZ2h0
OwotICBJbnZhbGlkYXRlUmVjdCAoaHduZCwgJnJlY3QsIFRSVUUpOworICBp
ZiAocmVmcmVzaCkKKyAgICB7CisgICAgICBSRUNUIHI7CisgICAgICBHZXRD
bGllbnRSZWN0IChsdiwgJnIpOworICAgICAgU0NST0xMSU5GTyBzaTsKKyAg
ICAgIG1lbXNldCAoJnNpLCAwLCBzaXplb2YgKHNpKSk7CisgICAgICBzaS5j
YlNpemUgPSBzaXplb2YgKHNpKTsKKyAgICAgIHNpLmZNYXNrID0gU0lGX0FM
TDsKKyAgICAgIHNpLm5NaW4gPSAwOworCisgICAgICBzaS5uTWF4ID0gbmlu
ZGV4ZXMgKiByb3dfaGVpZ2h0OworICAgICAgc2kublBhZ2UgPSByLmJvdHRv
bSAtIGhlYWRlcl9oZWlnaHQ7CisgICAgICBTZXRTY3JvbGxJbmZvIChsdiwg
U0JfVkVSVCwgJnNpLCBUUlVFKTsKKworICAgICAgc2Nyb2xsX3VsY194ID0g
c2Nyb2xsX3VsY195ID0gMDsKKyAgICB9CisgIGVsc2UKKyAgICB7CisgICAg
ICBSRUNUIHJlY3Q7CisgICAgICByZWN0LmxlZnQgPSBoZWFkZXJzW05FV19D
T0xdLnggLSBzY3JvbGxfdWxjX3g7CisgICAgICByZWN0LnJpZ2h0ID0gaGVh
ZGVyc1tTUkNfQ09MICsgMV0ueCAtIHNjcm9sbF91bGNfeDsKKyAgICAgIHJl
Y3QudG9wID0gaGVhZGVyX2hlaWdodCArIHIgKiByb3dfaGVpZ2h0IC0gc2Ny
b2xsX3VsY195OworICAgICAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIHJv
d19oZWlnaHQ7CisgICAgICBJbnZhbGlkYXRlUmVjdCAoaHduZCwgJnJlY3Qs
IFRSVUUpOworICAgIH0KIH0KIAogc3RhdGljIExSRVNVTFQgQ0FMTEJBQ0sK
QEAgLTQ2Niw2ICs1NzYsOCBAQCBkZWZhdWx0X3RydXN0IChIV05EIGgsIHRy
dXN0cyB0cnVzdCkKICAgZm9yIChQYWNrYWdlICpwa2cgPSBwYWNrYWdlOyBw
a2ctPm5hbWU7IHBrZysrKQogICAgIHsKICAgICAgIHBrZy0+YWN0aW9uID0g
KGFjdGlvbnMpIHRydXN0OworICAgICAgaWYgKHBrZy0+Y2F0ZWdvcnkgJiYg
c3RyY2FzZWNtcChwa2ctPmNhdGVnb3J5LCAiUmVxdWlyZWQiKSkKKwlwa2ct
PmFjdGlvbiA9IEFDVElPTl9TS0lQOwogICAgICAgc2V0X2FjdGlvbiAocGtn
LCAwKTsKICAgICB9CiAgIFJFQ1QgcjsKQEAgLTU1OSw2ICs2NzEsNyBAQCBj
cmVhdGVfbGlzdHZpZXcgKEhXTkQgZGxnLCBSRUNUICpyKQogCX0KICAgICAg
IGZvciAodCA9IDE7IHQgPCBOVFJVU1Q7IHQrKykKIAlub3RlX3dpZHRoIChk
YywgcGtnLT5pbmZvW3RdLnZlcnNpb24sIE5FV19DT0xfU0laRV9TTE9QLCBO
RVdfQ09MKTsKKyAgICAgIG5vdGVfd2lkdGggKGRjLCBwa2ctPmNhdGVnb3J5
LCAwLCBDQVRFR09SWV9DT0wpOwogICAgICAgbm90ZV93aWR0aCAoZGMsIHBr
Zy0+bmFtZSwgMCwgUEFDS0FHRV9DT0wpOwogICAgICAgbm90ZV93aWR0aCAo
ZGMsIHBrZy0+c2Rlc2MsIDAsIFBBQ0tBR0VfQ09MKTsKICAgICB9CkBAIC01
NjgsMTAgKzY4MSwxMyBAQCBjcmVhdGVfbGlzdHZpZXcgKEhXTkQgZGxnLCBS
RUNUICpyKQogICBoZWFkZXJzW0NVUlJFTlRfQ09MXS54ID0gSE1BUkdJTi8y
OwogICBoZWFkZXJzW05FV19DT0xdLnggPSBoZWFkZXJzW0NVUlJFTlRfQ09M
XS54ICsgaGVhZGVyc1tDVVJSRU5UX0NPTF0ud2lkdGggKyBORVdfQ09MX1NJ
WkVfU0xPUCArIEhNQVJHSU47CiAgIGhlYWRlcnNbU1JDX0NPTF0ueCA9IGhl
YWRlcnNbTkVXX0NPTF0ueCArIGhlYWRlcnNbTkVXX0NPTF0ud2lkdGggKyBI
TUFSR0lOOwotICBoZWFkZXJzW1BBQ0tBR0VfQ09MXS54ID0gaGVhZGVyc1tT
UkNfQ09MXS54ICsgaGVhZGVyc1tTUkNfQ09MXS53aWR0aCArIEhNQVJHSU47
CisgIGhlYWRlcnNbQ0FURUdPUllfQ09MXS54ID0gaGVhZGVyc1tTUkNfQ09M
XS54ICsgaGVhZGVyc1tTUkNfQ09MXS53aWR0aCArIEhNQVJHSU47CisgIGhl
YWRlcnNbUEFDS0FHRV9DT0xdLnggPSBoZWFkZXJzW0NBVEVHT1JZX0NPTF0u
eCArIGhlYWRlcnNbQ0FURUdPUllfQ09MXS53aWR0aCArIEhNQVJHSU47CiAK
ICAgZGVmYXVsdF90cnVzdCAobHYsIFRSVVNUX0NVUlIpOwogICBzZXRfZnVs
bF9saXN0IChsdiwgZnVsbF9saXN0KTsKKyAgZm9yIChQYWNrYWdlICpmb28g
PSBwYWNrYWdlOyBmb28tPm5hbWU7IGZvbysrKQorICAgIGFkZF9yZXF1aXJl
ZChmb28pOwogICBzdGF0aWMgaW50IHRhW10gPSB7IElEQ19DSE9PU0VfQ1VS
UiwgMCB9OwogICByYnNldCAoZGxnLCB0YSwgSURDX0NIT09TRV9DVVJSKTsK
IApAQCAtNTg1LDE0ICs3MDEsMjAgQEAgZGlhbG9nX2NtZCAoSFdORCBoLCBp
bnQgaWQsIEhXTkQgaHduZGN0bAogICAgIHsKICAgICBjYXNlIElEQ19DSE9P
U0VfUFJFVjoKICAgICAgIGRlZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9QUkVW
KTsKKyAgICAgIGZvciAoUGFja2FnZSAqZm9vID0gcGFja2FnZTsgZm9vLT5u
YW1lOyBmb28rKykKKyAgICAgICAgYWRkX3JlcXVpcmVkKGZvbyk7CiAgICAg
ICBzZXRfZnVsbF9saXN0IChsdiwgZnVsbF9saXN0KTsKICAgICAgIGJyZWFr
OwogICAgIGNhc2UgSURDX0NIT09TRV9DVVJSOgogICAgICAgZGVmYXVsdF90
cnVzdCAobHYsIFRSVVNUX0NVUlIpOworICAgICAgZm9yIChQYWNrYWdlICpm
b28gPSBwYWNrYWdlOyBmb28tPm5hbWU7IGZvbysrKQorICAgICAgICBhZGRf
cmVxdWlyZWQoZm9vKTsKICAgICAgIHNldF9mdWxsX2xpc3QgKGx2LCBmdWxs
X2xpc3QpOwogICAgICAgYnJlYWs7CiAgICAgY2FzZSBJRENfQ0hPT1NFX0VY
UDoKICAgICAgIGRlZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9URVNUKTsKKyAg
ICAgIGZvciAoUGFja2FnZSAqZm9vID0gcGFja2FnZTsgZm9vLT5uYW1lOyBm
b28rKykKKyAgICAgICAgYWRkX3JlcXVpcmVkKGZvbyk7CiAgICAgICBzZXRf
ZnVsbF9saXN0IChsdiwgZnVsbF9saXN0KTsKICAgICAgIGJyZWFrOwogICAg
IGNhc2UgSURDX0NIT09TRV9GVUxMUEFSVDoKQEAgLTkzMCw5ICsxMDUyLDEw
IEBAIGRvX2Nob29zZSAoSElOU1RBTkNFIGgpCiAJCQkgICAgICAgOiAidW5r
bm93biIpOwogICAgICAgY29uc3QgY2hhciAqZXhjbHVkZWQgPSAocGtnLT5l
eGNsdWRlID8gInllcyIgOiAibm8iKTsKIAotICAgICAgbG9nIChMT0dfQkFC
QkxFLCAiWyVzXSBhY3Rpb249JXMgdHJ1c3Q9JXMgaW5zdGFsbGVkPSVzIGV4
Y2x1ZGVkPSVzIHNyYz89JXMiLAorICAgICAgbG9nIChMT0dfQkFCQkxFLCAi
WyVzXSBhY3Rpb249JXMgdHJ1c3Q9JXMgaW5zdGFsbGVkPSVzIGV4Y2x1ZGVk
PSVzIHNyYz89JXMiCisJICAgImNhdGVnb3J5PSVzIiwKIAkgICBwa2ctPm5h
bWUsIGFjdGlvbiwgdHJ1c3QsIGluc3RhbGxlZCwKLQkgICBleGNsdWRlZCwg
cGtnLT5zcmNwaWNrZWQgPyAieWVzIiA6ICJubyIpOworCSAgIGV4Y2x1ZGVk
LCBwa2ctPnNyY3BpY2tlZCA/ICJ5ZXMiIDogIm5vIiwgcGtnLT5jYXRlZ29y
eSk7CiAgICAgICBmb3IgKGludCB0ID0gMTsgdCA8IE5UUlVTVDsgdCsrKQog
CXsKIAkgIGlmIChwa2ctPmluZm9bdF0uaW5zdGFsbCkKSW5kZXg6IGluaS5o
Cj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3Ny
Yy93aW5zdXAvY2luc3RhbGwvaW5pLmgsdgpyZXRyaWV2aW5nIHJldmlzaW9u
IDIuOApkaWZmIC11IC1wIC1yMi44IGluaS5oCi0tLSBpbmkuaAkyMDAxLzA2
LzEzIDE2OjExOjAxCTIuOAorKysgaW5pLmgJMjAwMS8wNi8xNCAwMDowMTow
MgpAQCAtOTAsMTEgKzkwLDIwIEBAIHR5cGVkZWYgc3RydWN0CiAgIGludCBz
b3VyY2VfZXhpc3RzOwkvKiBzb3VyY2UgZmlsZSBleGlzdHMgb24gZGlzayAq
LwogfSBJbmZvOwkJCS8qICsxIGZvciBUUlVTVF9VTktOT1dOICovCiAKK3R5
cGVkZWYgc3RydWN0IERlcGVuZGVuY3lfdCBEZXBlbmRlbmN5Oworc3RydWN0
IERlcGVuZGVuY3lfdAoreworICBEZXBlbmRlbmN5ICpuZXh0OyAvKiB0aGUg
bmV4dCBwYWNrYWdlIGluIHRoaXMgZGVwZW5kZW5jeSBsaXN0ICovCisgIGNo
YXIgKnBhY2thZ2U7ICAgIC8qIHRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRo
YXQgaXMgZGVwZW5kZWQgb24gKi8KK307ICAgICAgICAgICAgICAgICAgLyog
RGVwZW5kZW5jaWVzIGNhbiBiZSB1c2VkIGZvciByZWNvbW1lbmRlZC9yZXF1
aXJlZC9yZWxhdGVkLi4uICovCisKIHR5cGVkZWYgc3RydWN0CiB7CiAgIGNo
YXIgKm5hbWU7CQkvKiBwYWNrYWdlIG5hbWUsIGxpa2UgImN5Z3dpbiIgKi8K
ICAgY2hhciAqc2Rlc2M7CQkvKiBzaG9ydCBkZXNjcmlwdGlvbiAocmVwbGFj
ZXMgIm5hbWUiIGlmIHByb3ZpZGVkKSAqLwogICBjaGFyICpsZGVzYzsJCS8q
IGxvbmcgZGVzY3JpcHRpb24gKG11bHRpLWxpbmUpICovCisgIGNoYXIgKmNh
dGVnb3J5OyAvKiB0aGUgY2F0ZWdvcnkgdGhlIHBhY2thZ2UgYmVsb25ncyB0
bywgbGlrZSAicmVxdWlyZWQiIG9yICJYRnJlZTg2IiAqLworICBEZXBlbmRl
bmN5ICpyZXF1aXJlZDsgLyogdGhlIHBhY2thZ2VzIHJlcXVpcmVkIGZvciB0
aGlzIHBhY2thZ2UgdG8gd29yayAqLwogICBhY3Rpb25zIGFjdGlvbjsJLyog
QUNUSU9OXyogLSBvbmx5IE5FVyBhbmQgVVBHUkFERSBnZXQgaW5zdGFsbGVk
ICovCiAgIHRydXN0cyB0cnVzdDsJCS8qIFRSVVNUXyogKHNlbGVjdHMgYW1v
bmcgaW5mb1tdIGJlbG93KSAqLwogICBpbnQgc3JjcGlja2VkOwkvKiBTUkNB
Q1RJT05fICovCkBAIC0xMTYsNiArMTI1LDcgQEAgZXh0ZXJuICJDIiB7CiBQ
YWNrYWdlICpuZXdfcGFja2FnZSAoY2hhciAqbmFtZSk7CiB2b2lkCWluaV9p
bml0IChjaGFyICpzdHJpbmcpOwogUGFja2FnZSAqZ2V0cGtnYnluYW1lIChj
b25zdCBjaGFyICpwa2duYW1lKTsKK3ZvaWQgICAgbmV3X3JlcXVpcmVtZW50
KFBhY2thZ2UgKnBhY2thZ2UsIGNoYXIgKmRlcGVuZHNvbik7CiAKICNpZmRl
ZiBfX2NwbHVzcGx1cwogfQpJbmRleDogaW5pbGV4LmwKPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jaW5z
dGFsbC9pbmlsZXgubCx2CnJldHJpZXZpbmcgcmV2aXNpb24gMi4zCmRpZmYg
LXUgLXAgLXIyLjMgaW5pbGV4LmwKLS0tIGluaWxleC5sCTIwMDEvMDYvMTMg
MTY6MTE6MDEJMi4zCisrKyBpbmlsZXgubAkyMDAxLzA2LzE0IDAwOjAxOjAy
CkBAIC01Miw2ICs1Miw5IEBAIFNUUglbYS16QS1aMC05Xy4vKy1dKwogInNk
ZXNjOiIJCXJldHVybiBTREVTQzsKICJsZGVzYzoiCQlyZXR1cm4gTERFU0M7
CiAKKyJjYXRlZ29yeToiCQlyZXR1cm4gQ0FURUdPUlk7CisicmVxdWlyZXM6
IgkJcmV0dXJuIFJFUVVJUkVTOworCiAiYXBhdGg6IgkJcmV0dXJuIEFQQVRI
OwogInBwYXRoOiIJCXJldHVybiBQUEFUSDsKIApJbmRleDogaW5pcGFyc2Uu
eQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9z
cmMvd2luc3VwL2NpbnN0YWxsL2luaXBhcnNlLnksdgpyZXRyaWV2aW5nIHJl
dmlzaW9uIDIuNwpkaWZmIC11IC1wIC1yMi43IGluaXBhcnNlLnkKLS0tIGlu
aXBhcnNlLnkJMjAwMS8wNi8xMyAxNjoxMTowMQkyLjcKKysrIGluaXBhcnNl
LnkJMjAwMS8wNi8xNCAwMDowMTowMgpAQCAtNDUsNiArNDUsNyBAQCBleHRl
cm4gaW50IHl5bGluZW5vOwogCiAldG9rZW4gU1RSSU5HCiAldG9rZW4gU0VU
VVBfVElNRVNUQU1QIFNFVFVQX1ZFUlNJT04gVkVSU0lPTiBJTlNUQUxMIFNP
VVJDRSBTREVTQyBMREVTQworJXRva2VuIENBVEVHT1JZIFJFUVVJUkVTCiAl
dG9rZW4gQVBBVEggUFBBVEggSU5DTFVERV9TRVRVUCBFWENMVURFX1BBQ0tB
R0UgRE9XTkxPQURfVVJMCiAldG9rZW4gVF9QUkVWIFRfQ1VSUiBUX1RFU1Qg
VF9VTktOT1dOCiAKQEAgLTg1LDYgKzg2LDggQEAgc2ltcGxlX2xpbmUKICA6
IFZFUlNJT04gU1RSSU5HCQl7IGNwdC0+dmVyc2lvbiA9ICQyOyB9CiAgfCBT
REVTQyBTVFJJTkcJCQl7IGNwLT5zZGVzYyA9ICQyOyB9CiAgfCBMREVTQyBT
VFJJTkcJCQl7IGNwLT5sZGVzYyA9ICQyOyB9CisgfCBDQVRFR09SWSBTVFJJ
TkcJCXsgY3AtPmNhdGVnb3J5ID0gJDI7IH0KKyB8IFJFUVVJUkVTIHJlcXVp
cmVzCiAgfCBJTlNUQUxMIFNUUklORyBTVFJJTkcJeyBjcHQtPmluc3RhbGwg
PSAkMjsKIAkJCQkgIGNwdC0+aW5zdGFsbF9zaXplID0gYXRvaSgkMyk7CiAJ
CQkJICBpZiAoIWNwdC0+dmVyc2lvbikKQEAgLTEwOCw2ICsxMTEsMTEgQEAg
c2ltcGxlX2xpbmUKIAkgICAgICB9CiAgOwogCityZXF1aXJlcworIDogU1RS
SU5HCQkJeyBuZXdfcmVxdWlyZW1lbnQoY3AsICQxKTsgfSByZXF1aXJlcwor
IHwgU1RSSU5HCQkJeyBuZXdfcmVxdWlyZW1lbnQoY3AsICQxKTsgfQorIDsK
KwogJSUKIAogUGFja2FnZSAqcGFja2FnZSA9IE5VTEw7CkBAIC0xMzgsNCAr
MTQ2LDE2IEBAIG5ld19wYWNrYWdlIChjaGFyICpuYW1lKQogICAgIH0KIAog
ICByZXR1cm4gY3A7Cit9CisKK3ZvaWQKK25ld19yZXF1aXJlbWVudChQYWNr
YWdlICpwYWNrYWdlLCBjaGFyICpkZXBlbmRzb24pCit7CisgIERlcGVuZGVu
Y3kgKmRwOworICBpZiAoIWRlcGVuZHNvbikKKyAgICByZXR1cm47CisgIGRw
ID0gKERlcGVuZGVuY3kgKikgbWFsbG9jIChzaXplb2YgKERlcGVuZGVuY3kp
KTsKKyAgZHAtPm5leHQgPSBjcC0+cmVxdWlyZWQ7CisgIGRwLT5wYWNrYWdl
ID0gZGVwZW5kc29uOworICBjcC0+cmVxdWlyZWQgPSBkcDsKIH0K

------------=_1583532848-65438-68--
