From: "Town, Brad" <btown@ceddec.com>
To: "'cygwin-patches@cygwin.com'" <cygwin-patches@cygwin.com>
Subject: RE: Mouse support
Date: Fri, 15 Dec 2000 08:33:00 -0000
Message-id: <F10D23B02E54D011A0AB0020AF9CEFE999EEAC@lynx.ceddec.com>
X-SW-Source: 2000-q4/msg00048.html
Content-type: multipart/mixed; boundary="----------=_1583532846-65437-23"

This is a multi-part message in MIME format...

------------=_1583532846-65437-23
Content-length: 1544

Yeah, this morning (Friday), CVS choked on my changes, too.  Attached are
some good patches that do the trick.

Brad Town


> -----Original Message-----
> From: cygwin-patches-owner@sources.redhat.com
> [ mailto:cygwin-patches-owner@sources.redhat.com]On Behalf Of 
> Christopher
> Faylor
> Sent: Thursday, December 14, 2000 11:43 PM
> To: 'cygwin-patches@cygwin.com'
> Subject: Re: Mouse support
> 
> 
> On Mon, Dec 11, 2000 at 12:35:52PM -0500, Christopher Faylor wrote:
> >On Mon, Dec 11, 2000 at 10:48:12AM -0500, Town, Brad wrote:
> >>Attached is a patch to fhandler_console.cc that allows enabling and
> >>disabling the mouse based on ^[[?1000h/l.  It's not 
> perfect, but it works
> >>well.  Included is a ChangeLog entry.
> >>
> >>Also, terribly minor point:  It seems that the mouse code I 
> submitted has
> >>been included in the CVS sources, but my ChangeLog entry hasn't yet
> >>appeared.
> >
> >Sorry.  That was a mistake.  I'll revert the code until I 
> have a chance to
> >analyze your new patch.
> 
> Apologies again, Brad, but I had problems applying your 
> patch.  It didn't
> seem to install cleanly to the current CVS version.
> 
> I've reverted the changes that I unintentionally applied and have
> checked in a fresh version of fhandler_console.cc.  I've added some
> crude understanding of when a '<ESC>[?' is detected.  Could you adapt
> your changes to use that and submit everything all over 
> again, including
> an up-to-date changelog?
> 
> When you do that, I'll check everything in.
> 
> Thanks,
> cgf
> 
> 


------------=_1583532846-65437-23
Content-Type: text/plain; charset=us-ascii; name="ChangeLog.mouse"
Content-Disposition: inline; filename="ChangeLog.mouse"
Content-Transfer-Encoding: base64
Content-Length: 631

RnJpIERlYyAxNSAxMTozMDowNSAyMDAwICBCcmFkbGV5IEEuIFRvd24gPHRv
d25iYUBwb2JveC5jb20+CgoJKiBmaGFuZGxlcl9jb25zb2xlLmNjOiBBZGRl
ZCBmbGFnIGZvciBlbmFibGluZyBhbmQgZGlzYWJsaW5nCgltb3VzZSBldmVu
dHMuCgkoZmhhbmRsZXJfY29uc29sZTo6cmVhZCk6IERpdHRvLgoJKGZoYW5k
bGVyX2NvbnNvbGU6OmNoYXJfY29tbWFuZCk6IERpdHRvLgoJKiBmaGFuZGxl
cl9jb25zb2xlLmNjIChmaGFuZGxlcl9jb25zb2xlOjpyZWFkKTogQWRkZWQK
CXh0ZXJtLXN0eWxlIG1vdXNlIGV2ZW50IHJlcG9ydGluZy4KCShmaGFuZGxl
cl9jb25zb2xlOjpvcGVuKTogRW5hYmxlZCBtb3VzZSBpbnB1dCBldmVudHMu
CgkoZmhhbmRsZXJfY29uc29sZTo6aW5wdXRfdGNzZXRhdHRyKTogRGl0dG8u
CgkqIHNlbGVjdC5jYyAocGVla19jb25zb2xlKTogQWRkZWQgY2hlY2sgZm9y
IG1vdXNlIGV2ZW50cy4K

------------=_1583532846-65437-23
Content-Type: text/x-diff; charset=us-ascii; name="fhandler_console.cc.diff"
Content-Disposition: inline; filename="fhandler_console.cc.diff"
Content-Transfer-Encoding: base64
Content-Length: 9281

LS0tIGZoYW5kbGVyX2NvbnNvbGUuY2MuY3ZzCUZyaSBEZWMgMTUgMTA6NTU6
MzQgMjAwMAorKysgZmhhbmRsZXJfY29uc29sZS5jYwlGcmkgRGVjIDE1IDEx
OjI1OjQxIDIwMDAKQEAgLTQ3LDYgKzQ3LDggQEAgc3RhdGljIHN0cnVjdAog
CiBjb25zdCBjaGFyICogZ2V0X25vbmFzY2lpX2tleSAoSU5QVVRfUkVDT1JE
JiwgY2hhciAqKTsKIAorc3RhdGljIEJPT0wgdXNlX21vdXNlID0gRkFMU0U7
CisKIEhBTkRMRSBjb25zb2xlX3NoYXJlZF9oOwogCiBzdGF0aWMgdHR5X21p
biBOT19DT1BZICpzaGFyZWRfY29uc29sZV9pbmZvID0gTlVMTDsKQEAgLTE4
NCw3ICsxODYsNyBAQCBmaGFuZGxlcl9jb25zb2xlOjpyZWFkICh2b2lkICpw
diwgc2l6ZV90CiAKICAgICAgIERXT1JEIG5yZWFkOwogICAgICAgSU5QVVRf
UkVDT1JEIGlucHV0X3JlYzsKLSAgICAgIGNvbnN0IGNoYXIgKnRvYWRkOwor
ICAgICAgY29uc3QgY2hhciAqdG9hZGQgPSAwOwogCiAgICAgICBpZiAoIVJl
YWRDb25zb2xlSW5wdXQgKGgsICZpbnB1dF9yZWMsIDEsICZucmVhZCkpCiAJ
ewpAQCAtMTkzLDQ4ICsxOTUsMTQyIEBAIGZoYW5kbGVyX2NvbnNvbGU6OnJl
YWQgKHZvaWQgKnB2LCBzaXplX3QKIAkgIHJldHVybiAtMTsJCS8qIHNlZW1z
IHRvIGJlIGZhaWx1cmUgKi8KIAl9CiAKKyAgICAgIC8qIGNoZWNrIHRoZSBl
dmVudCB0aGF0IG9jY3VycmVkICovCisgICAgICBzd2l0Y2ggKGlucHV0X3Jl
Yy5FdmVudFR5cGUpCisJeworCWNhc2UgS0VZX0VWRU5UOgorCSAgaWYgKCFp
bnB1dF9yZWMuRXZlbnQuS2V5RXZlbnQuYktleURvd24pCisJICAgIGNvbnRp
bnVlOworCiAjZGVmaW5lIGljaCAoaW5wdXRfcmVjLkV2ZW50LktleUV2ZW50
LnVDaGFyLkFzY2lpQ2hhcikKICNkZWZpbmUgd2NoIChpbnB1dF9yZWMuRXZl
bnQuS2V5RXZlbnQudUNoYXIuVW5pY29kZUNoYXIpCiAKLSAgICAgIC8qIGNo
ZWNrIGlmIHdlJ3JlIGp1c3QgZGlzcG9zaW5nIG9mIHRoaXMgb25lICovCisJ
ICBpZiAod2NoID09IDAgfHwKKwkgICAgICAvKiBhcnJvdy9mdW5jdGlvbiBr
ZXlzICovCisJICAgICAgKGlucHV0X3JlYy5FdmVudC5LZXlFdmVudC5kd0Nv
bnRyb2xLZXlTdGF0ZSAmIEVOSEFOQ0VEX0tFWSkpCisJICAgIHsKKwkgICAg
ICB0b2FkZCA9IGdldF9ub25hc2NpaV9rZXkgKGlucHV0X3JlYywgdG1wKTsK
KwkgICAgICBpZiAoIXRvYWRkKQorCQljb250aW51ZTsKKwkgICAgICBucmVh
ZCA9IHN0cmxlbiAodG9hZGQpOworCSAgICB9CisgICAgICAgICAgZWxzZQor
ICAgICAgICAgICAgeworCSAgICAgIHRtcFsxXSA9IGljaDsKKwkgICAgICAv
KiBOZWVkIHRoaXMgY2hlY2sgc2luY2UgVVMgY29kZSBwYWdlIHNlZW1zIHRv
IGhhdmUgYSBidWcgd2hlbgorCQkgY29udmVydGluZyBhIENUUkwtVS4gKi8K
KwkgICAgICBpZiAoKHVuc2lnbmVkIGNoYXIpaWNoID4gMHg3ZikKKwkJT2Vt
VG9DaGFyQnVmZiAodG1wICsgMSwgdG1wICsgMSwgMSk7CisJICAgICAgaWYg
KCEoaW5wdXRfcmVjLkV2ZW50LktleUV2ZW50LmR3Q29udHJvbEtleVN0YXRl
ICYgTEVGVF9BTFRfUFJFU1NFRCkpCisJCXRvYWRkID0gdG1wICsgMTsKKwkg
ICAgICBlbHNlCisJCXsKKwkJICB0bXBbMF0gPSAnXDAzMyc7CisJCSAgdG1w
WzFdID0gY3lnX3RvbG93ZXIgKHRtcFsxXSk7CisJCSAgdG9hZGQgPSB0bXA7
CisJCSAgbnJlYWQrKzsKKwkJfQorICAgICAgICAgICAgfQorI3VuZGVmIGlj
aAorI3VuZGVmIHdjaAorCSAgYnJlYWs7CiAKLSAgICAgIGlmIChpbnB1dF9y
ZWMuRXZlbnRUeXBlID09IFdJTkRPV19CVUZGRVJfU0laRV9FVkVOVCkKLQl7
Ci0JICBraWxsX3BncnAgKHRjLT5nZXRwZ2lkICgpLCBTSUdXSU5DSCk7Ci0J
ICBjb250aW51ZTsKLQl9Ci0gICAgICBpZiAoaW5wdXRfcmVjLkV2ZW50VHlw
ZSAhPSBLRVlfRVZFTlQgfHwKLQkgICFpbnB1dF9yZWMuRXZlbnQuS2V5RXZl
bnQuYktleURvd24pCi0JY29udGludWU7Ci0KLSAgICAgIGlmICh3Y2ggPT0g
MCB8fAotCSAgLyogYXJyb3cvZnVuY3Rpb24ga2V5cyAqLwotCSAgKGlucHV0
X3JlYy5FdmVudC5LZXlFdmVudC5kd0NvbnRyb2xLZXlTdGF0ZSAmIEVOSEFO
Q0VEX0tFWSkpCi0JewotCSAgdG9hZGQgPSBnZXRfbm9uYXNjaWlfa2V5IChp
bnB1dF9yZWMsIHRtcCk7Ci0JICBpZiAoIXRvYWRkKQotCSAgICBjb250aW51
ZTsKLQkgIG5yZWFkID0gc3RybGVuICh0b2FkZCk7Ci0JfQotICAgICAgZWxz
ZQotCXsKLQkgIHRtcFsxXSA9IGljaDsKLQkgIC8qIE5lZWQgdGhpcyBjaGVj
ayBzaW5jZSBVUyBjb2RlIHBhZ2Ugc2VlbXMgdG8gaGF2ZSBhIGJ1ZyB3aGVu
Ci0JICAgICBjb252ZXJ0aW5nIGEgQ1RSTC1VLiAqLwotCSAgaWYgKCh1bnNp
Z25lZCBjaGFyKWljaCA+IDB4N2YgJiYgY3VycmVudF9jb2RlcGFnZSA9PSBh
bnNpX2NwKQotCSAgICBPZW1Ub0NoYXJCdWZmICh0bXAgKyAxLCB0bXAgKyAx
LCAxKTsKLQkgIGlmICghKGlucHV0X3JlYy5FdmVudC5LZXlFdmVudC5kd0Nv
bnRyb2xLZXlTdGF0ZSAmIExFRlRfQUxUX1BSRVNTRUQpKQotCSAgICB0b2Fk
ZCA9IHRtcCArIDE7Ci0JICBlbHNlCisJY2FzZSBNT1VTRV9FVkVOVDoKKwkg
IGlmICh1c2VfbW91c2UpCiAJICAgIHsKLQkgICAgICB0bXBbMF0gPSAnXDAz
Myc7Ci0JICAgICAgdG1wWzFdID0gY3lnX3RvbG93ZXIgKHRtcFsxXSk7CisJ
ICAgICAgTU9VU0VfRVZFTlRfUkVDT1JEICYgbW91c2VfZXZlbnQgPSBpbnB1
dF9yZWMuRXZlbnQuTW91c2VFdmVudDsKKworCSAgICAgIC8qIFRyZWF0IHRo
ZSBkb3VibGUtY2xpY2sgZXZlbnQgbGlrZSBhIHJlZ3VsYXIgYnV0dG9uIHBy
ZXNzICovCisJICAgICAgaWYgKG1vdXNlX2V2ZW50LmR3RXZlbnRGbGFncyA9
PSBET1VCTEVfQ0xJQ0spCisJCXsKKwkJICBzeXNjYWxsX3ByaW50ZigibW91
c2U6IGRvdWJsZS1jbGljayAtPiBjbGljayIpOworCQkgIG1vdXNlX2V2ZW50
LmR3RXZlbnRGbGFncyA9IDA7CisJCX0KKworCSAgICAgIC8qIERpZCBzb21l
dGhpbmcgb3RoZXIgdGhhbiBhIGNsaWNrIG9jY3VyPyAqLworCSAgICAgIGlm
IChtb3VzZV9ldmVudC5kd0V2ZW50RmxhZ3MpCisJCWNvbnRpbnVlOworCSAg
ICAgIAorCSAgICAgIC8qIElmIHRoZSBtb3VzZSBldmVudCBvY2N1cnJlZCBv
dXQgb2YgdGhlIGFyZWEgd2UgY2FuIGhhbmRsZSwKKwkJIGlnbm9yZSBpdC4g
Ki8KKwkgICAgICBpbnQgeCA9IG1vdXNlX2V2ZW50LmR3TW91c2VQb3NpdGlv
bi5YOworCSAgICAgIGludCB5ID0gbW91c2VfZXZlbnQuZHdNb3VzZVBvc2l0
aW9uLlk7CisJICAgICAgaWYgKCh4ICsgJyAnICsgMSA+IDB4RkYpIHx8ICh5
ICsgJyAnICsgMSA+IDB4RkYpKQorCQl7CisJCSAgc3lzY2FsbF9wcmludGYo
Im1vdXNlOiBwb3NpdGlvbiBvdXQgb2YgcmFuZ2UiKTsKKwkJICBjb250aW51
ZTsKKwkJfQorCSAgICAgIAorCSAgICAgIC8qIElnbm9yZSB1bmltcG9ydGFu
dCBtb3VzZSBidXR0b25zICovCisJICAgICAgbW91c2VfZXZlbnQuZHdCdXR0
b25TdGF0ZSAmPSAweDc7CisJICAgICAgCisJICAgICAgLyogVGhpcyBjb2Rl
IGFzc3VtZXMgV2luZG93cyBuZXZlciByZXBvcnRzIG11bHRpcGxlIGJ1dHRv
bgorCQkgZXZlbnRzIGF0IHRoZSBzYW1lIHRpbWUuICovCisJICAgICAgc3Rh
dGljIERXT1JEIGR3TGFzdEJ1dHRvblN0YXRlID0gMDsKKwkgICAgICBpbnQg
YiA9IDA7CisJICAgICAgY2hhciBzelszMl07CisJICAgICAgaWYgKG1vdXNl
X2V2ZW50LmR3QnV0dG9uU3RhdGUgPT0gZHdMYXN0QnV0dG9uU3RhdGUpCisJ
CXsKKwkJICBzeXNjYWxsX3ByaW50ZigibW91c2U6IGJ1dHRvbiBzdGF0ZSB1
bmNoYW5nZWQiKTsKKwkJICBjb250aW51ZTsKKwkJfQorCSAgICAgIGVsc2Ug
aWYgKG1vdXNlX2V2ZW50LmR3QnV0dG9uU3RhdGUgPCBkd0xhc3RCdXR0b25T
dGF0ZSkKKwkJeworCQkgIGIgPSAzOworCQkgIHN0cmNweShzeiwgImJ0biB1
cCIpOworCQl9CisJICAgICAgZWxzZSBpZiAoKG1vdXNlX2V2ZW50LmR3QnV0
dG9uU3RhdGUgJiAxKSAhPSAoZHdMYXN0QnV0dG9uU3RhdGUgJiAxKSkKKwkJ
eworCQkgIGIgPSAwOworCQkgIHN0cmNweShzeiwgImJ0bjEgZG93biIpOwor
CQl9CisJICAgICAgZWxzZSBpZiAoKG1vdXNlX2V2ZW50LmR3QnV0dG9uU3Rh
dGUgJiAyKSAhPSAoZHdMYXN0QnV0dG9uU3RhdGUgJiAyKSkKKwkJeworCQkg
IGIgPSAxOworCQkgIHN0cmNweShzeiwgImJ0bjIgZG93biIpOworCQl9CisJ
ICAgICAgZWxzZSBpZiAoKG1vdXNlX2V2ZW50LmR3QnV0dG9uU3RhdGUgJiA0
KSAhPSAoZHdMYXN0QnV0dG9uU3RhdGUgJiA0KSkKKwkJeworCQkgIGIgPSAy
OworCQkgIHN0cmNweShzeiwgImJ0bjMgZG93biIpOworCQl9CisJICAgICAg
CisJICAgICAgLyogUmVtZW1iZXIgdGhlIGN1cnJlbnQgYnV0dG9uIHN0YXRl
ICovCisJICAgICAgZHdMYXN0QnV0dG9uU3RhdGUgPSBtb3VzZV9ldmVudC5k
d0J1dHRvblN0YXRlOworCSAgICAgIAorCSAgICAgIHN0YXRpYyBpbnQgbk1v
ZGlmaWVycyA9IDA7CisJICAgICAgLyogSWYgYSBidXR0b24gd2FzIHByZXNz
ZWQsIHJlbWVtYmVyIHRoZSBtb2RpZmllcnMgKi8KKwkgICAgICBpZiAoYiAh
PSAzKQorCQl7CisJCSAgbk1vZGlmaWVycyA9IDA7CisJCSAgaWYgKG1vdXNl
X2V2ZW50LmR3Q29udHJvbEtleVN0YXRlICYgU0hJRlRfUFJFU1NFRCkKKwkJ
ICAgIG5Nb2RpZmllcnMgfD0gMHg0OworCQkgIGlmIChtb3VzZV9ldmVudC5k
d0NvbnRyb2xLZXlTdGF0ZSAmIChSSUdIVF9BTFRfUFJFU1NFRHxMRUZUX0FM
VF9QUkVTU0VEKSkKKwkJICAgIG5Nb2RpZmllcnMgfD0gMHg4OworCQkgIGlm
IChtb3VzZV9ldmVudC5kd0NvbnRyb2xLZXlTdGF0ZSAmIChSSUdIVF9DVFJM
X1BSRVNTRUR8TEVGVF9DVFJMX1BSRVNTRUQpKQorCQkgICAgbk1vZGlmaWVy
cyB8PSAweDEwOworCQl9CisJICAgICAgCisJICAgICAgYiB8PSBuTW9kaWZp
ZXJzOworCSAgICAgIAorCSAgICAgIC8qIFdlIGNhbiBub3cgY3JlYXRlIHRo
ZSBjb2RlLiAqLworCSAgICAgIHNwcmludGYodG1wLCAiXDAzM1tNJWMlYyVj
IiwgYiArICcgJywgeCArICcgJyArIDEsIHkgKyAnICcgKyAxKTsKKwkgICAg
ICBzeXNjYWxsX3ByaW50ZigibW91c2U6ICVzIGF0ICglZCwlZCkiLCBzeiwg
eCwgeSk7CisKIAkgICAgICB0b2FkZCA9IHRtcDsKLQkgICAgICBucmVhZCsr
OworCSAgICAgIG5yZWFkID0gNjsKIAkgICAgfQorCSAgYnJlYWs7CisKKwlj
YXNlIFdJTkRPV19CVUZGRVJfU0laRV9FVkVOVDoKKwkgIGtpbGxfcGdycCAo
dGMtPmdldHBnaWQgKCksIFNJR1dJTkNIKTsKKwkgIGNvbnRpbnVlOworCisJ
ZGVmYXVsdDoKKwkgIGNvbnRpbnVlOwogCX0KIAotICAgICAgaWYgKGxpbmVf
ZWRpdCAodG9hZGQsIG5yZWFkKSkKKyAgICAgIGlmICh0b2FkZCAmJiBsaW5l
X2VkaXQgKHRvYWRkLCBucmVhZCkpCiAJYnJlYWs7CiAjdW5kZWYgaWNoCiAg
ICAgfQpAQCAtMzY1LDcgKzQ2MSw3IEBAIGZoYW5kbGVyX2NvbnNvbGU6Om9w
ZW4gKGNvbnN0IGNoYXIgKiwgaW4KICAgc2V0X3Jfbm9faW50ZXJydXB0ICgx
KTsJLy8gSGFuZGxlZCBleHBsaWNpdGx5IGluIHJlYWQgY29kZQogCiAgIGgg
PSBDcmVhdGVGaWxlQSAoIkNPTk9VVCQiLCBHRU5FUklDX1JFQUR8R0VORVJJ
Q19XUklURSwKLQkJICAgRklMRV9TSEFSRV9XUklURSB8IEZJTEVfU0hBUkVf
V1JJVEUsICZzZWNfbm9uZSwKKwkJICAgRklMRV9TSEFSRV9SRUFEIHwgRklM
RV9TSEFSRV9XUklURSwgJnNlY19ub25lLAogCQkgICBPUEVOX0VYSVNUSU5H
LCAwLCAwKTsKIAogICBpZiAoaCA9PSBJTlZBTElEX0hBTkRMRV9WQUxVRSkK
QEAgLTM4Miw3ICs0NzgsNyBAQCBmaGFuZGxlcl9jb25zb2xlOjpvcGVuIChj
b25zdCBjaGFyICosIGluCiAgIGlmIChHZXRDb25zb2xlTW9kZSAoZ2V0X2lv
X2hhbmRsZSAoKSwgJmNmbGFncykpCiAgICAgewogICAgICAgY2ZsYWdzIHw9
IEVOQUJMRV9QUk9DRVNTRURfSU5QVVQ7Ci0gICAgICBTZXRDb25zb2xlTW9k
ZSAoZ2V0X2lvX2hhbmRsZSAoKSwgRU5BQkxFX1dJTkRPV19JTlBVVCB8IGNm
bGFncyk7CisgICAgICBTZXRDb25zb2xlTW9kZSAoZ2V0X2lvX2hhbmRsZSAo
KSwgRU5BQkxFX1dJTkRPV19JTlBVVCB8IEVOQUJMRV9NT1VTRV9JTlBVVCB8
IGNmbGFncyk7CiAgICAgfQogCiAgIFRUWUNMRUFSRiAoUlNUQ09OUyk7CkBA
IC01NDUsNyArNjQxLDcgQEAgZmhhbmRsZXJfY29uc29sZTo6aW5wdXRfdGNz
ZXRhdHRyIChpbnQsIAogICAgICAgdGMtPnRpLmNfbGZsYWcgPSAwOwogICAg
IH0KIAotICBmbGFncyB8PSBFTkFCTEVfV0lORE9XX0lOUFVUOworICBmbGFn
cyB8PSBFTkFCTEVfV0lORE9XX0lOUFVUIHwgRU5BQkxFX01PVVNFX0lOUFVU
OwogCiAgIGludCByZXM7CiAgIGlmIChmbGFncyA9PSBvZmxhZ3MpCkBAIC05
MDMsNyArOTk5LDE5IEBAIGZoYW5kbGVyX2NvbnNvbGU6OmNoYXJfY29tbWFu
ZCAoY2hhciBjLCAKICAgICAgIGJyZWFrOwogICAgIGNhc2UgJ2gnOgogICAg
IGNhc2UgJ2wnOgotICAgICAgLyogSWdub3JlICovCisgICAgICBpZiAoIXNh
d19xdWVzdGlvbl9tYXJrKQorCWJyZWFrOworICAgICAgc3dpdGNoIChhcmdz
X1swXSkKKwl7CisJY2FzZSAxMDAwOiAvKiBNb3VzZSBzdXBwb3J0ICovCisJ
ICB1c2VfbW91c2UgPSAoYyA9PSAnaCcpID8gVFJVRSA6IEZBTFNFOworCSAg
c3lzY2FsbF9wcmludGYoIm1vdXNlIHN1cHBvcnQgJXNhYmxlZCIsIHVzZV9t
b3VzZSA/ICJlbiIgOiAiZGlzIik7CisJICBicmVhazsKKworCWRlZmF1bHQ6
IC8qIElnbm9yZSAqLworCSAgc3lzY2FsbF9wcmludGYoInVua25vd24gaC9s
IGNvbW1hbmQ6ICVkIiwgYXJnc19bMF0pOworCSAgYnJlYWs7CisJfQogICAg
ICAgYnJlYWs7CiAgICAgY2FzZSAnSic6CiAgICAgICBzd2l0Y2ggKGFyZ3Nf
WzBdKQo=

------------=_1583532846-65437-23
Content-Type: text/x-diff; charset=us-ascii; name="select.cc.diff"
Content-Disposition: inline; filename="select.cc.diff"
Content-Transfer-Encoding: base64
Content-Length: 846

LS0tIHNlbGVjdC5jYy5vcmlnCVRodSBOb3YgIDkgMDk6MDQ6NTMgMjAwMAor
Kysgc2VsZWN0LmNjCVRodSBOb3YgMzAgMTY6MDk6MzAgMjAwMApAQCAtNjM1
LDYgKzYzNSwxMCBAQCBwZWVrX2NvbnNvbGUgKHNlbGVjdF9yZWNvcmQgKm1l
LCBpbnQgaWduCiAgICAgICB7CiAJaWYgKGlyZWMuRXZlbnRUeXBlID09IFdJ
TkRPV19CVUZGRVJfU0laRV9FVkVOVCkKIAkgIGtpbGxfcGdycCAoZmgtPnRj
LT5nZXRwZ2lkICgpLCBTSUdXSU5DSCk7CisJZWxzZSBpZiAoaXJlYy5FdmVu
dFR5cGUgPT0gTU9VU0VfRVZFTlQgJiYKKwkJIChpcmVjLkV2ZW50Lk1vdXNl
RXZlbnQuZHdFdmVudEZsYWdzID09IDAgfHwKKwkJICBpcmVjLkV2ZW50Lk1v
dXNlRXZlbnQuZHdFdmVudEZsYWdzID09IERPVUJMRV9DTElDSykpCisJICBy
ZXR1cm4gbWUtPnJlYWRfcmVhZHkgPSAxOwogCWVsc2UgaWYgKGlyZWMuRXZl
bnRUeXBlID09IEtFWV9FVkVOVCAmJiBpcmVjLkV2ZW50LktleUV2ZW50LmJL
ZXlEb3duID09IFRSVUUgJiYKIAkJIChpcmVjLkV2ZW50LktleUV2ZW50LnVD
aGFyLkFzY2lpQ2hhciB8fCBnZXRfbm9uYXNjaWlfa2V5IChpcmVjLCB0bXBi
dWYpKSkKIAkgIHJldHVybiBtZS0+cmVhZF9yZWFkeSA9IDE7Cg==

------------=_1583532846-65437-23--
