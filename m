Return-Path: <cygwin-patches-return-9416-listarch-cygwin-patches=sources.redhat.com@cygwin.com>
Received: (qmail 49928 invoked by alias); 26 May 2019 15:10:57 -0000
Mailing-List: contact cygwin-patches-help@cygwin.com; run by ezmlm
Precedence: bulk
List-Id: <cygwin-patches.cygwin.com>
List-Subscribe: <mailto:cygwin-patches-subscribe@cygwin.com>
List-Post: <mailto:cygwin-patches@cygwin.com>
List-Archive: <http://sourceware.org/ml/cygwin-patches/>
List-Help: <mailto:cygwin-patches-help@cygwin.com>, <http://sourceware.org/ml/#faqs>
Sender: cygwin-patches-owner@cygwin.com
Mail-Followup-To: cygwin-patches@cygwin.com
Received: (qmail 49877 invoked by uid 89); 26 May 2019 15:10:57 -0000
Authentication-Results: sourceware.org; auth=none
X-Spam-SWARE-Status: No, score=-25.1 required=5.0 tests=AWL,BAYES_00,GIT_PATCH_0,GIT_PATCH_1,GIT_PATCH_2,GIT_PATCH_3,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS autolearn=ham version=3.3.1 spammy=Called
X-HELO: NAM05-DM3-obe.outbound.protection.outlook.com
Received: from mail-eopbgr730108.outbound.protection.outlook.com (HELO NAM05-DM3-obe.outbound.protection.outlook.com) (40.107.73.108) by sourceware.org (qpsmtpd/0.93/v0.84-503-g423c35a) with ESMTP; Sun, 26 May 2019 15:10:55 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=cornell.edu; s=selector2; h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck; bh=NFI1l2ktmyDXDMvQYoMhf2G1t/hNbAgZ2CD31ImrTrE=; b=L1iNE8zculLlcwEkDjuaBd7otO8qPOncT1sRkK++uKmvNoizC3EsFciqTwi7AiH4uUOS7LqQ+don5iOHsvb33qjvXFXmKvMMXCgHwPsR0x1WLLp5Ti/tbrZoVM56J6jzMcSF14zpK0N2aEiRi7uPijGM+K7L99SvTevcWiVIL5A=
Received: from DM6PR04MB5211.namprd04.prod.outlook.com (20.178.24.208) by DM6PR04MB4777.namprd04.prod.outlook.com (20.176.107.206) with Microsoft SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.1922.15; Sun, 26 May 2019 15:10:39 +0000
Received: from DM6PR04MB5211.namprd04.prod.outlook.com ([fe80::510a:3a42:f346:a4d8]) by DM6PR04MB5211.namprd04.prod.outlook.com ([fe80::510a:3a42:f346:a4d8%7]) with mapi id 15.20.1922.021; Sun, 26 May 2019 15:10:39 +0000
From: Ken Brown <kbrown@cornell.edu>
To: "cygwin-patches@cygwin.com" <cygwin-patches@cygwin.com>
Subject: [PATCH draft 6/6] Cygwin: add fhandler_base::npfs_handle
Date: Sun, 26 May 2019 15:10:00 -0000
Message-ID: <20190526151019.2187-7-kbrown@cornell.edu>
References: <20190526151019.2187-1-kbrown@cornell.edu>
In-Reply-To: <20190526151019.2187-1-kbrown@cornell.edu>
authentication-results: spf=none (sender IP is ) smtp.mailfrom=kbrown@cornell.edu;
x-ms-oob-tlc-oobclassifiers: OLM:2043;
received-spf: None (protection.outlook.com: cornell.edu does not designate permitted sender hosts)
x-ms-exchange-senderadcheck: 1
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: ksb2@cornell.edu
X-IsSubscribed: yes
X-SW-Source: 2019-q2/txt/msg00123.txt.bz2

VGhpcyBnZXRzIGEgaGFuZGxlIHRvIHRoZSBXaW5kb3dzIG5hbWVkIHBpcGUg
ZmlsZSBzeXN0ZW0gZGlyZWN0b3J5Lg0KDQpJdCByZXBsYWNlcyB0aGUgdGhy
ZWUgaWRlbnRpY2FsIGZ1bmN0aW9ucyBvZiB0aGUgc2FtZSBuYW1lIGluIHRo
ZQ0KY2xhc3NlcyBmaGFuZGxlcl9waXBlLCBmaGFuZGxlcl9maWZvLCBhbmQg
ZmhhbmRsZXJfc29ja2V0X3VuaXguDQotLS0NCiB3aW5zdXAvY3lnd2luL2Zo
YW5kbGVyLmNjICAgICAgICAgICAgIHwgMzAgKysrKysrKysrKysrKysrKysr
KysrKysrKw0KIHdpbnN1cC9jeWd3aW4vZmhhbmRsZXIuaCAgICAgICAgICAg
ICAgfCAgNyArKystLS0NCiB3aW5zdXAvY3lnd2luL2ZoYW5kbGVyX2ZpZm8u
Y2MgICAgICAgIHwgMzAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIHdp
bnN1cC9jeWd3aW4vZmhhbmRsZXJfcGlwZS5jYyAgICAgICAgfCAzMiArLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiB3aW5zdXAvY3lnd2luL2ZoYW5k
bGVyX3NvY2tldF91bml4LmNjIHwgMzAgLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KIDUgZmlsZXMgY2hhbmdlZCwgMzUgaW5zZXJ0aW9ucygrKSwgOTQg
ZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS93aW5zdXAvY3lnd2luL2Zo
YW5kbGVyLmNjIGIvd2luc3VwL2N5Z3dpbi9maGFuZGxlci5jYw0KaW5kZXgg
YmI2MThmYTg4Li43NjE5ZGI2YzcgMTAwNjQ0DQotLS0gYS93aW5zdXAvY3ln
d2luL2ZoYW5kbGVyLmNjDQorKysgYi93aW5zdXAvY3lnd2luL2ZoYW5kbGVy
LmNjDQpAQCAtMTgzNSwzICsxODM1LDMzIEBAIGZoYW5kbGVyX2Jhc2U6OmZw
YXRoY29uZiAoaW50IHYpDQogICAgIH0NCiAgIHJldHVybiAtMTsNCiB9DQor
DQorTlRTVEFUVVMNCitmaGFuZGxlcl9iYXNlOjpucGZzX2hhbmRsZSAoSEFO
RExFICZucGgpDQorew0KKyAgc3RhdGljIE5PX0NPUFkgU1JXTE9DSyBucGZz
X2xvY2s7DQorICBzdGF0aWMgTk9fQ09QWSBIQU5ETEUgbnBmc19kaXJoOw0K
Kw0KKyAgTlRTVEFUVVMgc3RhdHVzID0gU1RBVFVTX1NVQ0NFU1M7DQorICBP
QkpFQ1RfQVRUUklCVVRFUyBhdHRyOw0KKyAgSU9fU1RBVFVTX0JMT0NLIGlv
Ow0KKw0KKyAgLyogTG9ja2xlc3MgYWZ0ZXIgZmlyc3QgY2FsbC4gKi8NCisg
IGlmIChucGZzX2RpcmgpDQorICAgIHsNCisgICAgICBucGggPSBucGZzX2Rp
cmg7DQorICAgICAgcmV0dXJuIFNUQVRVU19TVUNDRVNTOw0KKyAgICB9DQor
ICBBY3F1aXJlU1JXTG9ja0V4Y2x1c2l2ZSAoJm5wZnNfbG9jayk7DQorICBp
ZiAoIW5wZnNfZGlyaCkNCisgICAgew0KKyAgICAgIEluaXRpYWxpemVPYmpl
Y3RBdHRyaWJ1dGVzICgmYXR0ciwgJnJvX3VfbnBmcywgMCwgTlVMTCwgTlVM
TCk7DQorICAgICAgc3RhdHVzID0gTnRPcGVuRmlsZSAoJm5wZnNfZGlyaCwg
RklMRV9SRUFEX0FUVFJJQlVURVMgfCBTWU5DSFJPTklaRSwNCisJCQkgICAm
YXR0ciwgJmlvLCBGSUxFX1NIQVJFX1JFQUQgfCBGSUxFX1NIQVJFX1dSSVRF
LA0KKwkJCSAgIDApOw0KKyAgICB9DQorICBSZWxlYXNlU1JXTG9ja0V4Y2x1
c2l2ZSAoJm5wZnNfbG9jayk7DQorICBpZiAoTlRfU1VDQ0VTUyAoc3RhdHVz
KSkNCisgICAgbnBoID0gbnBmc19kaXJoOw0KKyAgcmV0dXJuIHN0YXR1czsN
Cit9DQpkaWZmIC0tZ2l0IGEvd2luc3VwL2N5Z3dpbi9maGFuZGxlci5oIGIv
d2luc3VwL2N5Z3dpbi9maGFuZGxlci5oDQppbmRleCA1NWI0OWJjZWQuLjBh
ZWRiNjNjMyAxMDA2NDQNCi0tLSBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXIu
aA0KKysrIGIvd2luc3VwL2N5Z3dpbi9maGFuZGxlci5oDQpAQCAtMzg1LDYg
KzM4NSwxMCBAQCBwdWJsaWM6DQogICB2aXJ0dWFsIGludCBkdXAgKGZoYW5k
bGVyX2Jhc2UgKmNoaWxkLCBpbnQgZmxhZ3MpOw0KICAgdmlydHVhbCBpbnQg
ZnBhdGhjb25mIChpbnQpOw0KIA0KKyAgLyogR2V0IGEgaGFuZGxlIHRvIHRo
ZSBuYW1lZCBwaXBlIGZpbGUgc3lzdGVtIGRpcmVjdG9yeS4gIFVzZWQgYnkN
CisgICAgIGZoYW5kbGVyX3BpcGUsIGZoYW5kbGVyX2ZpZm8sIGFuZCBmaGFu
ZGxlcl9zb2NrZXRfdW5peC4gKi8NCisgIHN0YXRpYyBOVFNUQVRVUyBucGZz
X2hhbmRsZSAoSEFORExFICYpOw0KKw0KICAgdmlydHVhbCBIQU5ETEUgbW1h
cCAoY2FkZHJfdCAqYWRkciwgc2l6ZV90IGxlbiwgaW50IHByb3QsDQogCQkg
ICAgICAgaW50IGZsYWdzLCBvZmZfdCBvZmYpOw0KICAgdmlydHVhbCBpbnQg
bXVubWFwIChIQU5ETEUgaCwgY2FkZHJfdCBhZGRyLCBzaXplX3QgbGVuKTsN
CkBAIC0xMDA4LDcgKzEwMTIsNiBAQCBjbGFzcyBmaGFuZGxlcl9zb2NrZXRf
dW5peCA6IHB1YmxpYyBmaGFuZGxlcl9zb2NrZXQNCiAgIGludCBzZW5kX3Nv
Y2tfaW5mbyAoYm9vbCBmcm9tX2JpbmQpOw0KICAgaW50IGdyYWJfYWRtaW5f
cGtnICgpOw0KICAgaW50IHJlY3ZfcGVlcl9pbmZvICgpOw0KLSAgc3RhdGlj
IE5UU1RBVFVTIG5wZnNfaGFuZGxlIChIQU5ETEUgJm5waCk7DQogICBIQU5E
TEUgY3JlYXRlX3BpcGUgKGJvb2wgc2luZ2xlX2luc3RhbmNlKTsNCiAgIEhB
TkRMRSBjcmVhdGVfcGlwZV9pbnN0YW5jZSAoKTsNCiAgIE5UU1RBVFVTIG9w
ZW5fcGlwZSAoUFVOSUNPREVfU1RSSU5HIHBpcGVfbmFtZSwgYm9vbCB4Y2hn
X3NvY2tfaW5mbyk7DQpAQCAtMTE0Myw3ICsxMTQ2LDYgQEAgcHVibGljOg0K
ICAgaW50IF9fcmVnMyBmYWR2aXNlIChvZmZfdCwgb2ZmX3QsIGludCk7DQog
ICBpbnQgX19yZWczIGZ0cnVuY2F0ZSAob2ZmX3QsIGJvb2wpOw0KICAgaW50
IGluaXQgKEhBTkRMRSwgRFdPUkQsIG1vZGVfdCwgaW50NjRfdCk7DQotICBz
dGF0aWMgTlRTVEFUVVMgbnBmc19oYW5kbGUgKEhBTkRMRSAmKTsNCiAgIHN0
YXRpYyBpbnQgY3JlYXRlIChmaGFuZGxlcl9waXBlICpbMl0sIHVuc2lnbmVk
LCBpbnQpOw0KICAgc3RhdGljIERXT1JEIGNyZWF0ZSAoTFBTRUNVUklUWV9B
VFRSSUJVVEVTLCBIQU5ETEUgKiwgSEFORExFICosIERXT1JELA0KIAkJICAg
ICAgIGNvbnN0IGNoYXIgKiwgRFdPUkQsIGludDY0X3QgKnVuaXF1ZV9pZCA9
IE5VTEwpOw0KQEAgLTExOTgsNyArMTIwMCw2IEBAIGNsYXNzIGZoYW5kbGVy
X2ZpZm86IHB1YmxpYyBmaGFuZGxlcl9iYXNlDQogICBib29sIHJlYWRlciwg
d3JpdGVyLCBkdXBsZXhlcjsNCiAgIHNpemVfdCBtYXhfYXRvbWljX3dyaXRl
Ow0KICAgYm9vbCBfX3JlZzIgd2FpdCAoSEFORExFKTsNCi0gIHN0YXRpYyBO
VFNUQVRVUyBucGZzX2hhbmRsZSAoSEFORExFICYpOw0KICAgSEFORExFIGNy
ZWF0ZV9waXBlX2luc3RhbmNlIChib29sKTsNCiAgIE5UU1RBVFVTIG9wZW5f
cGlwZSAoSEFORExFJik7DQogICBpbnQgYWRkX2NsaWVudF9oYW5kbGVyICgp
Ow0KZGlmZiAtLWdpdCBhL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXJfZmlmby5j
YyBiL3dpbnN1cC9jeWd3aW4vZmhhbmRsZXJfZmlmby5jYw0KaW5kZXggM2Zh
YmJjM2I0Li43NzdlZjBiMjQgMTAwNjQ0DQotLS0gYS93aW5zdXAvY3lnd2lu
L2ZoYW5kbGVyX2ZpZm8uY2MNCisrKyBiL3dpbnN1cC9jeWd3aW4vZmhhbmRs
ZXJfZmlmby5jYw0KQEAgLTExOCwzNiArMTE4LDYgQEAgc2V0X3BpcGVfbm9u
X2Jsb2NraW5nIChIQU5ETEUgcGgsIGJvb2wgbm9uYmxvY2tpbmcpDQogICAg
IGRlYnVnX3ByaW50ZiAoIk50U2V0SW5mb3JtYXRpb25GaWxlKEZpbGVQaXBl
SW5mb3JtYXRpb24pOiAleSIsIHN0YXR1cyk7DQogfQ0KIA0KLU5UU1RBVFVT
DQotZmhhbmRsZXJfZmlmbzo6bnBmc19oYW5kbGUgKEhBTkRMRSAmbnBoKQ0K
LXsNCi0gIHN0YXRpYyBOT19DT1BZIFNSV0xPQ0sgbnBmc19sb2NrOw0KLSAg
c3RhdGljIE5PX0NPUFkgSEFORExFIG5wZnNfZGlyaDsNCi0NCi0gIE5UU1RB
VFVTIHN0YXR1cyA9IFNUQVRVU19TVUNDRVNTOw0KLSAgT0JKRUNUX0FUVFJJ
QlVURVMgYXR0cjsNCi0gIElPX1NUQVRVU19CTE9DSyBpbzsNCi0NCi0gIC8q
IExvY2tsZXNzIGFmdGVyIGZpcnN0IGNhbGwuICovDQotICBpZiAobnBmc19k
aXJoKQ0KLSAgICB7DQotICAgICAgbnBoID0gbnBmc19kaXJoOw0KLSAgICAg
IHJldHVybiBTVEFUVVNfU1VDQ0VTUzsNCi0gICAgfQ0KLSAgQWNxdWlyZVNS
V0xvY2tFeGNsdXNpdmUgKCZucGZzX2xvY2spOw0KLSAgaWYgKCFucGZzX2Rp
cmgpDQotICAgIHsNCi0gICAgICBJbml0aWFsaXplT2JqZWN0QXR0cmlidXRl
cyAoJmF0dHIsICZyb191X25wZnMsIDAsIE5VTEwsIE5VTEwpOw0KLSAgICAg
IHN0YXR1cyA9IE50T3BlbkZpbGUgKCZucGZzX2RpcmgsIEZJTEVfUkVBRF9B
VFRSSUJVVEVTIHwgU1lOQ0hST05JWkUsDQotCQkJICAgJmF0dHIsICZpbywg
RklMRV9TSEFSRV9SRUFEIHwgRklMRV9TSEFSRV9XUklURSwNCi0JCQkgICAw
KTsNCi0gICAgfQ0KLSAgUmVsZWFzZVNSV0xvY2tFeGNsdXNpdmUgKCZucGZz
X2xvY2spOw0KLSAgaWYgKE5UX1NVQ0NFU1MgKHN0YXR1cykpDQotICAgIG5w
aCA9IG5wZnNfZGlyaDsNCi0gIHJldHVybiBzdGF0dXM7DQotfQ0KLQ0KIC8q
IENhbGxlZCB3aGVuIGEgRklGTyBpcyBmaXJzdCBvcGVuZWQgZm9yIHJlYWRp
bmcgYW5kIGFnYWluIGVhY2ggdGltZQ0KICAgIGEgbmV3IGNsaWVudCBoYW5k
bGVyIGlzIG5lZWRlZC4gIEVhY2ggcGlwZSBpbnN0YW5jZSBpcyBjcmVhdGVk
IGluDQogICAgYmxvY2tpbmcgbW9kZSBzbyB0aGF0IHdlIGNhbiBlYXNpbHkg
d2FpdCBmb3IgYSBjb25uZWN0aW9uLiAgQWZ0ZXINCmRpZmYgLS1naXQgYS93
aW5zdXAvY3lnd2luL2ZoYW5kbGVyX3BpcGUuY2MgYi93aW5zdXAvY3lnd2lu
L2ZoYW5kbGVyX3BpcGUuY2MNCmluZGV4IGQ1NmVhNGM4OC4uNDQ2NGVjMDA1
IDEwMDY0NA0KLS0tIGEvd2luc3VwL2N5Z3dpbi9maGFuZGxlcl9waXBlLmNj
DQorKysgYi93aW5zdXAvY3lnd2luL2ZoYW5kbGVyX3BpcGUuY2MNCkBAIC01
ODMsMzYgKzU4Myw2IEBAIGZoYW5kbGVyX3BpcGU6OmNyZWF0ZSAoZmhhbmRs
ZXJfcGlwZSAqZmhzWzJdLCB1bnNpZ25lZCBwc2l6ZSwgaW50IG1vZGUpDQog
ICByZXR1cm4gcmVzOw0KIH0NCiANCi1OVFNUQVRVUw0KLWZoYW5kbGVyX3Bp
cGU6Om5wZnNfaGFuZGxlIChIQU5ETEUgJm5waCkNCi17DQotICBzdGF0aWMg
Tk9fQ09QWSBTUldMT0NLIG5wZnNfbG9jazsNCi0gIHN0YXRpYyBOT19DT1BZ
IEhBTkRMRSBucGZzX2Rpcmg7DQotDQotICBOVFNUQVRVUyBzdGF0dXMgPSBT
VEFUVVNfU1VDQ0VTUzsNCi0gIE9CSkVDVF9BVFRSSUJVVEVTIGF0dHI7DQot
ICBJT19TVEFUVVNfQkxPQ0sgaW87DQotDQotICAvKiBMb2NrbGVzcyBhZnRl
ciBmaXJzdCBjYWxsLiAqLw0KLSAgaWYgKG5wZnNfZGlyaCkNCi0gICAgew0K
LSAgICAgIG5waCA9IG5wZnNfZGlyaDsNCi0gICAgICByZXR1cm4gU1RBVFVT
X1NVQ0NFU1M7DQotICAgIH0NCi0gIEFjcXVpcmVTUldMb2NrRXhjbHVzaXZl
ICgmbnBmc19sb2NrKTsNCi0gIGlmICghbnBmc19kaXJoKQ0KLSAgICB7DQot
ICAgICAgSW5pdGlhbGl6ZU9iamVjdEF0dHJpYnV0ZXMgKCZhdHRyLCAmcm9f
dV9ucGZzLCAwLCBOVUxMLCBOVUxMKTsNCi0gICAgICBzdGF0dXMgPSBOdE9w
ZW5GaWxlICgmbnBmc19kaXJoLCBGSUxFX1JFQURfQVRUUklCVVRFUyB8IFNZ
TkNIUk9OSVpFLA0KLQkJCSAgICZhdHRyLCAmaW8sIEZJTEVfU0hBUkVfUkVB
RCB8IEZJTEVfU0hBUkVfV1JJVEUsDQotCQkJICAgMCk7DQotICAgIH0NCi0g
IFJlbGVhc2VTUldMb2NrRXhjbHVzaXZlICgmbnBmc19sb2NrKTsNCi0gIGlm
IChOVF9TVUNDRVNTIChzdGF0dXMpKQ0KLSAgICBucGggPSBucGZzX2Rpcmg7
DQotICByZXR1cm4gc3RhdHVzOw0KLX0NCi0NCiBzdGF0aWMgaW50DQogbnRf
Y3JlYXRlIChMUFNFQ1VSSVRZX0FUVFJJQlVURVMgc2FfcHRyLCBQSEFORExF
IHIsIFBIQU5ETEUgdywNCiAJCURXT1JEIHBzaXplLCBpbnQ2NF90ICp1bmlx
dWVfaWQpDQpAQCAtNjMwLDcgKzYwMCw3IEBAIG50X2NyZWF0ZSAoTFBTRUNV
UklUWV9BVFRSSUJVVEVTIHNhX3B0ciwgUEhBTkRMRSByLCBQSEFORExFIHcs
DQogICBpZiAodykNCiAgICAgKncgPSBOVUxMOw0KIA0KLSAgc3RhdHVzID0g
ZmhhbmRsZXJfcGlwZTo6bnBmc19oYW5kbGUgKG5wZnNoKTsNCisgIHN0YXR1
cyA9IGZoYW5kbGVyX2Jhc2U6Om5wZnNfaGFuZGxlIChucGZzaCk7DQogICBp
ZiAoIU5UX1NVQ0NFU1MgKHN0YXR1cykpDQogICAgIHsNCiAgICAgICBfX3Nl
dGVycm5vX2Zyb21fbnRfc3RhdHVzIChzdGF0dXMpOw0KZGlmZiAtLWdpdCBh
L3dpbnN1cC9jeWd3aW4vZmhhbmRsZXJfc29ja2V0X3VuaXguY2MgYi93aW5z
dXAvY3lnd2luL2ZoYW5kbGVyX3NvY2tldF91bml4LmNjDQppbmRleCBlZWE3
ZTc2YjMuLjIzZDNmNDAzZiAxMDA2NDQNCi0tLSBhL3dpbnN1cC9jeWd3aW4v
ZmhhbmRsZXJfc29ja2V0X3VuaXguY2MNCisrKyBiL3dpbnN1cC9jeWd3aW4v
ZmhhbmRsZXJfc29ja2V0X3VuaXguY2MNCkBAIC04MDQsMzYgKzgwNCw2IEBA
IGZoYW5kbGVyX3NvY2tldF91bml4OjpyZWN2X3BlZXJfaW5mbyAoKQ0KICAg
cmV0dXJuIHJldDsNCiB9DQogDQotTlRTVEFUVVMNCi1maGFuZGxlcl9zb2Nr
ZXRfdW5peDo6bnBmc19oYW5kbGUgKEhBTkRMRSAmbnBoKQ0KLXsNCi0gIHN0
YXRpYyBOT19DT1BZIFNSV0xPQ0sgbnBmc19sb2NrOw0KLSAgc3RhdGljIE5P
X0NPUFkgSEFORExFIG5wZnNfZGlyaDsNCi0NCi0gIE5UU1RBVFVTIHN0YXR1
cyA9IFNUQVRVU19TVUNDRVNTOw0KLSAgT0JKRUNUX0FUVFJJQlVURVMgYXR0
cjsNCi0gIElPX1NUQVRVU19CTE9DSyBpbzsNCi0NCi0gIC8qIExvY2tsZXNz
IGFmdGVyIGZpcnN0IGNhbGwuICovDQotICBpZiAobnBmc19kaXJoKQ0KLSAg
ICB7DQotICAgICAgbnBoID0gbnBmc19kaXJoOw0KLSAgICAgIHJldHVybiBT
VEFUVVNfU1VDQ0VTUzsNCi0gICAgfQ0KLSAgQWNxdWlyZVNSV0xvY2tFeGNs
dXNpdmUgKCZucGZzX2xvY2spOw0KLSAgaWYgKCFucGZzX2RpcmgpDQotICAg
IHsNCi0gICAgICBJbml0aWFsaXplT2JqZWN0QXR0cmlidXRlcyAoJmF0dHIs
ICZyb191X25wZnMsIDAsIE5VTEwsIE5VTEwpOw0KLSAgICAgIHN0YXR1cyA9
IE50T3BlbkZpbGUgKCZucGZzX2RpcmgsIEZJTEVfUkVBRF9BVFRSSUJVVEVT
IHwgU1lOQ0hST05JWkUsDQotCQkJICAgJmF0dHIsICZpbywgRklMRV9TSEFS
RV9SRUFEIHwgRklMRV9TSEFSRV9XUklURSwNCi0JCQkgICAwKTsNCi0gICAg
fQ0KLSAgUmVsZWFzZVNSV0xvY2tFeGNsdXNpdmUgKCZucGZzX2xvY2spOw0K
LSAgaWYgKE5UX1NVQ0NFU1MgKHN0YXR1cykpDQotICAgIG5waCA9IG5wZnNf
ZGlyaDsNCi0gIHJldHVybiBzdGF0dXM7DQotfQ0KLQ0KIEhBTkRMRQ0KIGZo
YW5kbGVyX3NvY2tldF91bml4OjpjcmVhdGVfcGlwZSAoYm9vbCBzaW5nbGVf
aW5zdGFuY2UpDQogew0KLS0gDQoyLjE3LjANCg0K
