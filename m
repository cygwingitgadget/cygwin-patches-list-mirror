From: Brian Keener <bkeener@thesoftwaresource.com>
To: cygwin patches <cygwin-patches@sources.redhat.com>
Subject: [patch] Setup.exe choose.cc selection enhancement based on file existence
Date: Wed, 07 Feb 2001 19:36:00 -0000
Message-id: <VA.00000633.00299ba0@thesoftwaresource.com>
References: <200102070226.VAA23607@envy.delorie.com>
X-SW-Source: 2001-q1/msg00065.html
Content-type: multipart/mixed; boundary="----------=_1583532846-65438-4"

This is a multi-part message in MIME format...

------------=_1583532846-65438-4
Content-length: 4391

Okay I will try this again.  The following change enhances the Setup.exe 
selection criteria for which files to show in the partial/full lists so 
that the selection criteria now include the installation method selected 
and the existence/non-existence of the installation file for each package 
as well as slightly different logic on Prev, Curr, and Test.  No,  the 
basic scheme still works they way it did.  The difference is what is 
displayed and whether they are shown as needing updating or if they 
default to skip or keep.  If I am in partial list then it comes up by 
default with current selected like it did and if I selected an install 
method of Netinstall then all packages with a current that is not 
currently installed would be displayed.  On the other hand if I selected 
download then only packages with a current version that is not 
installed and does not already exist on my local drive would be displayed 
for selection and if I selected install from local directory then only 
those whose current install file existed on disk and where the 
current version is not installed would be displayed.  This same logic 
follows if I then selected Prev or Test the selection list changes 
accordingly.

Sorry about the fact that I use and attachment but the code diff was 
bigger than my email would allow me to send  but here is the Changelog 
entry

2001-02-05  Brian Keener   <bkeener@thesoftwaresource.com>
        *  choose.cc (paint) : modified message for nothing to download  
        vs nothing to install/update.
        (list_click) : modified to skip versions in selection process if 
        installing from local directory and installation file does not   
        exist.  Also leaves Source Action set to N/A if the source file  
        does not exist and installing from local directory.
        (check_existence) : new method to check current existence of
        installation files based on selected installation method.
        (set_existence) : new method to set the current existence of 
        installation files based on selected installation method.
        (best_trust) : decision process modified for best trust to base 
        decision on current trust selected (IE: prev, curr, or test) and
        existence of file and installation method selected.
        (default_trust) : added logic to capture the current trust level 
        and the trust selected for the given package.
        (set_full_list) : expanded the decision criteria for displaying a 
        package in the selection list to include existence/non-existence 
        of the file and the selected installation method.
        (build_labels) : modified criteria for label addition to include
        installation method and file existence/non-existence.
        (create_listview) : modification to establish the trust on       
        packages before setting up the display list.  Also modification  
        to set Current trust button as the default.
        (dialog_cmd) : set response for Prev, Curr, Test button push to  
        perform a reset of the selection list as well as setting the     
        default trust.
        (scan2) : modification to use the new method get_package_version 
        and also enhanced handling of the build for the structures       
        package and extra.
        (get_package_version) : new method to provide for reusable code  
        for determining the package version from the file name for a     
        specified trust.
        (read_installed_db) : modification to use the new method 
        get_package_version and also enhanced handling of the build for  
        the structures package and extra.
        (do_choose) : modification for additional initialization of      
        package and extra structures.  Uses read_installed_db all the    
        time despite install method.  Enhancement and changes to output  
        display for expanded code meanings and clarified output for      
        packages and available versions in the setup.log.full log file.
        *  ini.h :  added install_exists and source_exists and 
        partial_list_display to the structure definition for package.
        *  res.rc (IDD_CHOOSE) : Modify to choose dialog such that Prev, 
        Curr, and Test pushbuttons become Radio Buttons instead thus     
        allowing the operator to better determine which is selected.




------------=_1583532846-65438-4
Content-Type: text/x-diff; charset=us-ascii; name="foo1"
Content-Disposition: inline; filename="foo1"
Content-Transfer-Encoding: base64
Content-Length: 25071

SW5kZXg6IGNob29zZS5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBm
aWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2NpbnN0YWxsL2Nob29zZS5jYyx2
CnJldHJpZXZpbmcgcmV2aXNpb24gMi4xMQpkaWZmIC1wIC0yIC1yMi4xMSBj
aG9vc2UuY2MKKioqIGNob29zZS5jYwkyMDAwLzEyLzExIDAwOjA3OjU2CTIu
MTEKLS0tIGNob29zZS5jYwkyMDAxLzAyLzA4IDAzOjExOjQ5CioqKioqKioq
KioqKioqKiBzdGF0aWMgY2hhciAqY3ZzaWQgPSAiXG4lJSUgJElkOiBjaG9v
c2UuCioqKiAzMSwzNCAqKioqCi0tLSAzMSwzNSAtLS0tCiAgI2luY2x1ZGUg
PHN0ZGlvLmg+CiAgI2luY2x1ZGUgPHN0ZGxpYi5oPgorICNpbmNsdWRlIDxp
by5oPgogICNpbmNsdWRlIDxjdHlwZS5oPgogIAoqKioqKioqKioqKioqKiog
c3RhdGljIGNoYXIgKmN2c2lkID0gIlxuJSUlICRJZDogY2hvb3NlLgoqKiog
NDIsNDYgKioqKgogICNpbmNsdWRlICJmaW5kLmgiCiAgCiEgI2RlZmluZSBI
TUFSR0lOCQkxMAogICNkZWZpbmUgUk9XX01BUkdJTgk1CiAgI2RlZmluZSBJ
Q09OX01BUkdJTgk0Ci0tLSA0Myw0OSAtLS0tCiAgI2luY2x1ZGUgImZpbmQu
aCIKICAKISAjaW5jbHVkZSAicG9ydC5oIgohIAohICNkZWZpbmUgSE1BUkdJ
TgkxMAogICNkZWZpbmUgUk9XX01BUkdJTgk1CiAgI2RlZmluZSBJQ09OX01B
UkdJTgk0CioqKioqKioqKioqKioqKiBzdGF0aWMgaW50IGluaXRpYWxpemVk
ID0gMDsKKioqIDU1LDU4ICoqKioKLS0tIDU4LDYyIC0tLS0KICAKICBzdGF0
aWMgaW50IGZ1bGxfbGlzdCA9IDA7Cisgc3RhdGljIGludCB3aGljaF90cnVz
dCA9IFRSVVNUX0NVUlI7CiAgCiAgc3RhdGljIGludCBzY3JvbGxfdWxjX3gs
IHNjcm9sbF91bGNfeTsKKioqKioqKioqKioqKioqIHBhaW50IChIV05EIGh3
bmQpCioqKiAxODEsMTg0ICoqKioKLS0tIDE4NSwxOTAgLS0tLQogICAgICB7
CiAgICAgICAgc3RhdGljIGNoYXIgKm1zZyA9ICJOb3RoaW5nIHRvIEluc3Rh
bGwvVXBkYXRlIjsKKyAgICAgICBpZiAoc291cmNlID09IElEQ19TT1VSQ0Vf
RE9XTkxPQUQpCisgICAgICAgICAgbXNnID0gIk5vdGhpbmcgdG8gRG93bmxv
YWQiOwogICAgICAgIFRleHRPdXQgKGhkYywgSE1BUkdJTiwgaGVhZGVyX2hl
aWdodCwgbXNnLCBzdHJsZW4gKG1zZykpOwogICAgICB9CioqKioqKioqKioq
KioqKiBsaXN0X2NsaWNrIChIV05EIGh3bmQsIEJPT0wgZGJsY2xrLCBpbnQg
CioqKiAyODEsMjg0ICoqKioKLS0tIDI4NywyOTUgLS0tLQogICAgICB7CiAg
ICAgICAgZXh0cmFbcF0ucGljayArKzsKKyAgICAgICB3aGlsZSAoKHBhY2th
Z2VbcF0uaW5mb1tleHRyYVtwXS5jaG9vc2VyW2V4dHJhW3BdLnBpY2tdLnRy
dXN0XS5pbnN0YWxsX2V4aXN0cz09MCAmJiAKKyAgICAgICAgICAgICAgIHNv
dXJjZSA9PSBJRENfU09VUkNFX0NXRCkgJiYgCisgICAgICAgICAgICAgICBw
YWNrYWdlW3BdLmluZm9bZXh0cmFbcF0uY2hvb3NlcltleHRyYVtwXS5waWNr
XS50cnVzdF0uaW5zdGFsbCAmJgorICAgICAgICAgICAgICAgZXh0cmFbcF0u
Y2hvb3NlcltleHRyYVtwXS5waWNrXS5jYXB0aW9uICE9IDApCisgICAgICAg
ICBleHRyYVtwXS5waWNrICsrOwogICAgICAgIGlmIChleHRyYVtwXS5jaG9v
c2VyW2V4dHJhW3BdLnBpY2tdLmNhcHRpb24gPT0gMCkKICAJZXh0cmFbcF0u
cGljayA9IDA7CioqKioqKioqKioqKioqKiBsaXN0X2NsaWNrIChIV05EIGh3
bmQsIEJPT0wgZGJsY2xrLCBpbnQgCioqKiAyODcsMjkxICoqKioKICAgIGlm
ICh4ID49IGhlYWRlcnNbU1JDX0NPTF0ueCAtIEhNQVJHSU4vMiAmJiB4IDw9
IGhlYWRlcnNbU1JDX0NPTCsxXS54IC0gSE1BUkdJTi8yKQogICAgICB7CiEg
ICAgICAgaWYgKGV4dHJhW3BdLmNob29zZXJbZXh0cmFbcF0ucGlja10uc3Jj
X2F2YWlsKQogIAlwYWNrYWdlW3BdLnNyY2FjdGlvbiBePSAoU1JDQUNUSU9O
X05PXlNSQ0FDVElPTl9ZRVMpOwogICAgICB9Ci0tLSAyOTgsMzAzIC0tLS0K
ICAgIGlmICh4ID49IGhlYWRlcnNbU1JDX0NPTF0ueCAtIEhNQVJHSU4vMiAm
JiB4IDw9IGhlYWRlcnNbU1JDX0NPTCsxXS54IC0gSE1BUkdJTi8yKQogICAg
ICB7CiEgICAgICAgaWYgKGV4dHJhW3BdLmNob29zZXJbZXh0cmFbcF0ucGlj
a10uc3JjX2F2YWlsICYmIAohICAgICAgICAgICBwYWNrYWdlW3BdLmluZm9b
ZXh0cmFbcF0uY2hvb3NlcltleHRyYVtwXS5waWNrXS50cnVzdF0uc291cmNl
X2V4aXN0cykKICAJcGFja2FnZVtwXS5zcmNhY3Rpb24gXj0gKFNSQ0FDVElP
Tl9OT15TUkNBQ1RJT05fWUVTKTsKICAgICAgfQoqKioqKioqKioqKioqKiog
bm90ZV93aWR0aCAoSERDIGRjLCBjaGFyICpzdHJpbmcsIGludCBhZAoqKiog
MzUxLDM2NSAqKioqCiAgfQogIAogIHN0YXRpYyBpbnQKICBiZXN0X3RydXN0
IChpbnQgcCwgaW50IHRydXN0KQogIHsKICAgIGludCB0OwohICAgZm9yICh0
PXRydXN0OyB0Pj0wOyB0LS0pCiEgICAgIGlmIChwYWNrYWdlW3BdLmluZm9b
dF0uaW5zdGFsbCkKICAgICAgICByZXR1cm4gdDsKISAgIGZvciAodD10cnVz
dCsxOyB0PD1OVFJVU1Q7IHQrKykKISAgICAgaWYgKHBhY2thZ2VbcF0uaW5m
b1t0XS5pbnN0YWxsKQohICAgICAgIHJldHVybiB0OwohICAgaWYgKGV4dHJh
W3BdLmluc3RhbGxlZF9maWxlKQogICAgICByZXR1cm4gVFJVU1RfS0VFUDsK
ICAgIHJldHVybiBUUlVTVF9OT05FOwotLS0gMzYzLDQzNyAtLS0tCiAgfQog
IAorIHN0YXRpYyBpbnQgCisgY2hlY2tfZXhpc3RlbmNlIChpbnQgcCwgaW50
IHRydXN0LCBpbnQgY2hlY2tfc3JjKQorIHsKKyAgIGlmIChzb3VyY2UgPT0g
SURDX1NPVVJDRV9ORVRJTlNUKQorICAgICAgICAgcmV0dXJuIDE7CisgICBp
ZiAoc291cmNlID09IElEQ19TT1VSQ0VfRE9XTkxPQUQpCisgICAgICB7Cisg
ICAgICBpZiAoIGNoZWNrX3NyYyA9PSAwICYmIF9hY2Nlc3MocGFja2FnZVtw
XS5pbmZvW3RydXN0XS5pbnN0YWxsLDApID09IDApCisgICAgICAgICByZXR1
cm4gMTsKKyAgICAgIGVsc2UgaWYgKCBjaGVja19zcmMgPT0gMSAmJiBfYWNj
ZXNzKHBhY2thZ2VbcF0uaW5mb1t0cnVzdF0uc291cmNlLDApID09IDAgKQor
ICAgICAgICAgcmV0dXJuIDE7CisgICAgICBlbHNlCisgICAgICAgICByZXR1
cm4gMDsKKyAgICAgIH0KKyAgIGlmIChzb3VyY2UgPT0gSURDX1NPVVJDRV9D
V0QpCisgICAgICB7CisgICAgICBpZiAoIGNoZWNrX3NyYyA9PSAwICAmJiBw
YWNrYWdlW3BdLmluZm9bdHJ1c3RdLmluc3RhbGwgJiYKKyAgICAgICAgICAg
IF9hY2Nlc3MocGFja2FnZVtwXS5pbmZvW3RydXN0XS5pbnN0YWxsLDApID09
IDAgKQorICAgICAgICAgIHJldHVybiAxOworICAgICAgZWxzZSBpZiAoIGNo
ZWNrX3NyYyA9PSAxICYmIHBhY2thZ2VbcF0uaW5mb1t0cnVzdF0uc291cmNl
ICYmIAorICAgICAgICAgICAgICAgIF9hY2Nlc3MocGFja2FnZVtwXS5pbmZv
W3RydXN0XS5zb3VyY2UsMCkgPT0gMCApCisgICAgICAgICAgcmV0dXJuIDE7
CisgICAgICB9CisgICByZXR1cm4gMDsKKyB9CisgCisgc3RhdGljIHZvaWQK
KyBzZXRfZXhpc3RlbmNlICgpCisgeworICAgZm9yIChpbnQgaT0wOyBpPG5w
YWNrYWdlczsgaSsrKQorICAgICB7CisgICAgICAgZm9yIChpbnQgdD0wOyB0
PE5UUlVTVDsgdCsrKQorICAgICAgICAgeworICAgICAgICAgICAvKiAwID0g
Y2hlY2sgaW5zdGFsbCBmaWxlICovCisgICAgICAgICAgIHBhY2thZ2VbaV0u
aW5mb1t0XS5pbnN0YWxsX2V4aXN0cyA9IGNoZWNrX2V4aXN0ZW5jZShpLHQs
MCk7IAorICAgICAgICAgICAvKiAxID0gY2hlY2sgc291cmNlIGZpbGUgKi8K
KyAgICAgICAgICAgcGFja2FnZVtpXS5pbmZvW3RdLnNvdXJjZV9leGlzdHMg
PSBjaGVja19leGlzdGVuY2UoaSx0LDEpOyAKKyAgICAgICAgIH0KKyAgICAg
ICBmb3IgKGludCB0PTA7IHQ8TlRSVVNUOyB0KyspCisgICAgICAgICB7Cisg
ICAgICAgICAgIGlmIChwYWNrYWdlW2ldLmluZm9bdF0uaW5zdGFsbCAmJiAK
KyAgICAgICAgICAgICAgIGV4dHJhW2ldLmluc3RhbGxlZF92ZXIgIT0gcGFj
a2FnZVtpXS5pbmZvW3RdLnZlcnNpb24gKQorICAgICAgICAgICAgIHsKKyAg
ICAgICAgICAgICBpZiAoc291cmNlID09IElEQ19TT1VSQ0VfTkVUSU5TVCAp
CisgICAgICAgICAgICAgICAgcGFja2FnZVtpXS5pbmZvW3RdLnBhcnRpYWxf
bGlzdF9kaXNwbGF5PTE7CisgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNl
ID09IElEQ19TT1VSQ0VfRE9XTkxPQUQgKQorICAgICAgICAgICAgICAgIHBh
Y2thZ2VbaV0uaW5mb1t0XS5wYXJ0aWFsX2xpc3RfZGlzcGxheSA9IDEtcGFj
a2FnZVtpXS5pbmZvW3RdLmluc3RhbGxfZXhpc3RzOworICAgICAgICAgICAg
IGVsc2UgaWYgKHNvdXJjZSA9PSBJRENfU09VUkNFX0NXRCApCisgCSAgICAg
ICBpZiAocGFja2FnZVtpXS5pbmZvW3RdLmluc3RhbGxfZXhpc3RzKQorICAg
ICAgICAgICAgICAgICAgIHBhY2thZ2VbaV0uaW5mb1t0XS5wYXJ0aWFsX2xp
c3RfZGlzcGxheSA9IDE7CisgICAgICAgICAgICAgICAgZWxzZSAKKyAJCSAg
cGFja2FnZVtpXS5pbmZvW3RdLnBhcnRpYWxfbGlzdF9kaXNwbGF5ID0gMDsK
KyAgICAgICAgICAgICB9CisgICAgICAgICAgIGlmIChwYWNrYWdlW2ldLmlu
Zm9bdF0ucGFydGlhbF9saXN0X2Rpc3BsYXkgKQorICAgICAgICAgICAgIGV4
dHJhW2ldLmluX3BhcnRpYWxfbGlzdCA9IDE7CisgCSAgICAKKyAgICAgICAg
IH0KKyAgICAgfQorIH0KKyAKICBzdGF0aWMgaW50CiAgYmVzdF90cnVzdCAo
aW50IHAsIGludCB0cnVzdCkKICB7CiAgICBpbnQgdDsKISAgIHQ9dHJ1c3Q7
IAohICAgICBpZiAocGFja2FnZVtwXS5pbmZvW3RdLmluc3RhbGwgJiYKISAg
ICAgICAgICgocGFja2FnZVtwXS5pbmZvW3RdLmluc3RhbGxfZXhpc3RzICYm
IHNvdXJjZSA9PSBJRENfU09VUkNFX0NXRCkgfHwKISAgICAgICAgIChwYWNr
YWdlW3BdLmluZm9bdF0uaW5zdGFsbF9leGlzdHMgPT0gMCAmJiAKISAgICAg
ICAgIHNvdXJjZSA9PSBJRENfU09VUkNFX0RPV05MT0FEKSB8fCBzb3VyY2Ug
PT0gSURDX1NPVVJDRV9ORVRJTlNUKSkKICAgICAgICByZXR1cm4gdDsKISAg
IGlmIChleHRyYVtwXS5pbnN0YWxsZWRfZmlsZSAmJiBleHRyYVtwXS5pbnN0
YWxsZWRfdmVyID09IHBhY2thZ2VbcF0uaW5mb1t0XS52ZXJzaW9uKQogICAg
ICByZXR1cm4gVFJVU1RfS0VFUDsKICAgIHJldHVybiBUUlVTVF9OT05FOwoq
KioqKioqKioqKioqKiogZGVmYXVsdF90cnVzdCAoSFdORCBoLCBpbnQgdHJ1
c3QpCioqKiAzNzEsMzc4ICoqKioKLS0tIDQ0Myw0NTMgLS0tLQogICAgaW50
IGksIHQsIGM7CiAgCisgICB3aGljaF90cnVzdD10cnVzdDsKKyAKICAgIGZv
ciAoaT0wOyBpPG5wYWNrYWdlczsgaSsrKQogICAgICB7CiAgICAgICAgdCA9
IGJlc3RfdHJ1c3QgKGksIHRydXN0KTsKICAgICAgICBleHRyYVtpXS5waWNr
ID0gMTsKKyAgICAgICBwYWNrYWdlW2ldLnRydXN0ID0gdDsKICAgICAgICBm
b3IgKGM9MDsgYzxleHRyYVtpXS5ucGljazsgYysrKQogIAlpZiAodCA9PSBl
eHRyYVtpXS5jaG9vc2VyW2NdLnRydXN0KQoqKioqKioqKioqKioqKiogc2V0
X2Z1bGxfbGlzdCAoSFdORCBoLCBpbnQgaXNmdWxsKQoqKiogMzk1LDM5OSAq
KioqCiAgICBmb3IgKGk9aj0wOyBpPG5wYWNrYWdlczsgaSsrKQogICAgICB7
CiEgICAgICAgaWYgKGlzZnVsbCB8fCBleHRyYVtpXS5pbl9wYXJ0aWFsX2xp
c3QpCiAgCXBhY2thZ2VfaW5kZXhlc1tqKytdID0gaTsKICAgICAgfQotLS0g
NDcwLDQ4MCAtLS0tCiAgICBmb3IgKGk9aj0wOyBpPG5wYWNrYWdlczsgaSsr
KQogICAgICB7CiEgICAgICAgaWYgKChpc2Z1bGwgfHwgKGV4dHJhW2ldLmlu
X3BhcnRpYWxfbGlzdCAmJiAKISAgICAgICAgICBleHRyYVtpXS5jaG9vc2Vy
W2V4dHJhW2ldLnBpY2tdLnRydXN0ICE9IFRSVVNUX0tFRVAgJiYKISAgICAg
ICAgICBleHRyYVtpXS5jaG9vc2VyW2V4dHJhW2ldLnBpY2tdLnRydXN0ICE9
IFRSVVNUX05PTkUpKSAmJiAKISAgICAgICAgICAoc291cmNlID09IElEQ19T
T1VSQ0VfRE9XTkxPQUQgfHwgc291cmNlID09IElEQ19TT1VSQ0VfTkVUSU5T
VCB8fCAKISAgICAgICAgICBwYWNrYWdlW2ldLmluZm9bVFJVU1RfUFJFVl0u
aW5zdGFsbF9leGlzdHMgfHwgCiEgICAgICAgICAgcGFja2FnZVtpXS5pbmZv
W1RSVVNUX0NVUlJdLmluc3RhbGxfZXhpc3RzIHx8IAohICAgICAgICAgIHBh
Y2thZ2VbaV0uaW5mb1tUUlVTVF9URVNUXS5pbnN0YWxsX2V4aXN0cykgKQog
IAlwYWNrYWdlX2luZGV4ZXNbaisrXSA9IGk7CiAgICAgIH0KKioqKioqKioq
KioqKioqIGJ1aWxkX2xhYmVscyAoKQoqKiogNDUwLDQ2MCAqKioqCiAgCQlD
LmNhcHRpb24gPSAiMC4wIjsKICAJICAgICAgQy50cnVzdCA9IHQ7CiEgCSAg
ICAgIGlmIChwYWNrYWdlW2ldLmluZm9bdF0uc291cmNlKQogIAkJQy5zcmNf
YXZhaWwgPSAxOwogIAkgICAgICBjKys7Ci0gCSAgICAgIC8qIHdlIGludGVu
dGlvbmFsbHkgc2tpcCBUUlVTVF9QUkVWICovCi0gCSAgICAgIGlmICh0ICE9
IFRSVVNUX1BSRVYgfHwgIWV4dHJhW2ldLmluc3RhbGxlZF92ZXIpCi0gCQll
eHRyYVtpXS5pbl9wYXJ0aWFsX2xpc3QgPSAxOwotIAogIAkgICAgfQogIAot
LS0gNTMxLDU0MSAtLS0tCiAgCQlDLmNhcHRpb24gPSAiMC4wIjsKICAJICAg
ICAgQy50cnVzdCA9IHQ7CiEgCSAgICAgIGlmIChwYWNrYWdlW2ldLmluZm9b
dF0uc291cmNlICYmIAohICAgICAgICAgICAgICAgICAgICgocGFja2FnZVtp
XS5pbmZvW3RdLnNvdXJjZV9leGlzdHMgJiYgCiEgICAgICAgICAgICAgICAg
ICAgc291cmNlPT1JRENfU09VUkNFX0NXRCkgfHwgCiEgICAgICAgICAgICAg
ICAgICAgKHBhY2thZ2VbaV0uaW5mb1t0XS5zb3VyY2VfZXhpc3RzPT0wICYm
IAohICAgICAgICAgICAgICAgICAgIHNvdXJjZT09SURDX1NPVVJDRV9ET1dO
TE9BRCkgfHwgc291cmNlPT1JRENfU09VUkNFX05FVElOU1QpKQogIAkJQy5z
cmNfYXZhaWwgPSAxOwogIAkgICAgICBjKys7CiAgCSAgICB9CiAgCioqKioq
KioqKioqKioqKiBjcmVhdGVfbGlzdHZpZXcgKEhXTkQgZGxnLCBSRUNUICpy
KQoqKiogNTMxLDUzNiAqKioqCiAgICBoZWFkZXJzW1BBQ0tBR0VfQ09MXS54
ID0gaGVhZGVyc1tTUkNfQ09MXS54ICsgaGVhZGVyc1tTUkNfQ09MXS53aWR0
aCArIEhNQVJHSU47CiAgCi0gICBzZXRfZnVsbF9saXN0IChsdiwgZnVsbF9s
aXN0KTsKICAgIGRlZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9DVVJSKTsKICAK
ICAgIFJlbGVhc2VEQyAobHYsIGRjKTsKLS0tIDYxMiw2MTkgLS0tLQogICAg
aGVhZGVyc1tQQUNLQUdFX0NPTF0ueCA9IGhlYWRlcnNbU1JDX0NPTF0ueCAr
IGhlYWRlcnNbU1JDX0NPTF0ud2lkdGggKyBITUFSR0lOOwogIAogICAgZGVm
YXVsdF90cnVzdCAobHYsIFRSVVNUX0NVUlIpOworICAgc2V0X2Z1bGxfbGlz
dCAobHYsIGZ1bGxfbGlzdCk7CisgICBzdGF0aWMgaW50IHRhW10gPSB7IElE
Q19DSE9PU0VfQ1VSUiwgMCB9OworICAgcmJzZXQgKGRsZywgdGEsIElEQ19D
SE9PU0VfQ1VSUik7CiAgCiAgICBSZWxlYXNlREMgKGx2LCBkYyk7CioqKioq
KioqKioqKioqKiBkaWFsb2dfY21kIChIV05EIGgsIGludCBpZCwgSFdORCBo
d25kY3RsCioqKiA1NDUsNTU0ICoqKioKLS0tIDYyOCw2NDAgLS0tLQogICAg
ICBjYXNlIElEQ19DSE9PU0VfUFJFVjoKICAgICAgICBkZWZhdWx0X3RydXN0
IChsdiwgVFJVU1RfUFJFVik7CisgICAgICAgc2V0X2Z1bGxfbGlzdCAobHYs
IGZ1bGxfbGlzdCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgSURDX0NI
T09TRV9DVVJSOgogICAgICAgIGRlZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9D
VVJSKTsKKyAgICAgICBzZXRfZnVsbF9saXN0IChsdiwgZnVsbF9saXN0KTsK
ICAgICAgICBicmVhazsKICAgICAgY2FzZSBJRENfQ0hPT1NFX0VYUDoKICAg
ICAgICBkZWZhdWx0X3RydXN0IChsdiwgVFJVU1RfVEVTVCk7CisgICAgICAg
c2V0X2Z1bGxfbGlzdCAobHYsIGZ1bGxfbGlzdCk7CiAgICAgICAgYnJlYWs7
CiAgICAgIGNhc2UgSURDX0NIT09TRV9GVUxMUEFSVDoKKioqKioqKioqKioq
KioqIGJhc2UgKGNoYXIgKnMpCioqKiA2MzMsNjM2ICoqKioKLS0tIDcxOSw3
NjAgLS0tLQogICAgcmV0dXJuIHJ2OwogIH0KKyAJICAgICAgCisgc3RhdGlj
IHZvaWQKKyBnZXRfcGFja2FnZV92ZXJzaW9uKGludCBwICwgaW50IHRydXN0
KQorIHsKKyAgIGNoYXIgKnYsICpkOworICAgY2hhciBpbnN0cGtnW19NQVhf
UEFUSF07CisgICBpbnN0cGtnWzBdPTA7ICAvKiBtYWtlIHN1cmUgZW1wdHkg
dG8gc3RhcnQgd2l0aCAqLworICAgaWYgKHRydXN0PT0tMSkKKyAgICAgc3Ry
Y3B5IChpbnN0cGtnLGV4dHJhW3BdLmluc3RhbGxlZF9maWxlKTsKKyAgIGVs
c2UKKyAgICAgc3RyY3B5IChpbnN0cGtnLHBhY2thZ2VbcF0uaW5mb1t0cnVz
dF0uaW5zdGFsbCk7CisgICBmb3IgKHY9YmFzZSAoaW5zdHBrZyk7ICp2OyB2
KyspCisgICAgIGlmICgqdiA9PSAnLScgJiYgaXNkaWdpdCh2WzFdKSkKKyAg
ICAgeworICAgICAgIHYrKzsKKyAgICAgICBicmVhazsKKyAgICAgfQorICAg
aWYgKCF2KQorICAgICB2ID0gaW5zdHBrZzsKKyAgIGZvciAoZD12OyAqZDsg
ZCsrKQorICAgICBpZiAoc3RybmNtcCAoZCwgIi50YXIiLCA0KSA9PSAwKQor
ICAgICAgIHsKKyAgICAgICAgICpkID0gMDsKKyAgICAgICAgIGJyZWFrOwor
ICAgICAgIH0KKyAgIGlmICh2WzBdKQorICAgICB7CisgICAgIGlmICh0cnVz
dCAhPSAtMSkKKyAgICAgICBwYWNrYWdlW3BdLmluZm9bdHJ1c3RdLnZlcnNp
b249c3RyZHVwKHYpOworICAgICBleHRyYVtwXS5pbnN0YWxsZWRfdmVyID0g
c3RyZHVwICh2KTsKKyAgICAgfQorICAgZWxzZQorICAgICB7CisgICAgIGlm
ICh0cnVzdCAhPSAtMSkKKyAgICAgICBwYWNrYWdlW3BdLmluZm9bdHJ1c3Rd
LnZlcnNpb249IjAiOworICAgICBleHRyYVtwXS5pbnN0YWxsZWRfdmVyID0g
IjAiOworICAgICB9CisgfQogIAogIHN0YXRpYyB2b2lkCioqKioqKioqKioq
KioqKiBzY2FuMiAoY2hhciAqcGF0aCwgdW5zaWduZWQgaW50IHNpemUpCioq
KiA2MzgsNjU0ICoqKioKICB7CiAgICBpbnQgaSwgdDsKISAgIGZvciAoaT0w
OyBpPG5wYWNrYWdlczsgaSsrKQohICAgICBmb3IgKHQ9MDsgdDxOVFJVU1Q7
IHQrKykKISAgICAgICBpZiAocGFja2FnZVtpXS5pbmZvW3RdLmluc3RhbGwK
ISAJICAmJiBzdHJjbXAgKGJhc2UgKHBhY2thZ2VbaV0uaW5mb1t0XS5pbnN0
YWxsKSwgYmFzZSAocGF0aCkpID09IDAKISAJICAmJiBwYWNrYWdlW2ldLmlu
Zm9bdF0uaW5zdGFsbF9zaXplID09IHNpemUpCiEgCXsKISAJICBleHRyYVtp
XS5pbnN0YWxsZWRfZmlsZSA9IHBhY2thZ2VbaV0uaW5mb1t0XS5pbnN0YWxs
OwohIAkgIGV4dHJhW2ldLmluc3RhbGxlZF9zaXplID0gc2l6ZTsKISAJICBl
eHRyYVtpXS53aGljaF9pc19pbnN0YWxsZWQgPSB0OwohIAkgIGV4dHJhW2ld
Lmluc3RhbGxlZF92ZXIgPSBwYWNrYWdlW2ldLmluZm9bdF0udmVyc2lvbjsK
ISAJICBpZiAoIWV4dHJhW2ldLmluc3RhbGxlZF92ZXIpCiEgCSAgICBleHRy
YVtpXS5pbnN0YWxsZWRfdmVyID0gIjAiOwogIAl9CiAgfQogIAotLS0gNzYy
LDgzMCAtLS0tCiAgewogICAgaW50IGksIHQ7CiEgICBpZiAoc3RyY21wKHBh
dGgrc3RybGVuKHBhdGgpLTcsIi50YXIuZ3oiKSA9PSAwKQohICAgICB7CiEg
ICAgIGNoYXIgbWFpbnBrZ1tfTUFYX1BBVEhdLHBrZ2luZm9bX01BWF9QQVRI
XSwgKnZlciwgKnZlcmluZm87CiEgICAgIHN0cmNweSAobWFpbnBrZyxwYXRo
KTsKISAgICAgbWFpbnBrZ1tzdHJsZW4obWFpbnBrZyktN10gPSAwOyAvKiBz
dHJpcCBvZmYgdGhlIHRhci5neiAqLwohICAgICBmb3IgKHZlcj1tYWlucGtn
OyAqdmVyOyB2ZXIrKykKISAgICAgICBpZiAoKCp2ZXIgPT0gJy0nIHx8ICp2
ZXIgPT0gJ18nKSAmJiBpc2RpZ2l0KHZlclsxXSkpCiEgICAgICAgICB7CiEg
ICAgICAgICAgICp2ZXIrKyA9IDA7CiEgICAgICAgICAgIGJyZWFrOwogIAl9
CisgICAgIGZvciAoaT0wOyBpPG5wYWNrYWdlczsgaSsrKQorICAgICAgIHsK
KyAgICAgICAgIHBrZ2luZm9bMF0gPSAwOworICAgICAgICAgZm9yICh0PTA7
IHQ8TlRSVVNUOyB0KyspCisgICAgICAgICAgIHsKKyAgICAgICAgICAgaWYg
KHBhY2thZ2VbaV0uaW5mb1t0XS5pbnN0YWxsKQorICAgICAgICAgICAgIHsK
KyAgICAgICAgICAgICAgIHN0cmNweSAocGtnaW5mbyxwYWNrYWdlW2ldLmlu
Zm9bdF0uaW5zdGFsbCk7CisgICAgICAgICAgICAgICBwa2dpbmZvW3N0cmxl
bihwa2dpbmZvKS03XSA9IDA7IC8qIHN0cmlwIG9mZiB0aGUgdGFyLmd6ICov
CisgICAgICAgICAgICAgICBmb3IgKHZlcmluZm89cGtnaW5mbzsgKnZlcmlu
Zm87IHZlcmluZm8rKykKKyAgICAgICAgICAgICAgICAgeyAKKyAgICAgICAg
ICAgICAgICAgICBpZiAoKCp2ZXJpbmZvID09ICctJyB8fCAqdmVyaW5mbyA9
PSAnXycpICYmIGlzZGlnaXQodmVyaW5mb1sxXSkpCisgICAgICAgICAgICAg
ICAgICAgICB7CisgICAgICAgICAgICAgICAgICAgICAgICp2ZXJpbmZvKysg
PSAwOworICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKKyAJICAgICAg
ICAgICAgfQorICAgICAgICAgICAgICAgICB9CisgICAgICAgICAgICAgYnJl
YWs7CisgICAgICAgICAgICAgfQorICAgICAgICAgICB9ICAKKyAgICAgICBp
ZiAoc3RyY21wKHBrZ2luZm8sbWFpbnBrZykgPT0gMCApCisgICAgICAgICB7
CisgICAgICAgICBmb3IgKHQ9MDsgdDxOVFJVU1Q7IHQrKykgCisgICAgICAg
ICAgIGlmIChwYWNrYWdlW2ldLmluZm9bdF0uaW5zdGFsbCAmJiAKKyAgICAg
ICAgICAgICAgIHN0cmNtcCAoYmFzZSAocGFja2FnZVtpXS5pbmZvW3RdLmlu
c3RhbGwpLCBiYXNlIChwYXRoKSkgPT0gMCkKKyAJICAgIHsKKyAgICAgICAg
ICAgICAgIHBhY2thZ2VbaV0uaW5mb1t0XS5pbnN0YWxsX2V4aXN0cz0xOwor
ICAgICAgICAgICAgICAgYnJlYWs7CisgCSAgICB9CisgICAgICAgICAgIGVs
c2UgaWYgKHQ+PU5UUlVTVC0xKQorICAgICAgICAgICAgIGlmICghcGFja2Fn
ZVtpXS5pbmZvW1RSVVNUX0NVUlJdLmluc3RhbGwpCisgICAgICAgICAgICAg
ICB7CisgICAgICAgICAgICAgICAgIHBhY2thZ2VbaV0uaW5mb1tUUlVTVF9D
VVJSXS52ZXJzaW9uID0gMDsKKyAgICAgICAgICAgICAgICAgcGFja2FnZVtp
XS5pbmZvW1RSVVNUX0NVUlJdLmluc3RhbGwgPSBzdHJkdXAocGF0aCk7Cisg
ICAgICAgICAgICAgICAgIHBhY2thZ2VbaV0uaW5mb1tUUlVTVF9DVVJSXS5p
bnN0YWxsX3NpemUgPSBzaXplOworICAgICAgICAgICAgICAgICBwYWNrYWdl
W2ldLmluZm9bVFJVU1RfQ1VSUl0uaW5zdGFsbF9leGlzdHM9MTsKKyAgICAg
ICAgICAgICAgICAgaWYgKHBhY2thZ2VbaV0uaW5mb1tUUlVTVF9DVVJSXS52
ZXJzaW9uID09IDApIAorIAkgICAgICAgICAgZ2V0X3BhY2thZ2VfdmVyc2lv
bihpLFRSVVNUX0NVUlIpOworICAgICAgICAgICAgICAgICBicmVhazsKKyAg
ICAgICAgICAgICAgIH0KKyAgICAgICAgICAgICBlbHNlIGlmICghcGFja2Fn
ZVtpXS5pbmZvW1RSVVNUX1BSRVZdLmluc3RhbGwgKQorICAgICAgICAgICAg
ICAgeworICAgICAgICAgICAgICAgICBwYWNrYWdlW2ldLmluZm9bVFJVU1Rf
UFJFVl0udmVyc2lvbiA9IDA7CisgICAgICAgICAgICAgICAgIHBhY2thZ2Vb
aV0uaW5mb1tUUlVTVF9QUkVWXS5pbnN0YWxsID0gc3RyZHVwKHBhdGgpOwor
ICAgICAgICAgICAgICAgICBwYWNrYWdlW2ldLmluZm9bVFJVU1RfUFJFVl0u
aW5zdGFsbF9zaXplID0gc2l6ZTsKKyAgICAgICAgICAgICAgICAgcGFja2Fn
ZVtpXS5pbmZvW1RSVVNUX1BSRVZdLmluc3RhbGxfZXhpc3RzPTE7CisgICAg
ICAgICAgICAgICAgIGlmIChwYWNrYWdlW2ldLmluZm9bVFJVU1RfUFJFVl0u
dmVyc2lvbiA9PSAwKSAKKyAJICAgICAgICAgIGdldF9wYWNrYWdlX3ZlcnNp
b24oaSxUUlVTVF9QUkVWKTsKKyAgICAgICAgICAgICAgICAgYnJlYWs7Cisg
ICAgICAgICAgICAgICB9CisgICAgICAgICBicmVhazsKKyAgICAgICAgIH0K
KyAgICAgICB9IAorICAgICB9CiAgfQogIAoqKioqKioqKioqKioqKiogcmVh
ZF9pbnN0YWxsZWRfZGIgKCkKKioqIDY4NSw2ODggKioqKgotLS0gODYxLDg2
NSAtLS0tCiAgCSAgICBleHRyYVtpXS5pbnN0YWxsZWRfZmlsZSA9IGluc3Q7
CiAgCSAgICBleHRyYVtpXS5pbnN0YWxsZWRfc2l6ZSA9IGluc3RzejsKKyAJ
ICAgIGdldF9wYWNrYWdlX3ZlcnNpb24oaSwgLTEpOwogIAogIAkgICAgZm9y
ICh0PTA7IHQ8TlRSVVNUOyB0KyspCioqKioqKioqKioqKioqKiByZWFkX2lu
c3RhbGxlZF9kYiAoKQoqKiogNjkyLDcyMSAqKioqCiAgCQkgIGV4dHJhW2ld
LndoaWNoX2lzX2luc3RhbGxlZCA9IHQ7CiAgCQkgIGV4dHJhW2ldLmluc3Rh
bGxlZF92ZXIgPSBwYWNrYWdlW2ldLmluZm9bdF0udmVyc2lvbjsKICAJCSAg
YnJlYWs7CiAgCQl9CiAgCiAgCSAgICBpZiAoZXh0cmFbaV0uaW5zdGFsbGVk
X3ZlciA9PSAwKSAvKiBzdGlsbCAqLwohIAkgICAgICB7CiEgCQljaGFyICp2
LCAqZDsKISAJCWZvciAodj1iYXNlIChpbnN0KTsgKnY7IHYrKykKISAJCSAg
aWYgKCp2ID09ICctJyAmJiBpc2RpZ2l0KHZbMV0pKQohIAkJICAgIHsKISAJ
CSAgICAgIHYrKzsKISAJCSAgICAgIGJyZWFrOwohIAkJICAgIH0KISAJCWlm
ICghdikKISAJCSAgdiA9IGluc3Q7CiEgCQlmb3IgKGQ9djsgKmQ7IGQrKykK
ISAJCSAgaWYgKHN0cm5jbXAgKGQsICIudGFyIiwgNCkgPT0gMCkKISAJCSAg
ICB7CiEgCQkgICAgICAqZCA9IDA7CiEgCQkgICAgICBicmVhazsKISAJCSAg
ICB9CiEgCQlpZiAodlswXSkKISAJCSAgZXh0cmFbaV0uaW5zdGFsbGVkX3Zl
ciA9IHN0cmR1cCAodik7CiEgCQllbHNlCiEgCQkgIGV4dHJhW2ldLmluc3Rh
bGxlZF92ZXIgPSAiMCI7CiEgCSAgICAgIH0KISAJICAgIGJyZWFrOwogIAkg
IH0KICAgICAgfQotLS0gODY5LDg4MCAtLS0tCiAgCQkgIGV4dHJhW2ldLndo
aWNoX2lzX2luc3RhbGxlZCA9IHQ7CiAgCQkgIGV4dHJhW2ldLmluc3RhbGxl
ZF92ZXIgPSBwYWNrYWdlW2ldLmluZm9bdF0udmVyc2lvbjsKKyAJICAgICAg
ICAgIGlmIChleHRyYVtpXS5pbnN0YWxsZWRfdmVyID09IDApIC8qIHN0aWxs
ICovCisgCQkgICAgZ2V0X3BhY2thZ2VfdmVyc2lvbihpLHQpOwogIAkJICBi
cmVhazsKICAJCX0KICAKICAJICAgIGlmIChleHRyYVtpXS5pbnN0YWxsZWRf
dmVyID09IDApIC8qIHN0aWxsICovCiEgCSAgICAgIGdldF9wYWNrYWdlX3Zl
cnNpb24oaSwgLTEpOwohICAgICAgICAgICAgIGJyZWFrOwogIAkgIH0KICAg
ICAgfQoqKioqKioqKioqKioqKiogZG9fY2hvb3NlIChISU5TVEFOQ0UgaCkK
KioqIDc0OSw3NjAgKioqKgogICAgbWVtc2V0IChleHRyYSwgMCwgbnBhY2th
Z2VzICogc2l6ZW9mIChFeHRyYVBhY2thZ2VJbmZvKSk7CiAgICBmb3IgKGk9
MDsgaTxucGFja2FnZXM7IGkrKykKISAgICAgZXh0cmFbaV0ud2hpY2hfaXNf
aW5zdGFsbGVkID0gLTE7CiAgCiAgICByZWdpc3Rlcl93aW5kb3dzIChoKTsK
ICAKISAgIGlmIChzb3VyY2UgPT0gSURDX1NPVVJDRV9ET1dOTE9BRCkKICAg
ICAgc2Nhbl9kb3dubG9hZGVkX2ZpbGVzICgpOwohICAgZWxzZQohICAgICBy
ZWFkX2luc3RhbGxlZF9kYiAoKTsKICAgIGJ1aWxkX2xhYmVscyAoKTsKICAK
LS0tIDkwOCw5MzEgLS0tLQogICAgbWVtc2V0IChleHRyYSwgMCwgbnBhY2th
Z2VzICogc2l6ZW9mIChFeHRyYVBhY2thZ2VJbmZvKSk7CiAgICBmb3IgKGk9
MDsgaTxucGFja2FnZXM7IGkrKykKISAgICAgewohICAgICAgIGV4dHJhW2ld
LndoaWNoX2lzX2luc3RhbGxlZCA9IC0xOwohICAgICAgIGV4dHJhW2ldLmlu
X3BhcnRpYWxfbGlzdCA9IDA7CiEgICAgICAgZXh0cmFbaV0ucGljayA9IDE7
CiEgICAgICAgZXh0cmFbaV0uY2hvb3NlcltleHRyYVtpXS5waWNrXS50cnVz
dCA9IFRSVVNUX05PTkU7CiEgCWZvciAoaW50IHQ9MDsgdDxOVFJVU1Q7IHQr
KykKISAgICAgICAgICAgewohICAgICAgICAgICBwYWNrYWdlW2ldLmluZm9b
dF0ucGFydGlhbF9saXN0X2Rpc3BsYXk9MDsKISAgICAgICAgICAgcGFja2Fn
ZVtpXS5pbmZvW3RdLmluc3RhbGxfZXhpc3RzPTA7CiEgICAgICAgICAgIHBh
Y2thZ2VbaV0uaW5mb1t0XS5zb3VyY2VfZXhpc3RzPTA7CiEgICAgICAgICAg
IH0KISAgICAgfQogIAogICAgcmVnaXN0ZXJfd2luZG93cyAoaCk7CiAgCiEg
ICBpZiAoc291cmNlID09IElEQ19TT1VSQ0VfRE9XTkxPQUQgfHwgc291cmNl
ID09IElEQ19TT1VSQ0VfQ1dEKQogICAgICBzY2FuX2Rvd25sb2FkZWRfZmls
ZXMgKCk7CiEgICAgIAohICAgcmVhZF9pbnN0YWxsZWRfZGIgKCk7CiEgICBz
ZXRfZXhpc3RlbmNlICgpOwogICAgYnVpbGRfbGFiZWxzICgpOwogIAoqKioq
KioqKioqKioqKiogZG9fY2hvb3NlIChISU5TVEFOQ0UgaCkKKioqIDc4NCw3
ODggKioqKgogIAljYXNlIFRSVVNUX05PTkU6CiAgCWRlZmF1bHQ6CiEgCSAg
cGFja2FnZVtpXS5hY3Rpb24gPSBBQ1RJT05fU0FNRTsKICAJICBicmVhazsK
ICAJfQotLS0gOTU1LDk1OSAtLS0tCiAgCWNhc2UgVFJVU1RfTk9ORToKICAJ
ZGVmYXVsdDoKISAgICAgICAgICAgcGFja2FnZVtpXS5hY3Rpb24gPSBBQ1RJ
T05fU0FNRTsKICAJICBicmVhazsKICAJfQoqKioqKioqKioqKioqKiogZG9f
Y2hvb3NlIChISU5TVEFOQ0UgaCkKKioqIDgwNCw4MjAgKioqKgogIAkJCSAg
ICA6IChwYWNrYWdlW2ldLmFjdGlvbiA9PSBBQ1RJT05fRVJST1IpID8gImVy
cm9yIgogIAkJCSAgICA6ICJ1bmtub3duIik7CiAgCiEgICAgICAgbG9nIChM
T0dfQkFCQkxFLCAiWyVzXSBhY3Rpb249JXMgdHJ1c3Q9JXMgc3JjPyAlcyIs
IHBhY2thZ2VbaV0ubmFtZSwgYWN0aW9uLCB0cnVzdCwKISAJICAgcGFja2Fn
ZVtpXS5zcmNhY3Rpb24gPT0gU1JDQUNUSU9OX05PID8gIm5vIiA6ICJ5ZXMi
KTsKICAgICAgICBmb3IgKGludCB0PTA7IHQ8TlRSVVNUOyB0KyspCiAgCXsK
ICAJICBpZiAocGFja2FnZVtpXS5pbmZvW3RdLmluc3RhbGwpCiEgCSAgICBs
b2cgKExPR19CQUJCTEUsICJbJXNdIHZlciAlcyBpbnN0ICVzICVkIHNyYyAl
cyAlZCIsCiAgCQkgaW5mb3NbdF0sCiAgCQkgcGFja2FnZVtpXS5pbmZvW3Rd
LnZlcnNpb24gPzogIihub25lKSIsCiAgCQkgcGFja2FnZVtpXS5pbmZvW3Rd
Lmluc3RhbGwgPzogIihub25lKSIsCiAgCQkgcGFja2FnZVtpXS5pbmZvW3Rd
Lmluc3RhbGxfc2l6ZSwKICAJCSBwYWNrYWdlW2ldLmluZm9bdF0uc291cmNl
ID86ICIobm9uZSkiLAohIAkJIHBhY2thZ2VbaV0uaW5mb1t0XS5zb3VyY2Vf
c2l6ZSk7CiAgCX0KICAgICAgfQotLS0gOTc1LDk5OSAtLS0tCiAgCQkJICAg
IDogKHBhY2thZ2VbaV0uYWN0aW9uID09IEFDVElPTl9FUlJPUikgPyAiZXJy
b3IiCiAgCQkJICAgIDogInVua25vd24iKTsKKyAgICAgICBjb25zdCBjaGFy
ICppbnN0YWxsZWQgPSAoKGV4dHJhW2ldLndoaWNoX2lzX2luc3RhbGxlZCA9
PSAtMSkgPyAibm9uZSIKKyAJCQkgICA6IChleHRyYVtpXS53aGljaF9pc19p
bnN0YWxsZWQgPT0gVFJVU1RfUFJFVikgPyAicHJldiIKKyAJCQkgICA6IChl
eHRyYVtpXS53aGljaF9pc19pbnN0YWxsZWQgPT0gVFJVU1RfQ1VSUikgPyAi
Y3VyciIKKyAJCQkgICA6IChleHRyYVtpXS53aGljaF9pc19pbnN0YWxsZWQg
PT0gVFJVU1RfVEVTVCkgPyAidGVzdCIKKyAJCQkgICA6ICJ1bmtub3duIik7
CisgICAgICAgY29uc3QgY2hhciAqcGFydGlhbF9saXN0ID0gKChleHRyYVtp
XS5pbl9wYXJ0aWFsX2xpc3QgPT0gMSkgPyAieWVzIiA6ICJubyIpOwogIAoh
ICAgICAgIGxvZyAoTE9HX0JBQkJMRSwgIlslc10gYWN0aW9uPSVzIHRydXN0
PSVzIGluc3RhbGxlZD0lcyBwYXJ0aWFsX2xpc3Q9JXMgc3JjPz0lcyIsIHBh
Y2thZ2VbaV0ubmFtZSwgYWN0aW9uLCB0cnVzdCxpbnN0YWxsZWQscGFydGlh
bF9saXN0LHBhY2thZ2VbaV0uc3JjYWN0aW9uID09IFNSQ0FDVElPTl9OTyA/
ICJubyIgOiAieWVzIik7CiAgICAgICAgZm9yIChpbnQgdD0wOyB0PE5UUlVT
VDsgdCsrKQogIAl7CiAgCSAgaWYgKHBhY2thZ2VbaV0uaW5mb1t0XS5pbnN0
YWxsKQohIAkgICAgbG9nIChMT0dfQkFCQkxFLCAiICAgICBbJXNdIHZlcj0l
cyBwYXJ0aWFsX2xpc3Q9JXMgXHJcbiAgICAgICAgICAgIGluc3Q9JXMgJWQg
ZXhpc3RzPSVzIFxyXG4gICAgICAgICAgICBzcmM9JXMgJWQgZXhpc3RzPSVz
IiwKICAJCSBpbmZvc1t0XSwKICAJCSBwYWNrYWdlW2ldLmluZm9bdF0udmVy
c2lvbiA/OiAiKG5vbmUpIiwKKyAJCSAocGFja2FnZVtpXS5pbmZvW3RdLnBh
cnRpYWxfbGlzdF9kaXNwbGF5ID09IDEgKSA/ICJ5ZXMiOiJubyIsCiAgCQkg
cGFja2FnZVtpXS5pbmZvW3RdLmluc3RhbGwgPzogIihub25lKSIsCiAgCQkg
cGFja2FnZVtpXS5pbmZvW3RdLmluc3RhbGxfc2l6ZSwKKyAJCSAocGFja2Fn
ZVtpXS5pbmZvW3RdLmluc3RhbGxfZXhpc3RzID09IDEpID8gInllcyI6Im5v
IiwKICAJCSBwYWNrYWdlW2ldLmluZm9bdF0uc291cmNlID86ICIobm9uZSki
LAohIAkJIHBhY2thZ2VbaV0uaW5mb1t0XS5zb3VyY2Vfc2l6ZSwKISAJCSAo
cGFja2FnZVtpXS5pbmZvW3RdLnNvdXJjZV9leGlzdHMgPT0gMSkgPyAieWVz
Ijoibm8iKTsKICAJfQogICAgICB9CkluZGV4OiBpbmkuaAo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2Np
bnN0YWxsL2luaS5oLHYKcmV0cmlldmluZyByZXZpc2lvbiAyLjQKZGlmZiAt
cCAtMiAtcjIuNCBpbmkuaAoqKiogaW5pLmgJMjAwMC8xMS8wOSAwMTo0MDox
NQkyLjQKLS0tIGluaS5oCTIwMDEvMDIvMDggMDM6MTE6NDkKKioqKioqKioq
KioqKioqIHR5cGVkZWYgc3RydWN0IHsKKioqIDUyLDU3ICoqKioKLS0tIDUy
LDYwIC0tLS0KICAgICAgY2hhciAqaW5zdGFsbDsJLyogZmlsZSBuYW1lIHRv
IGluc3RhbGwgKi8KICAgICAgaW50IGluc3RhbGxfc2l6ZTsJLyogaW4gYnl0
ZXMgKi8KKyAgICAgaW50IGluc3RhbGxfZXhpc3RzOyAvKiBpbnN0YWxsIGZp
bGUgZXhpc3RzIG9uIGRpc2sgKi8KICAgICAgY2hhciAqc291cmNlOwkvKiBz
b3VyY2VzIGZvciBpbnN0YWxsZWQgYmluYXJpZXMgKi8KICAgICAgaW50IHNv
dXJjZV9zaXplOwkvKiBpbiBieXRlcyAqLworICAgICBpbnQgc291cmNlX2V4
aXN0czsgIC8qIHNvdXJjZSBmaWxlIGV4aXN0cyBvbiBkaXNrICovCisgICAg
IGludCBwYXJ0aWFsX2xpc3RfZGlzcGxheTsvKiBkaXNwbGF5IHRoaXMgdmVy
c2lvbiBpbiBwYXJ0aWFsIGxpc3QgKi8KICAgIH0gaW5mb1tOVFJVU1QrMV07
CS8qICsxIGZvciBUUlVTVF9VTktOT1dOICovCiAgfSBQYWNrYWdlOwpJbmRl
eDogcmVzLnJjCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9j
dnMvc3JjL3NyYy93aW5zdXAvY2luc3RhbGwvcmVzLnJjLHYKcmV0cmlldmlu
ZyByZXZpc2lvbiAyLjExCmRpZmYgLXAgLTIgLXIyLjExIHJlcy5yYwoqKiog
cmVzLnJjCTIwMDAvMTIvMjYgMjM6MTU6NTYJMi4xMQotLS0gcmVzLnJjCTIw
MDEvMDIvMDggMDM6MTE6NTMKKioqKioqKioqKioqKioqIEJFR0lOCioqKiAy
MzMsMjM5ICoqKioKICAgICAgICAgICAgICAgICAgICAgIElEQ19TVEFUSUMs
NjUsMTcwLDIyMCw4CiAgICAgIFBVU0hCVVRUT04gICAgICAiRnVsbC9QYXJ0
IixJRENfQ0hPT1NFX0ZVTExQQVJULDI1MCw1LDM1LDEwCiEgICAgIFBVU0hC
VVRUT04gICAgICAiRXhwIixJRENfQ0hPT1NFX0VYUCwyMTUsNSwyNSwxMAoh
ICAgICBQVVNIQlVUVE9OICAgICAgIkN1cnIiLElEQ19DSE9PU0VfQ1VSUiwx
OTAsNSwyNSwxMAohICAgICBQVVNIQlVUVE9OICAgICAgIlByZXYiLElEQ19D
SE9PU0VfUFJFViwxNjUsNSwyNSwxMAogICAgICBERUZQVVNIQlVUVE9OICAg
IiZOZXh0IC0tPiIsSURPSywxNzUsMTg1LDQ1LDE1CiAgICAgIFBVU0hCVVRU
T04gICAgICAiQ2FuY2VsIixJRENBTkNFTCwyNDAsMTg1LDQ1LDE1Ci0tLSAy
MzMsMjM5IC0tLS0KICAgICAgICAgICAgICAgICAgICAgIElEQ19TVEFUSUMs
NjUsMTcwLDIyMCw4CiAgICAgIFBVU0hCVVRUT04gICAgICAiRnVsbC9QYXJ0
IixJRENfQ0hPT1NFX0ZVTExQQVJULDI1MCw1LDM1LDEwCiEgICAgIENPTlRS
T0wgICAgICAgICAiRXhwIixJRENfQ0hPT1NFX0VYUCwiQnV0dG9uIixCU19B
VVRPUkFESU9CVVRUT04gfCBXU19HUk9VUCwyMTUsNSwyNSwxMAohICAgICBD
T05UUk9MICAgICAgICAgIkN1cnIiLElEQ19DSE9PU0VfQ1VSUiwiQnV0dG9u
IixCU19BVVRPUkFESU9CVVRUT04sMTg5LDUsMjUsMTAKISAgICAgQ09OVFJP
TCAgICAgICAgICJQcmV2IixJRENfQ0hPT1NFX1BSRVYsIkJ1dHRvbiIsQlNf
QVVUT1JBRElPQlVUVE9OLDE2MSw1LDI3LDEwCiAgICAgIERFRlBVU0hCVVRU
T04gICAiJk5leHQgLS0+IixJRE9LLDE3NSwxODUsNDUsMTUKICAgICAgUFVT
SEJVVFRPTiAgICAgICJDYW5jZWwiLElEQ0FOQ0VMLDI0MCwxODUsNDUsMTUK

------------=_1583532846-65438-4--
