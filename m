From: "Robert Collins" <robert.collins@itdomain.com.au>
To: <cygwin-patches@cygwin.com>
Cc: <newlib@sources.redhat.com>
Subject: pthread_atfork
Date: Fri, 13 Apr 2001 05:49:00 -0000
Message-id: <025f01c0c418$0994a690$0200a8c0@lifelesswks>
X-SW-Source: 2001-q2/msg00050.html
Content-type: multipart/mixed; boundary="----------=_1583532847-65438-41"

This is a multi-part message in MIME format...

------------=_1583532847-65438-41
Content-length: 643

Here's pthread_atfork. 

Friday Apr 13 2001  Robert Collins <rbtcollins@hotmail.com>
        * fork.cc (fork): Call the pthread_atfork* functions.
        * cygwin.din: Export pthread_atfork.
        * thread.h (callback): New class.
        (MTinterface): Use it.
        * thread.cc (__pthread_atforkprepare): New function.
        (__pthread_atforkparent): New function.
        (__pthread_atforkchild): New function.
        (__pthread_atfork): New function.
        * pthread.cc (pthread_atfork): New function.

2001-04-13  Robert Collins <rbtcollins@hotmail.com>

        * libc/include/sys/unistd.h: Add pthread_atfork (Cygwin only).



------------=_1583532847-65438-41
Content-Type: text/plain; charset=us-ascii; name="atfork.ChangeLog"
Content-Disposition: inline; filename="atfork.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 582

RnJpZGF5IEFwciAxMyAyMDAxICBSb2JlcnQgQ29sbGlucyA8cmJ0Y29sbGlu
c0Bob3RtYWlsLmNvbT4KCSogZm9yay5jYyAoZm9yayk6IENhbGwgdGhlIHB0
aHJlYWRfYXRmb3JrKiBmdW5jdGlvbnMuCgkqIGN5Z3dpbi5kaW46IEV4cG9y
dCBwdGhyZWFkX2F0Zm9yay4KCSogdGhyZWFkLmggKGNhbGxiYWNrKTogTmV3
IGNsYXNzLgoJKE1UaW50ZXJmYWNlKTogVXNlIGl0LgoJKiB0aHJlYWQuY2Mg
KF9fcHRocmVhZF9hdGZvcmtwcmVwYXJlKTogTmV3IGZ1bmN0aW9uLgoJKF9f
cHRocmVhZF9hdGZvcmtwYXJlbnQpOiBOZXcgZnVuY3Rpb24uCgkoX19wdGhy
ZWFkX2F0Zm9ya2NoaWxkKTogTmV3IGZ1bmN0aW9uLgoJKF9fcHRocmVhZF9h
dGZvcmspOiBOZXcgZnVuY3Rpb24uCgkqIHB0aHJlYWQuY2MgKHB0aHJlYWRf
YXRmb3JrKTogTmV3IGZ1bmN0aW9uLgo=

------------=_1583532847-65438-41
Content-Type: text/x-diff; charset=us-ascii; name="atfork.patch"
Content-Disposition: inline; filename="atfork.patch"
Content-Transfer-Encoding: base64
Content-Length: 9350

SW5kZXg6IGZvcmsuY2MKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmls
ZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jeWd3aW4vZm9yay5jYyx2CnJldHJp
ZXZpbmcgcmV2aXNpb24gMS40MgpkaWZmIC11IC1wIC1yMS40MiBmb3JrLmNj
Ci0tLSBmb3JrLmNjCTIwMDEvMDMvMTggMDM6MzQ6MDUJMS40MgorKysgZm9y
ay5jYwkyMDAxLzA0LzEzIDEyOjM1OjAyCkBAIC02NDAsNiArNjQwLDkgQEAg
Zm9yayAoKQogICAgICAgcmV0dXJuIC0xOwogICAgIH0KIAorICAvKiBjYWxs
IHRoZSBwdGhyZWFkX2F0Zm9yayBwcmVwYXJlIGZ1bmN0aW9ucyAqLworICBf
X3B0aHJlYWRfYXRmb3JrcHJlcGFyZSgpOworCiAgIHZvaWQgKmVzcDsKICAg
X19hc20gKCJtb3ZsICUlZXNwLCUwIjogIj1yIiAoZXNwKSk7CiAKQEAgLTY1
MCw5ICs2NTMsMTUgQEAgZm9yayAoKQogICBpbnQgcmVzID0gc2V0am1wIChj
aC5qbXApOwogCiAgIGlmIChyZXMpCi0gICAgcmVzID0gZm9ya19jaGlsZCAo
Z3JvdXBlZC5oUGFyZW50LCBncm91cGVkLmZpcnN0X2RsbCwgZ3JvdXBlZC5s
b2FkX2RsbHMpOworICAgIHsKKyAgICAgIHJlcyA9IGZvcmtfY2hpbGQgKGdy
b3VwZWQuaFBhcmVudCwgZ3JvdXBlZC5maXJzdF9kbGwsIGdyb3VwZWQubG9h
ZF9kbGxzKTsKKyAgICAgIF9fcHRocmVhZF9hdGZvcmtjaGlsZCgpOworICAg
IH0KICAgZWxzZQotICAgIHJlcyA9IGZvcmtfcGFyZW50IChlc3AsIGdyb3Vw
ZWQuaFBhcmVudCwgZ3JvdXBlZC5maXJzdF9kbGwsIGdyb3VwZWQubG9hZF9k
bGxzLCBjaCk7CisgICAgeworICAgICAgcmVzID0gZm9ya19wYXJlbnQgKGVz
cCwgZ3JvdXBlZC5oUGFyZW50LCBncm91cGVkLmZpcnN0X2RsbCwgZ3JvdXBl
ZC5sb2FkX2RsbHMsIGNoKTsKKyAgICAgIF9fcHRocmVhZF9hdGZvcmtwYXJl
bnQoKTsKKyAgICB9CiAKICAgTUFMTE9DX0NIRUNLOwogICBzeXNjYWxsX3By
aW50ZiAoIiVkID0gZm9yaygpIiwgcmVzKTsKSW5kZXg6IHRocmVhZC5oCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93
aW5zdXAvY3lnd2luL3RocmVhZC5oLHYKcmV0cmlldmluZyByZXZpc2lvbiAx
LjE1CmRpZmYgLXUgLXAgLXIxLjE1IHRocmVhZC5oCi0tLSB0aHJlYWQuaAky
MDAxLzA0LzEyIDA0OjA0OjUzCTEuMTUKKysrIHRocmVhZC5oCTIwMDEvMDQv
MTMgMTI6MzU6MDIKQEAgLTMxNyw2ICszMTcsMTMgQEAgcHVibGljOgogICAg
fnNlbWFwaG9yZSAoKTsKIH07CiAKK2NsYXNzIGNhbGxiYWNrCit7CitwdWJs
aWM6CisgIHZvaWQgKCpjYikodm9pZCk7CisgIGNsYXNzIGNhbGxiYWNrICog
bmV4dDsKK307CisKIGNsYXNzIE1UaW50ZXJmYWNlCiB7CiBwdWJsaWM6CkBA
IC0zMzMsMTQgKzM0MCwyMyBAQCBwdWJsaWM6CiAgIHB0aHJlYWQgbWFpbnRo
cmVhZDsKIAogICBwdGhyZWFkX2tleV9kZXN0cnVjdG9yX2xpc3QgZGVzdHJ1
Y3RvcnM7CisgIGNhbGxiYWNrICpwdGhyZWFkX3ByZXBhcmU7CisgIGNhbGxi
YWNrICpwdGhyZWFkX2NoaWxkOworICBjYWxsYmFjayAqcHRocmVhZF9wYXJl
bnQ7CiAKICAgdm9pZCBJbml0IChpbnQpOwogCi0gICAgTVRpbnRlcmZhY2Ug
KCk6cmVlbnRfaW5kZXggKDApLCBpbmRleGFsbG9jYXRlZCAoMCkKKyAgICBN
VGludGVyZmFjZSAoKTpyZWVudF9pbmRleCAoMCksIGluZGV4YWxsb2NhdGVk
ICgwKSAKICAgeworICAgIHB0aHJlYWRfcHJlcGFyZSA9IE5VTEw7CisgICAg
cHRocmVhZF9jaGlsZCAgID0gTlVMTDsKKyAgICBwdGhyZWFkX3BhcmVudCAg
PSBOVUxMOwogICB9CiB9OwogCit2b2lkIF9fcHRocmVhZF9hdGZvcmtwcmVw
YXJlKHZvaWQpOwordm9pZCBfX3B0aHJlYWRfYXRmb3JrcGFyZW50KHZvaWQp
Owordm9pZCBfX3B0aHJlYWRfYXRmb3JrY2hpbGQodm9pZCk7CiAKIGV4dGVy
biAiQyIKIHsKQEAgLTM1MCw2ICszNjYsNyBAQCB2b2lkICp0aHJlYWRfaW5p
dF93cmFwcGVyICh2b2lkICopOwogaW50IF9fcHRocmVhZF9jcmVhdGUgKHB0
aHJlYWRfdCAqIHRocmVhZCwgY29uc3QgcHRocmVhZF9hdHRyX3QgKiBhdHRy
LAogCQkgICAgICB2b2lkICooKnN0YXJ0X3JvdXRpbmUpICh2b2lkICopLCB2
b2lkICphcmcpOwogaW50IF9fcHRocmVhZF9vbmNlIChwdGhyZWFkX29uY2Vf
dCAqLCB2b2lkICgqKSh2b2lkKSk7CitpbnQgX19wdGhyZWFkX2F0Zm9yayh2
b2lkICgqKSh2b2lkKSwgdm9pZCAoKikodm9pZCksIHZvaWQgKCopKHZvaWQp
KTsKIAogaW50IF9fcHRocmVhZF9hdHRyX2luaXQgKHB0aHJlYWRfYXR0cl90
ICogYXR0cik7CiBpbnQgX19wdGhyZWFkX2F0dHJfZGVzdHJveSAocHRocmVh
ZF9hdHRyX3QgKiBhdHRyKTsKSW5kZXg6IGN5Z3dpbi5kaW4KPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9j
eWd3aW4vY3lnd2luLmRpbix2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4yNQpk
aWZmIC11IC1wIC1yMS4yNSBjeWd3aW4uZGluCi0tLSBjeWd3aW4uZGluCTIw
MDEvMDQvMTIgMDQ6MDQ6NTMJMS4yNQorKysgY3lnd2luLmRpbgkyMDAxLzA0
LzEzIDEyOjM1OjA1CkBAIC0xMDc2LDYgKzEwNzYsNyBAQCBjeWd3aW5fYXR0
YWNoX2hhbmRsZV90b19mZAogY3lnd2luMzJfYXR0YWNoX2hhbmRsZV90b19m
ZCA9IGN5Z3dpbl9hdHRhY2hfaGFuZGxlX3RvX2ZkCiBjeWd3aW5faW50ZXJu
YWwKIGN5Z3dpbjMyX2ludGVybmFsID0gY3lnd2luX2ludGVybmFsCitwdGhy
ZWFkX2F0Zm9yawogcHRocmVhZF9hdHRyX2Rlc3Ryb3kKIHB0aHJlYWRfYXR0
cl9nZXRkZXRhY2hzdGF0ZQogcHRocmVhZF9hdHRyX2dldGluaGVyaXRzY2hl
ZApJbmRleDogdGhyZWFkLmNjCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNT
IGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAvY3lnd2luL3RocmVhZC5jYyx2
CnJldHJpZXZpbmcgcmV2aXNpb24gMS4yMgpkaWZmIC11IC1wIC1yMS4yMiB0
aHJlYWQuY2MKLS0tIHRocmVhZC5jYwkyMDAxLzA0LzEyIDA0OjA0OjUzCTEu
MjIKKysrIHRocmVhZC5jYwkyMDAxLzA0LzEzIDEyOjM1OjA3CkBAIC05MzUs
NiArOTM1LDEyNCBAQCBfX3B0aHJlYWRfdGVzdGNhbmNlbCAodm9pZCkKICAg
ICogZG9lcyBzb21ldGhpbmcqLwogfQogCisvKgorICogUmFjZXMgaW4gcHRo
cmVhZF9hdGZvcms6CisgKiBXZSBhcmUgcmFjZSBzYWZlIGluIHRoYXQgYW55
IGFkZGl0aW9ucyB0byB0aGUgbGlzdHMgYXJlIG1hZGUgdmlhIAorICogSW50
ZXJsb2NrZWRFeGNoYW5nZVBvaW50ZXIuCisgKiBIb3dldmVyLCBpZiB0aGUg
dXNlciBhcHBsaWNhdGlvbiBkb2Vzbid0IHBlcmZvcm0gc3luY3JvbmlzYXRp
b24gb2Ygc29tZSBzb3J0CisgKiBJdCdzIG5vdCBndWFyYW50ZWVkIHRoYXQg
YSBuZWFyIHNpbXVsdGFuZW91cyBjYWxsIHRvIHB0aHJlYWRfYXRmb3JrIGFu
ZCBmb3JrIAorICogd2lsbCByZXN1bHQgaW4gdGhlIG5ldyBhdGZvcmsgaGFu
ZGxlcnMgYmVpbmcgY2FsbHMuCisgKiBNb3JlIHJpZ29yb3VzIGludGVybmFs
IHN5bmNyb25pc2F0aW9uIGlzbid0IG5lZWRlZCBhcyB0aGUgdXNlciBwcm9n
cmFtIGlzbid0IAorICogZ3VhcmFudGVlaW5nIHRoZWlyIG93biBzdGF0ZS4g
CisgKgorICogYXMgZmFyIGFzIG11bHRpcGxlIGNhbGxzIHRvIHB0aHJlYWRf
YXRmb3JrLCB0aGUgd29yc3QgY2FzZSBpcyBzaW11bHRhbmVvdXMgY2FsbHMK
KyAqIHdpbGwgcmVzdWx0IGluIGFuIGluZGV0ZXJtaW5hdGUgb3JkZXIgZm9y
IHBhcmVudCBhbmQgY2hpbGQgY2FsbHMgKHdoYXQgZ2V0cyBpbnNlcnRlZAor
ICogZmlyc3QgaXNuJ3QgZ3VhcmFudGVlZC4pCisgKgorICogVGhlcmUgaXMg
b25lIHBvdGVudGlhbCByYWNlLi4uIERvZXMgdGhlIHJlc3VsdCBvZiBJbnRl
cmxvY2tlZEV4Y2hhbmdlUG9pbnRlciAKKyAqIGdldCBjb21taXR0ZWQgdG8g
dGhlIHJldHVybiBsb2NhdGlvbiBfYmVmb3JlXyBhbnkgY29udGV4dCBzd2l0
Y2hlcyBjYW4gb2NjdXI/CisgKiBJZiB5ZXMsIHdlJ3JlIHNhZmUsIGlmIG5v
LCB3ZSdyZSBub3QuCisgKi8KK3ZvaWQKK19fcHRocmVhZF9hdGZvcmtwcmVw
YXJlKHZvaWQpCit7CisgIGNhbGxiYWNrICpjYj1NVF9JTlRFUkZBQ0UtPnB0
aHJlYWRfcHJlcGFyZTsKKyAgd2hpbGUgKGNiKQorICAgIHsKKyAgICAgIGNi
LT5jYigpOworICAgICAgY2I9Y2ItPm5leHQ7CisgICAgfQorfQorCit2b2lk
IAorX19wdGhyZWFkX2F0Zm9ya3BhcmVudCh2b2lkKQoreworICBjYWxsYmFj
ayAqY2I9TVRfSU5URVJGQUNFLT5wdGhyZWFkX3BhcmVudDsKKyAgd2hpbGUg
KGNiKQorICAgIHsKKyAgICAgIGNiLT5jYigpOworICAgICAgY2I9Y2ItPm5l
eHQ7CisgICAgfQorfQorCit2b2lkCitfX3B0aHJlYWRfYXRmb3JrY2hpbGQo
dm9pZCkKK3sKKyAgY2FsbGJhY2sgKmNiPU1UX0lOVEVSRkFDRS0+cHRocmVh
ZF9jaGlsZDsKKyAgd2hpbGUgKGNiKQorICAgIHsKKyAgICAgIGNiLT5jYigp
OworICAgICAgY2I9Y2ItPm5leHQ7CisgICAgfQorfQorCisvKiBGSVhNRTog
aW1wbGVtZW50IEludGVybG9ja0V4Y2hhbmdlUG9pbnRlciBhbmQgZ2V0IHJp
ZCBvZiB0aGUgc2lsbHkgdHlwZWNhc3RzIGJlbG93CisgKi8KKyNkZWZpbmUg
SW50ZXJsb2NrZWRFeGNoYW5nZVBvaW50ZXIgSW50ZXJsb2NrZWRFeGNoYW5n
ZQorCisvKiBSZWdpc3RlciBhIHNldCBvZiBmdW5jdGlvbnMgdG8gcnVuIGJl
Zm9yZSBhbmQgYWZ0ZXIgZm9yay4gCisgKiBwcmVwYXJlIGNhbGxzIGFyZSBj
YWxsZWQgaW4gTEktRkMgb3JkZXIuCisgKiBwYXJlbnQgYW5kIGNoaWxkIGNh
bGxzIGFyZSBjYWxsZWQgaW4gRkktRkMgb3JkZXIuCisgKi8KK2ludAorX19w
dGhyZWFkX2F0Zm9yayh2b2lkICgqcHJlcGFyZSkodm9pZCksIHZvaWQgKCpw
YXJlbnQpKHZvaWQpLCB2b2lkICgqY2hpbGQpKHZvaWQpKQoreworICBjYWxs
YmFjayAqIHByZXBjYj1OVUxMLCAqIHBhcmVudGNiPU5VTEwsICogY2hpbGRj
Yj1OVUxMOworICBpZiAocHJlcGFyZSkKKyAgICB7CisgICAgICBwcmVwY2Ig
PSBuZXcgY2FsbGJhY2s7CisgICAgICBpZiAoIXByZXBjYikKKwlyZXR1cm4g
RU5PTUVNOworICAgIH0KKyAgaWYgKHBhcmVudCkKKyAgICB7CisgICAgICBw
YXJlbnRjYiA9IG5ldyBjYWxsYmFjazsKKyAgICAgIGlmICghcGFyZW50Y2Ip
CisJeworCSAgaWYgKHByZXBjYikKKwkgICAgZGVsZXRlIHByZXBjYjsKKwkg
IHJldHVybiBFTk9NRU07CisJfQorICAgIH0KKyAgaWYgKGNoaWxkKQorICAg
IHsKKyAgICAgIGNoaWxkY2IgPSBuZXcgY2FsbGJhY2s7CisgICAgICBpZiAo
IWNoaWxkY2IpCisJeworCSAgaWYgKHByZXBjYikKKwkgICAgZGVsZXRlIHBy
ZXBjYjsKKwkgIGlmIChwYXJlbnRjYikKKwkgICAgZGVsZXRlIHBhcmVudGNi
OworCSAgcmV0dXJuIEVOT01FTTsKKwl9CisgICAgfQorCisgIGlmIChwcmVw
Y2IpCisgIHsKKyAgICBwcmVwY2ItPmNiID0gcHJlcGFyZTsKKyAgICBwcmVw
Y2ItPm5leHQ9KGNhbGxiYWNrICopSW50ZXJsb2NrZWRFeGNoYW5nZVBvaW50
ZXIoKExPTkcgKikgJk1UX0lOVEVSRkFDRS0+cHRocmVhZF9wcmVwYXJlLCAo
bG9uZyBpbnQpIHByZXBjYik7CisgIH0KKyAgaWYgKHBhcmVudGNiKQorICB7
CisgICAgcGFyZW50Y2ItPmNiID0gcGFyZW50OworICAgIGNhbGxiYWNrICoq
IHQgPSAmTVRfSU5URVJGQUNFLT5wdGhyZWFkX3BhcmVudDsKKyAgICB3aGls
ZSAoKnQpCisgICAgICB0ID0gJigqdCktPm5leHQ7CisgICAgLyogdCA9IHBv
aW50ZXIgdG8gbGFzdCBuZXh0IGluIHRoZSBsaXN0ICovCisgICAgcGFyZW50
Y2ItPm5leHQ9KGNhbGxiYWNrICopSW50ZXJsb2NrZWRFeGNoYW5nZVBvaW50
ZXIoKExPTkcgKil0LCAobG9uZyBpbnQpIHBhcmVudGNiKTsKKyAgfQorICBp
ZiAoY2hpbGRjYikKKyAgeworICAgIGNoaWxkY2ItPmNiID0gY2hpbGQ7Cisg
ICAgY2FsbGJhY2sgKiogdCA9ICZNVF9JTlRFUkZBQ0UtPnB0aHJlYWRfY2hp
bGQ7CisgICAgd2hpbGUgKCp0KQorICAgICAgdCA9ICYoKnQpLT5uZXh0Owor
ICAgIC8qIHQgPSBwb2ludGVyIHRvIGxhc3QgbmV4dCBpbiB0aGUgbGlzdCAq
LworICAgIGNoaWxkY2ItPm5leHQ9KGNhbGxiYWNrICopSW50ZXJsb2NrZWRF
eGNoYW5nZVBvaW50ZXIoKExPTkcgKil0LCAobG9uZyBpbnQpIGNoaWxkY2Ip
OworICB9CisgIHJldHVybiAwOworfQorCiBpbnQKIF9fcHRocmVhZF9hdHRy
X2luaXQgKHB0aHJlYWRfYXR0cl90ICogYXR0cikKIHsKSW5kZXg6IHB0aHJl
YWQuY2MKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9z
cmMvc3JjL3dpbnN1cC9jeWd3aW4vcHRocmVhZC5jYyx2CnJldHJpZXZpbmcg
cmV2aXNpb24gMS44CmRpZmYgLXUgLXAgLXIxLjggcHRocmVhZC5jYwotLS0g
cHRocmVhZC5jYwkyMDAxLzA0LzEyIDA0OjA0OjUzCTEuOAorKysgcHRocmVh
ZC5jYwkyMDAxLzA0LzEzIDEyOjM1OjA3CkBAIC0zMCw2ICszMCwxMiBAQCBw
dGhyZWFkX29uY2UgKHB0aHJlYWRfb25jZV90ICogb25jZV9jb250CiB9CiAK
IGludAorcHRocmVhZF9hdGZvcmsodm9pZCAoKnByZXBhcmUpKHZvaWQpLCB2
b2lkICgqcGFyZW50KSh2b2lkKSwgdm9pZCAoKmNoaWxkKSh2b2lkKSkKK3sK
KyAgcmV0dXJuIF9fcHRocmVhZF9hdGZvcmsocHJlcGFyZSwgcGFyZW50LCBj
aGlsZCk7Cit9CisKK2ludAogcHRocmVhZF9hdHRyX2luaXQgKHB0aHJlYWRf
YXR0cl90ICogYXR0cikKIHsKICAgcmV0dXJuIF9fcHRocmVhZF9hdHRyX2lu
aXQgKGF0dHIpOwo=

------------=_1583532847-65438-41
Content-Type: text/plain; charset=us-ascii; name="atforknewlib.ChangeLog"
Content-Disposition: inline; filename="atforknewlib.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 159

MjAwMS0wNC0xMyAgUm9iZXJ0IENvbGxpbnMgPHJidGNvbGxpbnNAaG90bWFp
bC5jb20+CgoJKiBsaWJjL2luY2x1ZGUvc3lzL3VuaXN0ZC5oOiBBZGQgcHRo
cmVhZF9hdGZvcmsgKEN5Z3dpbiBvbmx5KS4K

------------=_1583532847-65438-41
Content-Type: text/x-diff; charset=us-ascii; name="atforknewlib.patch"
Content-Disposition: inline; filename="atforknewlib.patch"
Content-Transfer-Encoding: base64
Content-Length: 1062

SW5kZXg6IGxpYmMvaW5jbHVkZS9zeXMvdW5pc3RkLmgKPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL25ld2xpYi9saWJj
L2luY2x1ZGUvc3lzL3VuaXN0ZC5oLHYKcmV0cmlldmluZyByZXZpc2lvbiAx
LjE5CmRpZmYgLXUgLXAgLXIxLjE5IHVuaXN0ZC5oCi0tLSB1bmlzdGQuaAky
MDAxLzAzLzIwIDE5OjI3OjU2CTEuMTkKKysrIHVuaXN0ZC5oCTIwMDEvMDQv
MTMgMTI6NDU6MzUKQEAgLTY1LDYgKzY1LDkgQEAgaW50CV9FWEZVTihuaWNl
LCAoaW50IF9fbmljZV92YWx1ZSApKTsKIG9mZl90ICAgX0VYRlVOKGxzZWVr
LCAoaW50IF9fZmlsZGVzLCBvZmZfdCBfX29mZnNldCwgaW50IF9fd2hlbmNl
ICkpOwogbG9uZyAgICBfRVhGVU4ocGF0aGNvbmYsIChjb25zdCBjaGFyICpf
X3BhdGgsIGludCBfX25hbWUgKSk7CiBpbnQgICAgIF9FWEZVTihwYXVzZSwg
KHZvaWQgKSk7CisjaWZkZWYgX19DWUdXSU5fXworaW50CV9FWEZVTihwdGhy
ZWFkX2F0Zm9yaywgKHZvaWQgKCopKHZvaWQpLCB2b2lkICgqKSh2b2lkKSwg
dm9pZCAoKikodm9pZCkpKTsKKyNlbmRpZgogaW50ICAgICBfRVhGVU4ocGlw
ZSwgKGludCBfX2ZpbGRlc1syXSApKTsKIF9SRUFEX1dSSVRFX1JFVFVSTl9U
WVBFIF9FWEZVTihyZWFkLCAoaW50IF9fZmQsIHZvaWQgKl9fYnVmLCBzaXpl
X3QgX19uYnl0ZSApKTsKIGludCAgICAgX0VYRlVOKHJtZGlyLCAoY29uc3Qg
Y2hhciAqX19wYXRoICkpOwo=

------------=_1583532847-65438-41--
