From: "Robert Collins" <robert.collins@itdomain.com.au>
To: "Corinna Vinschen" <cygwin-patches@cygwin.com>
Subject: RE: updated: Categories and basic dependency handling for setup
Date: Wed, 13 Jun 2001 20:33:00 -0000
Message-id: <EA18B9FA0FE4194AA2B4CDB91F73C0EF08F065@itdomain002.itdomain.net.au>
X-SW-Source: 2001-q2/msg00294.html
Content-type: multipart/mixed; boundary="----------=_1583532848-65438-69"

This is a multi-part message in MIME format...

------------=_1583532848-65438-69
Content-length: 1198

Take 5:]

Rob

> -----Original Message-----
> From: Robert Collins 
> Sent: Thursday, June 14, 2001 10:02 AM
> To: Corinna Vinschen
> Subject: Re: updated: Categories and basic dependency 
> handling for setup
> 
> 
> Sorry - found I'd missed the list updating from the older patches :[
> 
> try this instead. (Note: the automatically included packages are added
> to the end of the list, not in alphabetical order. Thats a TODO: for
> me).
> 
> Rob
> 
> ----- Original Message -----
> From: "Robert Collins" <robert.collins@itdomain.com.au>
> To: "Corinna Vinschen" <cygwin-patches@cygwin.com>
> Sent: Thursday, June 14, 2001 9:56 AM
> Subject: Re: updated: Categories and basic dependency 
> handling for setup
> 
> 
> >
> > ----- Original Message -----
> > From: "Corinna Vinschen" <cygwin-patches@cygwin.com>
> > >
> > > Did I miss something?
> > >
> > > Corinna
> > >
> >
> > Could you try the attached updated patch - this is against current
> CVS.
> > I tried the same experiment you did - stand setup.ini, no
> installed.db,
> > added category: shell to ash. Clicking full/part shows me
> > current   new   src category  package
> >           @skip     shell     ash
> >
> >
> > Rob
> >
> 

------------=_1583532848-65438-69
Content-Type: text/x-diff; charset=us-ascii; name="depends5.patch"
Content-Disposition: inline; filename="depends5.patch"
Content-Transfer-Encoding: base64
Content-Length: 14006

PyBjYXRlZ29yeS5wYXRjaAo/IGRlcGVuZHMyLnBhdGNoCj8gZGVwZW5kczQu
cGF0Y2gKPyBkZXBlbmRzNS5wYXRjaApJbmRleDogY2hvb3NlLmNjCj09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5z
dXAvY2luc3RhbGwvY2hvb3NlLmNjLHYKcmV0cmlldmluZyByZXZpc2lvbiAy
LjI0CmRpZmYgLXUgLXAgLXIyLjI0IGNob29zZS5jYwotLS0gY2hvb3NlLmNj
CTIwMDEvMDYvMTMgMTY6MTE6MDEJMi4yNAorKysgY2hvb3NlLmNjCTIwMDEv
MDYvMTQgMDM6MzI6NDgKQEAgLTgxLDE0ICs4MSwyMCBAQCBoZWFkZXJzW10g
PSB7CiAjZGVmaW5lIE5FV19DT0wgMQogICB7ICJTcmM/IiwgNCwgMCwgMCB9
LAogI2RlZmluZSBTUkNfQ09MIDIKKyAgeyAiQ2F0ZWdvcnkiLCA4LCAwLCAw
IH0sCisjZGVmaW5lIENBVEVHT1JZX0NPTCAzCiAgIHsgIlBhY2thZ2UiLCA3
LCAwLCAwIH0sCi0jZGVmaW5lIFBBQ0tBR0VfQ09MIDMKKyNkZWZpbmUgUEFD
S0FHRV9DT0wgNAogICB7IDAsIDAsIDAsIDAgfQogfTsKICNkZWZpbmUgTlVN
X0NPTFVNTlMgKHNpemVvZiAoaGVhZGVycykgLyAoc2l6ZW9mIChoZWFkZXJz
WzBdKSkgLSAxKQogCiBpbnQgKnBhY2thZ2VfaW5kZXhlcywgbmluZGV4ZXM7
CiAKK3N0YXRpYyBpbnQgYWRkX3JlcXVpcmVkKFBhY2thZ2UgKnBrZyk7Citz
dGF0aWMgdm9pZCBzZXRfZnVsbF9saXN0IChIV05EIGgsIGludCBpc2Z1bGwp
OworCisKIHN0YXRpYyBib29sCiBpc2luc3RhbGxlZCAoUGFja2FnZSAqcGtn
LCBpbnQgdHJ1c3QpCiB7CkBAIC0xNTIsNiArMTU4LDcxIEBAIHNldF9hY3Rp
b24gKFBhY2thZ2UgKnBrZywgYm9vbCBwcmVpbmMpCiAgICAgICB9CiB9CiAK
K3N0YXRpYyBpbnQKK2FkZF9yZXF1aXJlZCAoUGFja2FnZSAqcGtnKQorewor
ICBEZXBlbmRlbmN5ICpkcDsKKyAgUGFja2FnZSAqcmVxdWlyZWQ7CisgIGlu
dCBjOworICBpbnQgY2hhbmdlZCA9IDA7CisgIGRwID0gcGtnLT5yZXF1aXJl
ZDsKKyAgc3dpdGNoIChwa2ctPmFjdGlvbikKKyAgICB7CisgICAgY2FzZSBB
Q1RJT05fVU5JTlNUQUxMOgorICAgIGNhc2UgQUNUSU9OX0VSUk9SOgorICAg
IGNhc2UgQUNUSU9OX1VOS05PV046CisgICAgY2FzZSBBQ1RJT05fU1JDX09O
TFk6CisgICAgY2FzZSBBQ1RJT05fU0tJUDoKKyAgICAgIHJldHVybiAwOwor
ICAgIGRlZmF1bHQ6CisgICAgICBicmVhazsKKyAgICB9CisgIHdoaWxlIChk
cCkKKyAgICB7CisgICAgICBpZiAoKHJlcXVpcmVkID0gZ2V0cGtnYnluYW1l
KGRwLT5wYWNrYWdlKSkgPT0gTlVMTCkKKyAgICAgICAgeworICAgICAgICAg
IGRwPWRwLT5uZXh0OworICAgICAgICAgIGNvbnRpbnVlOworICAgICAgICB9
CisgICAgICBzd2l0Y2ggKHJlcXVpcmVkLT5hY3Rpb24pCisgICAgICAgIHsK
KwljYXNlIEFDVElPTl9QUkVWOgorCWNhc2UgQUNUSU9OX0NVUlI6CisJY2Fz
ZSBBQ1RJT05fVEVTVDoKKwljYXNlIEFDVElPTl9MQVNUOgorCWNhc2UgQUNU
SU9OX1NBTUVfQ1VSUjoKKwljYXNlIEFDVElPTl9TQU1FX1RFU1Q6CisJY2Fz
ZSBBQ1RJT05fU0FNRV9QUkVWOgorCWNhc2UgQUNUSU9OX1JFRE86CisJY2Fz
ZSBBQ1RJT05fU0FNRV9MQVNUOgorCSAgLyogd2UgYXJlIGluc3RhbGxpbmcg
YSB1c2VyIHNlbGVjdGVkIHZlcnNpb24gKi8KKwkgIGJyZWFrOworCQorCWNh
c2UgQUNUSU9OX1VOSU5TVEFMTDoKKwkgIC8qIGl0J3MgYWxyZWFkeSBpbnN0
YWxsZWQgLSBsZWF2ZSBpdCAqLworCSAgcmVxdWlyZWQtPmFjdGlvbiA9IEFD
VElPTl9TS0lQOworCSAgYnJlYWs7CisJY2FzZSBBQ1RJT05fRVJST1I6CisJ
Y2FzZSBBQ1RJT05fVU5LTk9XTjoKKwljYXNlIEFDVElPTl9TUkNfT05MWToK
KwljYXNlIEFDVElPTl9TS0lQOgorCSAgLyogdGhlIGN1cnJlbnQgaW5zdGFs
bCB3aWxsIGZhaWwgKi8KKwkgIHJlcXVpcmVkLT5hY3Rpb24gPSBBQ1RJT05f
UFJFVjsgLyogdGhpcyBmaW5kIHByZXYsIHRoZW4gY3VyciwgdGhlbiB0ZXN0
LiAqLworCSAgc2V0X2FjdGlvbihyZXF1aXJlZCwgMCk7CSAgLyogd2UgbmVl
ZCBhIGZpbmRfYmVzdCB0aGF0IGdldHMgaW5zdGFsbGVkLCAqLworCSAgY2hh
bmdlZCsrOwkJCSAgLyogdGhlbiBjdXJyZW50LCB0aGVuIHByZXYsIHRoZW4g
dGVzdCAqLworCSAgLyogd2Ugc2hvdWxkIGluc2VydCB0aGUgcGFja2FnZSBp
biBhbHBoYWJldGljYWwgb3JkZXIgKi8KKwkgIHBhY2thZ2VfaW5kZXhlc1tu
aW5kZXhlcysrXSA9IHJlcXVpcmVkIC0gcGFja2FnZTsKKwkgIGJyZWFrOwor
CWRlZmF1bHQ6CisJICBsb2cgKDAsICJzaG91bGQgbmV2ZXIgZ2V0IGhlcmUg
JWRcbiIsIHJlcXVpcmVkLT5hY3Rpb24pOworCX0KKyAgICAgIGNoYW5nZWQg
Kz0gYWRkX3JlcXVpcmVkIChyZXF1aXJlZCk7CisgICAgICBkcD1kcC0+bmV4
dDsKKyAgICB9CisgIHJldHVybiBjaGFuZ2VkOworfQorCisKIGNvbnN0IGNo
YXIgKgogY2hvb3NlX2NhcHRpb24gKFBhY2thZ2UgKnBrZykKIHsKQEAgLTI0
NCw2ICszMTUsOSBAQCBwYWludCAoSFdORCBod25kKQogICAgICAgQml0Qmx0
IChoZGMsIHggKyBoZWFkZXJzW1NSQ19DT0xdLngsIGJ5LCAxMSwgMTEsCiAJ
ICAgICAgYml0bWFwX2RjLCAwLCAwLCBTUkNDT1BZKTsKIAorICAgICAgaWYg
KHBhY2thZ2VbaV0uY2F0ZWdvcnkpCisgICAgICAgVGV4dE91dCAoaGRjLCB4
ICsgaGVhZGVyc1tDQVRFR09SWV9DT0xdLngsIHIsIHBhY2thZ2VbaV0uY2F0
ZWdvcnksIHN0cmxlbiAocGFja2FnZVtpXS5jYXRlZ29yeSkpOworCiAgICAg
ICBpZiAocGFja2FnZVtpXS5zZGVzYykKIAlzID0gcGFja2FnZVtpXS5zZGVz
YzsKICAgICAgIGVsc2UKQEAgLTMzNiw3ICs0MTAsNyBAQCBsaXN0X2hzY3Jv
bGwgKEhXTkQgaHduZCwgSFdORCBoY3RsLCBVSU5UCiBzdGF0aWMgTFJFU1VM
VCBDQUxMQkFDSwogbGlzdF9jbGljayAoSFdORCBod25kLCBCT09MIGRibGNs
aywgaW50IHgsIGludCB5LCBVSU5UIGhpdENvZGUpCiB7Ci0gIGludCByOwor
ICBpbnQgcixyZWZyZXNoOwogCiAgIGlmIChuaW5kZXhlcyA9PSAwKQogICAg
IHJldHVybiAwOwpAQCAtMzU2LDE1ICs0MzAsMzcgQEAgbGlzdF9jbGljayAo
SFdORCBod25kLCBCT09MIGRibGNsaywgaW50IAogICBpZiAoeCA+PSBoZWFk
ZXJzW05FV19DT0xdLnggLSAoSE1BUkdJTiAvIDIpICYmIHggPD0gaGVhZGVy
c1tORVdfQ09MICsgMV0ueCAtIEhNQVJHSU4vMikKICAgICBzZXRfYWN0aW9u
IChwa2csIDEpOwogCisgIC8qIEFkZCBhbnkgcGFja2FnZXMgdGhhdCBhcmUg
bmVlZGVkIGJ5IHRoaXMgcGFja2FnZSAqLworICByZWZyZXNoID0gYWRkX3Jl
cXVpcmVkKHBrZyk7CisKICAgaWYgKHggPj0gaGVhZGVyc1tTUkNfQ09MXS54
IC0gSE1BUkdJTi8yICYmIHggPD0gaGVhZGVyc1tTUkNfQ09MICsgMV0ueCAt
IEhNQVJHSU4vMikKICAgICBwa2ctPnNyY3BpY2tlZCBePSAxOwogCi0gIFJF
Q1QgcmVjdDsKLSAgcmVjdC5sZWZ0ID0gaGVhZGVyc1tORVdfQ09MXS54IC0g
c2Nyb2xsX3VsY194OwotICByZWN0LnJpZ2h0ID0gaGVhZGVyc1tTUkNfQ09M
ICsgMV0ueCAtIHNjcm9sbF91bGNfeDsKLSAgcmVjdC50b3AgPSBoZWFkZXJf
aGVpZ2h0ICsgciAqIHJvd19oZWlnaHQgLSBzY3JvbGxfdWxjX3k7Ci0gIHJl
Y3QuYm90dG9tID0gcmVjdC50b3AgKyByb3dfaGVpZ2h0OwotICBJbnZhbGlk
YXRlUmVjdCAoaHduZCwgJnJlY3QsIFRSVUUpOworICBpZiAocmVmcmVzaCkK
KyAgICB7CisgICAgICBSRUNUIHI7CisgICAgICBHZXRDbGllbnRSZWN0IChs
diwgJnIpOworICAgICAgU0NST0xMSU5GTyBzaTsKKyAgICAgIG1lbXNldCAo
JnNpLCAwLCBzaXplb2YgKHNpKSk7CisgICAgICBzaS5jYlNpemUgPSBzaXpl
b2YgKHNpKTsKKyAgICAgIHNpLmZNYXNrID0gU0lGX0FMTDsKKyAgICAgIHNp
Lm5NaW4gPSAwOworCisgICAgICBzaS5uTWF4ID0gbmluZGV4ZXMgKiByb3df
aGVpZ2h0OworICAgICAgc2kublBhZ2UgPSByLmJvdHRvbSAtIGhlYWRlcl9o
ZWlnaHQ7CisgICAgICBTZXRTY3JvbGxJbmZvIChsdiwgU0JfVkVSVCwgJnNp
LCBUUlVFKTsKKworICAgICAgc2Nyb2xsX3VsY194ID0gc2Nyb2xsX3VsY195
ID0gMDsKKyAgICB9CisgIGVsc2UKKyAgICB7CisgICAgICBSRUNUIHJlY3Q7
CisgICAgICByZWN0LmxlZnQgPSBoZWFkZXJzW05FV19DT0xdLnggLSBzY3Jv
bGxfdWxjX3g7CisgICAgICByZWN0LnJpZ2h0ID0gaGVhZGVyc1tTUkNfQ09M
ICsgMV0ueCAtIHNjcm9sbF91bGNfeDsKKyAgICAgIHJlY3QudG9wID0gaGVh
ZGVyX2hlaWdodCArIHIgKiByb3dfaGVpZ2h0IC0gc2Nyb2xsX3VsY195Owor
ICAgICAgcmVjdC5ib3R0b20gPSByZWN0LnRvcCArIHJvd19oZWlnaHQ7Cisg
ICAgICBJbnZhbGlkYXRlUmVjdCAoaHduZCwgJnJlY3QsIFRSVUUpOworICAg
IH0KIH0KIAogc3RhdGljIExSRVNVTFQgQ0FMTEJBQ0sKQEAgLTQ2Niw2ICs1
NjIsOCBAQCBkZWZhdWx0X3RydXN0IChIV05EIGgsIHRydXN0cyB0cnVzdCkK
ICAgZm9yIChQYWNrYWdlICpwa2cgPSBwYWNrYWdlOyBwa2ctPm5hbWU7IHBr
ZysrKQogICAgIHsKICAgICAgIHBrZy0+YWN0aW9uID0gKGFjdGlvbnMpIHRy
dXN0OworICAgICAgaWYgKHBrZy0+Y2F0ZWdvcnkgJiYgc3RyY2FzZWNtcChw
a2ctPmNhdGVnb3J5LCAiUmVxdWlyZWQiKSkKKwlwa2ctPmFjdGlvbiA9IEFD
VElPTl9TS0lQOwogICAgICAgc2V0X2FjdGlvbiAocGtnLCAwKTsKICAgICB9
CiAgIFJFQ1QgcjsKQEAgLTU1OSw2ICs2NTcsNyBAQCBjcmVhdGVfbGlzdHZp
ZXcgKEhXTkQgZGxnLCBSRUNUICpyKQogCX0KICAgICAgIGZvciAodCA9IDE7
IHQgPCBOVFJVU1Q7IHQrKykKIAlub3RlX3dpZHRoIChkYywgcGtnLT5pbmZv
W3RdLnZlcnNpb24sIE5FV19DT0xfU0laRV9TTE9QLCBORVdfQ09MKTsKKyAg
ICAgIG5vdGVfd2lkdGggKGRjLCBwa2ctPmNhdGVnb3J5LCAwLCBDQVRFR09S
WV9DT0wpOwogICAgICAgbm90ZV93aWR0aCAoZGMsIHBrZy0+bmFtZSwgMCwg
UEFDS0FHRV9DT0wpOwogICAgICAgbm90ZV93aWR0aCAoZGMsIHBrZy0+c2Rl
c2MsIDAsIFBBQ0tBR0VfQ09MKTsKICAgICB9CkBAIC01NjgsMTAgKzY2Nywx
MyBAQCBjcmVhdGVfbGlzdHZpZXcgKEhXTkQgZGxnLCBSRUNUICpyKQogICBo
ZWFkZXJzW0NVUlJFTlRfQ09MXS54ID0gSE1BUkdJTi8yOwogICBoZWFkZXJz
W05FV19DT0xdLnggPSBoZWFkZXJzW0NVUlJFTlRfQ09MXS54ICsgaGVhZGVy
c1tDVVJSRU5UX0NPTF0ud2lkdGggKyBORVdfQ09MX1NJWkVfU0xPUCArIEhN
QVJHSU47CiAgIGhlYWRlcnNbU1JDX0NPTF0ueCA9IGhlYWRlcnNbTkVXX0NP
TF0ueCArIGhlYWRlcnNbTkVXX0NPTF0ud2lkdGggKyBITUFSR0lOOwotICBo
ZWFkZXJzW1BBQ0tBR0VfQ09MXS54ID0gaGVhZGVyc1tTUkNfQ09MXS54ICsg
aGVhZGVyc1tTUkNfQ09MXS53aWR0aCArIEhNQVJHSU47CisgIGhlYWRlcnNb
Q0FURUdPUllfQ09MXS54ID0gaGVhZGVyc1tTUkNfQ09MXS54ICsgaGVhZGVy
c1tTUkNfQ09MXS53aWR0aCArIEhNQVJHSU47CisgIGhlYWRlcnNbUEFDS0FH
RV9DT0xdLnggPSBoZWFkZXJzW0NBVEVHT1JZX0NPTF0ueCArIGhlYWRlcnNb
Q0FURUdPUllfQ09MXS53aWR0aCArIEhNQVJHSU47CiAKICAgZGVmYXVsdF90
cnVzdCAobHYsIFRSVVNUX0NVUlIpOwogICBzZXRfZnVsbF9saXN0IChsdiwg
ZnVsbF9saXN0KTsKKyAgZm9yIChQYWNrYWdlICpmb28gPSBwYWNrYWdlOyBm
b28tPm5hbWU7IGZvbysrKQorICAgIGFkZF9yZXF1aXJlZChmb28pOwogICBz
dGF0aWMgaW50IHRhW10gPSB7IElEQ19DSE9PU0VfQ1VSUiwgMCB9OwogICBy
YnNldCAoZGxnLCB0YSwgSURDX0NIT09TRV9DVVJSKTsKIApAQCAtNTg1LDE0
ICs2ODcsMjAgQEAgZGlhbG9nX2NtZCAoSFdORCBoLCBpbnQgaWQsIEhXTkQg
aHduZGN0bAogICAgIHsKICAgICBjYXNlIElEQ19DSE9PU0VfUFJFVjoKICAg
ICAgIGRlZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9QUkVWKTsKKyAgICAgIGZv
ciAoUGFja2FnZSAqZm9vID0gcGFja2FnZTsgZm9vLT5uYW1lOyBmb28rKykK
KyAgICAgICAgYWRkX3JlcXVpcmVkKGZvbyk7CiAgICAgICBzZXRfZnVsbF9s
aXN0IChsdiwgZnVsbF9saXN0KTsKICAgICAgIGJyZWFrOwogICAgIGNhc2Ug
SURDX0NIT09TRV9DVVJSOgogICAgICAgZGVmYXVsdF90cnVzdCAobHYsIFRS
VVNUX0NVUlIpOworICAgICAgZm9yIChQYWNrYWdlICpmb28gPSBwYWNrYWdl
OyBmb28tPm5hbWU7IGZvbysrKQorICAgICAgICBhZGRfcmVxdWlyZWQoZm9v
KTsKICAgICAgIHNldF9mdWxsX2xpc3QgKGx2LCBmdWxsX2xpc3QpOwogICAg
ICAgYnJlYWs7CiAgICAgY2FzZSBJRENfQ0hPT1NFX0VYUDoKICAgICAgIGRl
ZmF1bHRfdHJ1c3QgKGx2LCBUUlVTVF9URVNUKTsKKyAgICAgIGZvciAoUGFj
a2FnZSAqZm9vID0gcGFja2FnZTsgZm9vLT5uYW1lOyBmb28rKykKKyAgICAg
ICAgYWRkX3JlcXVpcmVkKGZvbyk7CiAgICAgICBzZXRfZnVsbF9saXN0IChs
diwgZnVsbF9saXN0KTsKICAgICAgIGJyZWFrOwogICAgIGNhc2UgSURDX0NI
T09TRV9GVUxMUEFSVDoKQEAgLTkzMCw5ICsxMDM4LDEwIEBAIGRvX2Nob29z
ZSAoSElOU1RBTkNFIGgpCiAJCQkgICAgICAgOiAidW5rbm93biIpOwogICAg
ICAgY29uc3QgY2hhciAqZXhjbHVkZWQgPSAocGtnLT5leGNsdWRlID8gInll
cyIgOiAibm8iKTsKIAotICAgICAgbG9nIChMT0dfQkFCQkxFLCAiWyVzXSBh
Y3Rpb249JXMgdHJ1c3Q9JXMgaW5zdGFsbGVkPSVzIGV4Y2x1ZGVkPSVzIHNy
Yz89JXMiLAorICAgICAgbG9nIChMT0dfQkFCQkxFLCAiWyVzXSBhY3Rpb249
JXMgdHJ1c3Q9JXMgaW5zdGFsbGVkPSVzIGV4Y2x1ZGVkPSVzIHNyYz89JXMi
CisJICAgImNhdGVnb3J5PSVzIiwKIAkgICBwa2ctPm5hbWUsIGFjdGlvbiwg
dHJ1c3QsIGluc3RhbGxlZCwKLQkgICBleGNsdWRlZCwgcGtnLT5zcmNwaWNr
ZWQgPyAieWVzIiA6ICJubyIpOworCSAgIGV4Y2x1ZGVkLCBwa2ctPnNyY3Bp
Y2tlZCA/ICJ5ZXMiIDogIm5vIiwgcGtnLT5jYXRlZ29yeSk7CiAgICAgICBm
b3IgKGludCB0ID0gMTsgdCA8IE5UUlVTVDsgdCsrKQogCXsKIAkgIGlmIChw
a2ctPmluZm9bdF0uaW5zdGFsbCkKSW5kZXg6IGluaS5oCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAvY2lu
c3RhbGwvaW5pLmgsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDIuOApkaWZmIC11
IC1wIC1yMi44IGluaS5oCi0tLSBpbmkuaAkyMDAxLzA2LzEzIDE2OjExOjAx
CTIuOAorKysgaW5pLmgJMjAwMS8wNi8xNCAwMzozMjo0OApAQCAtOTAsMTEg
KzkwLDIwIEBAIHR5cGVkZWYgc3RydWN0CiAgIGludCBzb3VyY2VfZXhpc3Rz
OwkvKiBzb3VyY2UgZmlsZSBleGlzdHMgb24gZGlzayAqLwogfSBJbmZvOwkJ
CS8qICsxIGZvciBUUlVTVF9VTktOT1dOICovCiAKK3R5cGVkZWYgc3RydWN0
IERlcGVuZGVuY3lfdCBEZXBlbmRlbmN5Oworc3RydWN0IERlcGVuZGVuY3lf
dAoreworICBEZXBlbmRlbmN5ICpuZXh0OyAvKiB0aGUgbmV4dCBwYWNrYWdl
IGluIHRoaXMgZGVwZW5kZW5jeSBsaXN0ICovCisgIGNoYXIgKnBhY2thZ2U7
ICAgIC8qIHRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRoYXQgaXMgZGVwZW5k
ZWQgb24gKi8KK307ICAgICAgICAgICAgICAgICAgLyogRGVwZW5kZW5jaWVz
IGNhbiBiZSB1c2VkIGZvciByZWNvbW1lbmRlZC9yZXF1aXJlZC9yZWxhdGVk
Li4uICovCisKIHR5cGVkZWYgc3RydWN0CiB7CiAgIGNoYXIgKm5hbWU7CQkv
KiBwYWNrYWdlIG5hbWUsIGxpa2UgImN5Z3dpbiIgKi8KICAgY2hhciAqc2Rl
c2M7CQkvKiBzaG9ydCBkZXNjcmlwdGlvbiAocmVwbGFjZXMgIm5hbWUiIGlm
IHByb3ZpZGVkKSAqLwogICBjaGFyICpsZGVzYzsJCS8qIGxvbmcgZGVzY3Jp
cHRpb24gKG11bHRpLWxpbmUpICovCisgIGNoYXIgKmNhdGVnb3J5OyAvKiB0
aGUgY2F0ZWdvcnkgdGhlIHBhY2thZ2UgYmVsb25ncyB0bywgbGlrZSAicmVx
dWlyZWQiIG9yICJYRnJlZTg2IiAqLworICBEZXBlbmRlbmN5ICpyZXF1aXJl
ZDsgLyogdGhlIHBhY2thZ2VzIHJlcXVpcmVkIGZvciB0aGlzIHBhY2thZ2Ug
dG8gd29yayAqLwogICBhY3Rpb25zIGFjdGlvbjsJLyogQUNUSU9OXyogLSBv
bmx5IE5FVyBhbmQgVVBHUkFERSBnZXQgaW5zdGFsbGVkICovCiAgIHRydXN0
cyB0cnVzdDsJCS8qIFRSVVNUXyogKHNlbGVjdHMgYW1vbmcgaW5mb1tdIGJl
bG93KSAqLwogICBpbnQgc3JjcGlja2VkOwkvKiBTUkNBQ1RJT05fICovCkBA
IC0xMTYsNiArMTI1LDcgQEAgZXh0ZXJuICJDIiB7CiBQYWNrYWdlICpuZXdf
cGFja2FnZSAoY2hhciAqbmFtZSk7CiB2b2lkCWluaV9pbml0IChjaGFyICpz
dHJpbmcpOwogUGFja2FnZSAqZ2V0cGtnYnluYW1lIChjb25zdCBjaGFyICpw
a2duYW1lKTsKK3ZvaWQgICAgbmV3X3JlcXVpcmVtZW50KFBhY2thZ2UgKnBh
Y2thZ2UsIGNoYXIgKmRlcGVuZHNvbik7CiAKICNpZmRlZiBfX2NwbHVzcGx1
cwogfQpJbmRleDogaW5pbGV4LmwKPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpS
Q1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jaW5zdGFsbC9pbmlsZXgu
bCx2CnJldHJpZXZpbmcgcmV2aXNpb24gMi4zCmRpZmYgLXUgLXAgLXIyLjMg
aW5pbGV4LmwKLS0tIGluaWxleC5sCTIwMDEvMDYvMTMgMTY6MTE6MDEJMi4z
CisrKyBpbmlsZXgubAkyMDAxLzA2LzE0IDAzOjMyOjQ4CkBAIC01Miw2ICs1
Miw5IEBAIFNUUglbYS16QS1aMC05Xy4vKy1dKwogInNkZXNjOiIJCXJldHVy
biBTREVTQzsKICJsZGVzYzoiCQlyZXR1cm4gTERFU0M7CiAKKyJjYXRlZ29y
eToiCQlyZXR1cm4gQ0FURUdPUlk7CisicmVxdWlyZXM6IgkJcmV0dXJuIFJF
UVVJUkVTOworCiAiYXBhdGg6IgkJcmV0dXJuIEFQQVRIOwogInBwYXRoOiIJ
CXJldHVybiBQUEFUSDsKIApJbmRleDogaW5pcGFyc2UueQo9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2Np
bnN0YWxsL2luaXBhcnNlLnksdgpyZXRyaWV2aW5nIHJldmlzaW9uIDIuNwpk
aWZmIC11IC1wIC1yMi43IGluaXBhcnNlLnkKLS0tIGluaXBhcnNlLnkJMjAw
MS8wNi8xMyAxNjoxMTowMQkyLjcKKysrIGluaXBhcnNlLnkJMjAwMS8wNi8x
NCAwMzozMjo0OApAQCAtNDUsNiArNDUsNyBAQCBleHRlcm4gaW50IHl5bGlu
ZW5vOwogCiAldG9rZW4gU1RSSU5HCiAldG9rZW4gU0VUVVBfVElNRVNUQU1Q
IFNFVFVQX1ZFUlNJT04gVkVSU0lPTiBJTlNUQUxMIFNPVVJDRSBTREVTQyBM
REVTQworJXRva2VuIENBVEVHT1JZIFJFUVVJUkVTCiAldG9rZW4gQVBBVEgg
UFBBVEggSU5DTFVERV9TRVRVUCBFWENMVURFX1BBQ0tBR0UgRE9XTkxPQURf
VVJMCiAldG9rZW4gVF9QUkVWIFRfQ1VSUiBUX1RFU1QgVF9VTktOT1dOCiAK
QEAgLTg1LDYgKzg2LDggQEAgc2ltcGxlX2xpbmUKICA6IFZFUlNJT04gU1RS
SU5HCQl7IGNwdC0+dmVyc2lvbiA9ICQyOyB9CiAgfCBTREVTQyBTVFJJTkcJ
CQl7IGNwLT5zZGVzYyA9ICQyOyB9CiAgfCBMREVTQyBTVFJJTkcJCQl7IGNw
LT5sZGVzYyA9ICQyOyB9CisgfCBDQVRFR09SWSBTVFJJTkcJCXsgY3AtPmNh
dGVnb3J5ID0gJDI7IH0KKyB8IFJFUVVJUkVTIHJlcXVpcmVzCiAgfCBJTlNU
QUxMIFNUUklORyBTVFJJTkcJeyBjcHQtPmluc3RhbGwgPSAkMjsKIAkJCQkg
IGNwdC0+aW5zdGFsbF9zaXplID0gYXRvaSgkMyk7CiAJCQkJICBpZiAoIWNw
dC0+dmVyc2lvbikKQEAgLTEwOCw2ICsxMTEsMTEgQEAgc2ltcGxlX2xpbmUK
IAkgICAgICB9CiAgOwogCityZXF1aXJlcworIDogU1RSSU5HCQkJeyBuZXdf
cmVxdWlyZW1lbnQoY3AsICQxKTsgfSByZXF1aXJlcworIHwgU1RSSU5HCQkJ
eyBuZXdfcmVxdWlyZW1lbnQoY3AsICQxKTsgfQorIDsKKwogJSUKIAogUGFj
a2FnZSAqcGFja2FnZSA9IE5VTEw7CkBAIC0xMzgsNCArMTQ2LDE2IEBAIG5l
d19wYWNrYWdlIChjaGFyICpuYW1lKQogICAgIH0KIAogICByZXR1cm4gY3A7
Cit9CisKK3ZvaWQKK25ld19yZXF1aXJlbWVudChQYWNrYWdlICpwYWNrYWdl
LCBjaGFyICpkZXBlbmRzb24pCit7CisgIERlcGVuZGVuY3kgKmRwOworICBp
ZiAoIWRlcGVuZHNvbikKKyAgICByZXR1cm47CisgIGRwID0gKERlcGVuZGVu
Y3kgKikgbWFsbG9jIChzaXplb2YgKERlcGVuZGVuY3kpKTsKKyAgZHAtPm5l
eHQgPSBjcC0+cmVxdWlyZWQ7CisgIGRwLT5wYWNrYWdlID0gZGVwZW5kc29u
OworICBjcC0+cmVxdWlyZWQgPSBkcDsKIH0K

------------=_1583532848-65438-69--
