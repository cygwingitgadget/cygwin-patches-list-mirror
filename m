Return-Path: <cygwin-patches-return-2524-listarch-cygwin-patches=sourceware.cygnus.com@cygwin.com>
Received: (qmail 5233 invoked by alias); 26 Jun 2002 19:45:11 -0000
Mailing-List: contact cygwin-patches-help@cygwin.com; run by ezmlm
Precedence: bulk
List-Subscribe: <mailto:cygwin-patches-subscribe@cygwin.com>
List-Post: <mailto:cygwin-patches@cygwin.com>
List-Archive: <http://sources.redhat.com/ml/cygwin-patches/>
List-Help: <mailto:cygwin-patches-help@cygwin.com>, <http://sources.redhat.com/ml/#faqs>
Sender: cygwin-patches-owner@cygwin.com
Received: (qmail 5212 invoked from network); 26 Jun 2002 19:45:10 -0000
Date: Thu, 27 Jun 2002 00:33:00 -0000
From: David E Euresti <davie@MIT.EDU>
To: <cygwin-patches@cygwin.com>
Subject: Patch to pass file descriptors
Message-ID: <Pine.GSO.4.30L.0206261539550.20345-600000@biohazard-cafe.mit.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-1025120707=:20345"
X-SW-Source: 2002-q2/txt/msg00507.txt.bz2

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII
Content-length: 454

Hello,
	I finally am able to send in the patch to pass file descriptors.
There's still some work to be done like adding security and such, but
otherwise it works.
There are two new files cygserver_handle.cc and cygserver_handle.h  these
go into src/winsup/cygwin

The testfd.c is a test file.  Compile and run to see a process fork and
pass a file descriptor.  It also shows how to use sendmsg to pass a
descriptor.

Feel free to comment.

Thanks,
David

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=ChangeLog
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30L.0206261545070.20345@biohazard-cafe.mit.edu>
Content-Description: 
Content-Disposition: attachment; filename=ChangeLog
Content-length: 1676

MjAwMi0wNi0xOCAgRGF2aWQgRXVyZXN0aSA8ZGF2aWVAYWx1bS5taXQuZWR1
Pg0NCg0NCgkqIE1ha2VmaWxlLmluOiBhZGQgY3lnc2VydmVyX2hhbmRsZS5v
IHRvIGN5Z3NlcnZlci5leGUuIEZpeCBmb3JtYXR0aW5nLg0NCgkqIGN5Z3Nl
cnZlci5jYzogSW5jbHVkZSBjeWdzZXJ2ZXJfaGFuZGxlLmgNDQoJKHNlcnZl
cl9yZXF1ZXN0Ojpwcm9jZXNzKSBVc2UgdGhlIG5ldyBjbGllbnRfcmVxdWVz
dF9ob2xkX2hhbmRsZQ0NCglhbmQgY2xpZW50X3JlcXVlc3RfcmVsZWFzZV9o
YW5kbGUgY29uc3RydWN0b3JzLg0NCgkqIGN5Z3NlcnZlcl9jbGllbnQuY2M6
IEluY2x1ZGUgY3lnc2VydmVyX2hhbmRsZS5oDQ0KCShjbGllbnRfcmVxdWVz
dF9ob2xkX2hhbmRsZSk6IE5ldyBjb25zdHJ1Y3Rvci4NDQoJKGNsaWVudF9y
ZXF1ZXN0X3JlbGVhc2VfaGFuZGxlKTogTmV3IGNvbnN0cnVjdG9yLg0NCgkq
IG5ldC5jYzogSW5jbHVkZSBjeWdzZXJ2ZXJfaGFuZGxlLmgNDQoJKHN0cnVj
dCBwYXNzZmQpOiBOZXcgc3RydWN0Lg0NCgkoY3lnd2luX2hhbmRsZV90b19m
ZCk6IE5ldyBmdW5jdGlvbi4NDQoJKGN5Z3dpbl9yZWN2X21zZyk6IERlY2lk
ZSB3aGV0aGVyIGZpbGUgZGVzY3JpcHRvciBpcyBiZWluZyByZWNlaXZlZC4N
DQoJQ2FsbCBjeWd3aW5fcmVjdiBpZiBubyBtc2dfbmFtZSBpcyBwYXNzZWQs
IGluc3RlYWQgb2YgY3lnd2luX3JlY3Zmcm9tLg0NCglJZiBmaWxlIGRlc2Ny
aXB0b3IgaXMgYmVpbmcgcmVjZWl2ZWQsIGNhbGwgY3lnc2VydmVyX3JlbGVh
c2VfaGFuZGxlIGFuZCBjeWd3aW5faGFuZGxlX3RvX2ZkLg0NCglGaXggZm9y
bWF0dGluZy4NDQoJKGN5Z3dpbl9zZW5kbXNnKTogRGVjaWRlIHdoZXRoZXIg
ZmlsZSBkZXNjcmlwdG9yIG5lZWRzIHRvIGJlIHNlbnQuDQ0KCUlmIGZpbGUg
ZGVzY3JpcHRvciB3aWxsIGJlIHBhc3NlZCwgY2FsbCBjeWdzZXJ2ZXJfaG9s
ZF9oYW5kbGUuDQ0KCUNhbGwgY3lnd2luX3NlbmQgaWYgbm8gbXNnX25hbWUg
aXMgcGFzc2VkLCBpbnN0ZWFkIG9mIGN5Z3dpbl9zZW5kdG8uICBGaXggZm9y
bWF0dGluZw0NCgkqIGluY2x1ZGUvY3lnd2luL2N5Z3NlcnZlci5oIChjbGll
bnRfcmVxdWVzdF9ob2xkX2hhbmRsZSk6IE5ldyBjbGFzcy4NDQoJKGNsaWVu
dF9yZXF1ZXN0X3JlbGVhc2VfaGFuZGxlKTogTmV3IGNsYXNzLg0NCgkqIGN5
Z3NlcnZlcl9oYW5kbGUuY2M6IE5ldyBmaWxlLg0NCgkqIGN5Z3NlcnZlcl9o
YW5kbGUuaDogTmV3IGZpbGUuDQ0K

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="cygserver_handle.h"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30L.0206261545071.20345@biohazard-cafe.mit.edu>
Content-Description: 
Content-Disposition: attachment; filename="cygserver_handle.h"
Content-length: 1619

LyogY3lnc2VydmVyX2hhbmRsZS5oDQ0KDQ0KICAgQ29weXJpZ2h0IDIwMDEs
IDIwMDIgUmVkIEhhdCBJbmMuDQ0KICAgV3JpdHRlbiBieSBEYXZpZCBFdXJl
c3RpIDxkYXZpZUBhbHVtLm1pdC5lZHU+DQ0KDQ0KVGhpcyBmaWxlIGlzIHBh
cnQgb2YgQ3lnd2luLg0NCg0NClRoaXMgc29mdHdhcmUgaXMgYSBjb3B5cmln
aHRlZCB3b3JrIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUNDQpD
eWd3aW4gbGljZW5zZS4gIFBsZWFzZSBjb25zdWx0IHRoZSBmaWxlICJDWUdX
SU5fTElDRU5TRSIgZm9yDQ0KZGV0YWlscy4gKi8NDQoNDQojaW5jbHVkZSA8
c3lzL3R5cGVzLmg+DQ0KI2luY2x1ZGUgImN5Z3dpbi9jeWdzZXJ2ZXJfdHJh
bnNwb3J0LmgiDQ0KI2luY2x1ZGUgImN5Z3dpbi9jeWdzZXJ2ZXIuaCINDQoN
DQpjbGFzcyBjbGllbnRfcmVxdWVzdF9ob2xkX2hhbmRsZTogcHVibGljIGNs
aWVudF9yZXF1ZXN0DQ0Kew0NCiBwdWJsaWM6DQ0KI2lmbmRlZiBfX0lOU0lE
RV9DWUdXSU5fXw0NCiAgdmlydHVhbCB2b2lkIHNlcnZlICh0cmFuc3BvcnRf
bGF5ZXJfYmFzZSAqY29ubiwgY2xhc3MgcHJvY2Vzc19jYWNoZSAqY2FjaGUp
Ow0NCiNlbmRpZg0NCiAgY2xpZW50X3JlcXVlc3RfaG9sZF9oYW5kbGUoKTsN
DQogIGNsaWVudF9yZXF1ZXN0X2hvbGRfaGFuZGxlKERXT1JEIHBpZCwgSEFO
RExFIGZyb21faGFuZGxlKTsNDQogIHN0cnVjdCByZXF1ZXN0X2hvbGRfaGFu
ZGxlIHJlcTsNDQogIEhBTkRMRSBjeWdzZXJ2ZXJfaGFuZGxlKCkge3JldHVy
biByZXEuY3lnc2VydmVyX2hhbmRsZTt9DQ0KfTsNDQoNDQpjbGFzcyBjbGll
bnRfcmVxdWVzdF9yZWxlYXNlX2hhbmRsZTogcHVibGljIGNsaWVudF9yZXF1
ZXN0DQ0Kew0NCiBwdWJsaWM6DQ0KI2lmbmRlZiBfX0lOU0lERV9DWUdXSU5f
Xw0NCiAgdmlydHVhbCB2b2lkIHNlcnZlICh0cmFuc3BvcnRfbGF5ZXJfYmFz
ZSAqY29ubiwgY2xhc3MgcHJvY2Vzc19jYWNoZSAqY2FjaGUpOw0NCiNlbmRp
Zg0NCiAgY2xpZW50X3JlcXVlc3RfcmVsZWFzZV9oYW5kbGUoKTsNDQogIGNs
aWVudF9yZXF1ZXN0X3JlbGVhc2VfaGFuZGxlKERXT1JEIHBpZCwgSEFORExF
IGN5Z3dpbl9oYW5kbGUpOw0NCiAgc3RydWN0IHJlcXVlc3RfcmVsZWFzZV9o
YW5kbGUgcmVxOw0NCiAgSEFORExFIHRvX2hhbmRsZSgpIHtyZXR1cm4gcmVx
LnRvX2hhbmRsZTt9DQ0KfTsNDQoNDQo=

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="cygserver_handle.cc"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30L.0206261545072.20345@biohazard-cafe.mit.edu>
Content-Description: 
Content-Disposition: attachment; filename="cygserver_handle.cc"
Content-length: 5027

LyogY3lnc2VydmVyX2hhbmRsZS5jYzogSGFuZGxlIHBhc3NpbmcgaW50ZXJm
YWNlIGZvciBDeWd3aW4NDQoNDQpDb3B5cmlnaHQgMjAwMSwgMjAwMiBSZWQg
SGF0LCBJbmMuDQ0KDQ0KT3JpZ2luYWxseSB3cml0dGVuIGJ5IERhdmlkIEV1
cmVzdGkgPGRhdmllQGFsdW0ubWl0LmVkdT4NDQoNDQpUaGlzIGZpbGUgaXMg
cGFydCBvZiBDeWd3aW4uDQ0KDQ0KVGhpcyBzb2Z0d2FyZSBpcyBhIGNvcHly
aWdodGVkIHdvcmsgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZQ0N
CkN5Z3dpbiBsaWNlbnNlLiAgUGxlYXNlIGNvbnN1bHQgdGhlIGZpbGUgIkNZ
R1dJTl9MSUNFTlNFIiBmb3INDQpkZXRhaWxzLiAqLw0NCg0NCiNpZmRlZiBf
X09VVFNJREVfQ1lHV0lOX18NDQojdW5kZWYgX19JTlNJREVfQ1lHV0lOX18N
DQojZWxzZQ0NCiNpbmNsdWRlICJ3aW5zdXAuaCINDQojZW5kaWYNDQoNDQoj
aWZuZGVmIF9fSU5TSURFX0NZR1dJTl9fDQ0KI2RlZmluZSBERUJVRyAxDQ0K
I2RlZmluZSBzeXN0ZW1fcHJpbnRmIHByaW50Zg0NCiNkZWZpbmUgZGVidWdf
cHJpbnRmIGlmIChERUJVRykgcHJpbnRmDQ0KI2RlZmluZSBhcGlfZmF0YWwg
cHJpbnRmDQ0KI2luY2x1ZGUgPHN0ZGlvLmg+DQ0KI2luY2x1ZGUgPHdpbmRv
d3MuaD4NDQojZW5kaWYNDQojaW5jbHVkZSA8ZXJybm8uaD4NDQojaW5jbHVk
ZSA8Y3lnc2VydmVyX2hhbmRsZS5oPg0NCg0NCg0NCg0NCmNsaWVudF9yZXF1
ZXN0X2hvbGRfaGFuZGxlOjpjbGllbnRfcmVxdWVzdF9ob2xkX2hhbmRsZSgp
IDogY2xpZW50X3JlcXVlc3QoQ1lHU0VSVkVSX1JFUVVFU1RfSE9MRF9IQU5E
TEUsIHNpemVvZihyZXEpKQ0NCnsNDQogIGJ1ZmZlciA9IChjaGFyKikmcmVx
Ow0NCiAgcmVxLnBpZCA9IDA7DQ0KICByZXEuZnJvbV9oYW5kbGUgPSBOVUxM
Ow0NCiAgcmVxLmN5Z3NlcnZlcl9oYW5kbGUgPSBOVUxMOw0NCn0NDQpjbGll
bnRfcmVxdWVzdF9yZWxlYXNlX2hhbmRsZTo6Y2xpZW50X3JlcXVlc3RfcmVs
ZWFzZV9oYW5kbGUoKSA6IGNsaWVudF9yZXF1ZXN0KENZR1NFUlZFUl9SRVFV
RVNUX1JFTEVBU0VfSEFORExFLCBzaXplb2YocmVxKSkNDQp7DQ0KICBidWZm
ZXIgPSAoY2hhciopJnJlcTsNDQogIHJlcS5waWQgPSAwOw0NCiAgcmVxLnRv
X2hhbmRsZSA9IE5VTEw7DQ0KICByZXEuY3lnc2VydmVyX2hhbmRsZSA9IE5V
TEw7DQ0KfQ0NCg0NCnZvaWQNDQpjbGllbnRfcmVxdWVzdF9yZWxlYXNlX2hh
bmRsZTo6c2VydmUodHJhbnNwb3J0X2xheWVyX2Jhc2UgKmNvbm4sIGNsYXNz
IHByb2Nlc3NfY2FjaGUgKmNhY2hlKQ0NCnsNDQogIEhBTkRMRSB0b19wcm9j
ZXNzX2hhbmRsZSA9IE5VTEw7DQ0KICANDQogIGlmIChoZWFkZXIuY2IgIT0g
c2l6ZW9mIChyZXEpKQ0NCiAgICB7DQ0KICAgICAgaGVhZGVyLmVycm9yX2Nv
ZGUgPSBFSU5WQUw7DQ0KICAgICAgcmV0dXJuOyANDQogICAgfQ0NCg0NCiAg
ZGVidWdfcHJpbnRmICgiUmVsZWFzZSBIYW5kbGUgQ0FMTCBwaWQgJWxkIEhh
bmRsZTooJXApXG4iLCByZXEucGlkLCByZXEuY3lnc2VydmVyX2hhbmRsZSk7
DQ0KDQ0KICB0b19wcm9jZXNzX2hhbmRsZSA9IE9wZW5Qcm9jZXNzIChQUk9D
RVNTX0RVUF9IQU5ETEUsIEZBTFNFLCByZXEucGlkKTsNDQoNDQogIGlmICgh
dG9fcHJvY2Vzc19oYW5kbGUpDQ0KICAgIHsNDQogICAgICBwcmludGYgKCJl
cnJvciBvcGVuaW5nIHByb2Nlc3MgKCVsdSlcbiIsIEdldExhc3RFcnJvciAo
KSk7DQ0KICAgICAgaGVhZGVyLmVycm9yX2NvZGUgPSBFQUNDRVM7DQ0KICAg
ICAgZ290byBvdXQ7DQ0KICAgIH0NDQoNDQogIC8vICBkZWJ1Z19wcmludGYo
IkR1cGxpY2F0ZUhhbmRsZSBoYW5kbGU6MHglWCAtPiBwcm9jMjoweCVYXG4i
LCByZXEuY3lnc2VydmVyX2hhbmRsZSwgdG9fcHJvY2Vzc19oYW5kbGUpOw0N
CiAgaWYgKCFEdXBsaWNhdGVIYW5kbGUgKEdldEN1cnJlbnRQcm9jZXNzKCks
IHJlcS5jeWdzZXJ2ZXJfaGFuZGxlLA0NCgkJCXRvX3Byb2Nlc3NfaGFuZGxl
LCAmcmVxLnRvX2hhbmRsZSwNDQoJCQkwLCBUUlVFLA0NCgkJCURVUExJQ0FU
RV9TQU1FX0FDQ0VTUykpDQ0KICAgIHsNDQogICAgICBwcmludGYgKCJlcnJv
ciBkdXBsaWNhdGluZyBmcm9tX21hc3RlciBoYW5kbGUgKCVsdSlcbiIsIEdl
dExhc3RFcnJvciAoKSk7DQ0KICAgICAgaGVhZGVyLmVycm9yX2NvZGUgPSBF
QUNDRVM7DQ0KICAgICAgZ290byBvdXQ7DQ0KICAgIH0NDQogIENsb3NlSGFu
ZGxlKHJlcS5jeWdzZXJ2ZXJfaGFuZGxlKTsNDQoNDQogIGhlYWRlci5lcnJv
cl9jb2RlID0gMDsNDQoNDQpvdXQ6DQ0KICBpZiAodG9fcHJvY2Vzc19oYW5k
bGUpDQ0KICAgIENsb3NlSGFuZGxlICh0b19wcm9jZXNzX2hhbmRsZSk7DQ0K
ICBkZWJ1Z19wcmludGYgKCJIb2xkIEhhbmRsZSBSRVRVUk46IHJldDolZCBy
ZXRfaGFuZGxlKCVwKVxuIiwgaGVhZGVyLmVycm9yX2NvZGUsIHJlcS50b19o
YW5kbGUpOw0NCg0NCn0NDQoNDQp2b2lkDQ0KY2xpZW50X3JlcXVlc3RfaG9s
ZF9oYW5kbGU6OnNlcnZlKHRyYW5zcG9ydF9sYXllcl9iYXNlICpjb25uLCBj
bGFzcyBwcm9jZXNzX2NhY2hlICpjYWNoZSkNDQp7DQ0KICBIQU5ETEUgZnJv
bV9wcm9jZXNzX2hhbmRsZSA9IE5VTEw7DQ0KICANDQogIGlmIChoZWFkZXIu
Y2IgIT0gc2l6ZW9mIChyZXEpKQ0NCiAgICB7DQ0KICAgICAgaGVhZGVyLmVy
cm9yX2NvZGUgPSBFSU5WQUw7DQ0KICAgICAgcmV0dXJuOw0NCiAgICB9DQ0K
DQ0KICBkZWJ1Z19wcmludGYgKCJIb2xkIEhhbmRsZSBDQUxMOiBwaWQgJWxk
IEhhbmRsZTooJXApXG4iLCByZXEucGlkLCByZXEuZnJvbV9oYW5kbGUpOw0N
CiAgZnJvbV9wcm9jZXNzX2hhbmRsZSA9IE9wZW5Qcm9jZXNzIChQUk9DRVNT
X0RVUF9IQU5ETEUsIEZBTFNFLCByZXEucGlkKTsNDQoNDQogIA0NCiAgaWYg
KCFmcm9tX3Byb2Nlc3NfaGFuZGxlKQ0NCiAgICB7DQ0KICAgICAgcHJpbnRm
ICgiZXJyb3Igb3BlbmluZyBwcm9jZXNzICglbHUpXG4iLCBHZXRMYXN0RXJy
b3IgKCkpOw0NCiAgICAgIGhlYWRlci5lcnJvcl9jb2RlID0gRUFDQ0VTOw0N
CiAgICAgIGdvdG8gb3V0Ow0NCiAgICB9DQ0KICANDQogIC8vIGRlYnVnX3By
aW50ZigiRHVwbGljYXRlSGFuZGxlIHByb2MxOiAweCVYIGhhbmRsZTE6MHgl
WCAtPiBDdXJyZW50UHJvY2Vzc1xuIiwgZnJvbV9wcm9jZXNzX2hhbmRsZSwg
cmVxLmZyb21faGFuZGxlKTsNDQogIGlmICghRHVwbGljYXRlSGFuZGxlIChm
cm9tX3Byb2Nlc3NfaGFuZGxlLCByZXEuZnJvbV9oYW5kbGUsDQ0KCQkJR2V0
Q3VycmVudFByb2Nlc3MoKSwgJnJlcS5jeWdzZXJ2ZXJfaGFuZGxlLA0NCgkJ
CTAsIFRSVUUsDQ0KCQkJRFVQTElDQVRFX1NBTUVfQUNDRVNTKSkNDQogICAg
ew0NCiAgICAgIHByaW50ZiAoImVycm9yIGR1cGxpY2F0aW5nIGZyb21fbWFz
dGVyIGhhbmRsZSAoJWx1KVxuIiwgR2V0TGFzdEVycm9yICgpKTsNDQogICAg
ICBoZWFkZXIuZXJyb3JfY29kZSA9IEVBQ0NFUzsNDQogICAgICBnb3RvIG91
dDsNDQogICAgfQ0NCg0NCiAgaGVhZGVyLmVycm9yX2NvZGUgPSAwOw0NCg0N
Cm91dDoNDQogIGlmIChmcm9tX3Byb2Nlc3NfaGFuZGxlKQ0NCiAgICBDbG9z
ZUhhbmRsZSAoZnJvbV9wcm9jZXNzX2hhbmRsZSk7DQ0KICBkZWJ1Z19wcmlu
dGYgKCJIb2xkIEhhbmRsZSBSRVRVUk46IHJldDolZCByZXRfaGFuZGxlKCVw
KVxuIiwgaGVhZGVyLmVycm9yX2NvZGUsIHJlcS5jeWdzZXJ2ZXJfaGFuZGxl
KTsNDQoNDQp9DQ0KDQ0KDQ0K

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="fdpass.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30L.0206261545073.20345@biohazard-cafe.mit.edu>
Content-Description: 
Content-Disposition: attachment; filename="fdpass.patch"
Content-length: 19675

PyBjeWd3aW4vY3lnc2VydmVyX2hhbmRsZS5jYw0KPyBjeWd3aW4vY3lnc2Vy
dmVyX2hhbmRsZS5oDQpJbmRleDogY3lnd2luL01ha2VmaWxlLmluDQo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL3dp
bnN1cC9jeWd3aW4vTWFrZWZpbGUuaW4sdg0KcmV0cmlldmluZyByZXZpc2lv
biAxLjk0DQpkaWZmIC11IC1wIC1yMS45NCBNYWtlZmlsZS5pbg0KLS0tIGN5
Z3dpbi9NYWtlZmlsZS5pbgkyMiBKdW4gMjAwMiAwMjo1Njo1NiAtMDAwMAkx
Ljk0DQorKysgY3lnd2luL01ha2VmaWxlLmluCTI2IEp1biAyMDAyIDE4OjI4
OjEyIC0wMDAwDQpAQCAtMjAzLDcgKzIwMyw3IEBAIGluc3RhbGwtbWFuOg0K
IA0KIGluc3RhbGxfdGFyZ2V0OiBjeWdzZXJ2ZXIuZXhlDQogCSQoSU5TVEFM
TF9QUk9HUkFNKSBjeWdzZXJ2ZXIuZXhlICQoYmluZGlyKS9jeWdzZXJ2ZXIu
ZXhlDQotCQ0KKw0KIGluc3RhbGxfaG9zdDoNCiANCiANCkBAIC0zMjIsNyAr
MzIyLDEwIEBAIGN5Z3NlcnZlcl9jbGllbnRfb3V0c2lkZS5vOiBjeWdzZXJ2
ZXJfY2wNCiBjeWdzZXJ2ZXJfc2htLm86IGN5Z3NlcnZlcl9zaG0uY2MNCiAJ
JChDT01QSUxFX0NYWCkgLURfX09VVFNJREVfQ1lHV0lOX18gLW8gJEAgJDwN
CiANCi1jeWdzZXJ2ZXIuZXhlOiBjeWdzZXJ2ZXIubyBjeWdzZXJ2ZXJfc2ht
Lm8gY3lnc2VydmVyX3RyYW5zcG9ydF9vdXRzaWRlLm8gY3lnc2VydmVyX3Ry
YW5zcG9ydF9waXBlc19vdXRzaWRlLm8gY3lnc2VydmVyX3RyYW5zcG9ydF9z
b2NrZXRzX291dHNpZGUubyBjeWdzZXJ2ZXJfY2xpZW50X291dHNpZGUubyBj
eWdzZXJ2ZXJfcHJvY2Vzcy5vIHRocmVhZGVkX3F1ZXVlLm8gd2luY2FwLm8g
dmVyc2lvbi5vIHNtYWxscHJpbnQubw0KK2N5Z3NlcnZlcl9oYW5kbGUubzog
Y3lnc2VydmVyX2hhbmRsZS5jYw0KKwkkKENPTVBJTEVfQ1hYKSAtRF9fT1VU
U0lERV9DWUdXSU5fXyAtbyAkQCAkPA0KKw0KK2N5Z3NlcnZlci5leGU6IGN5
Z3NlcnZlci5vIGN5Z3NlcnZlcl9zaG0ubyBjeWdzZXJ2ZXJfaGFuZGxlLm8g
Y3lnc2VydmVyX3RyYW5zcG9ydF9vdXRzaWRlLm8gY3lnc2VydmVyX3RyYW5z
cG9ydF9waXBlc19vdXRzaWRlLm8gY3lnc2VydmVyX3RyYW5zcG9ydF9zb2Nr
ZXRzX291dHNpZGUubyBjeWdzZXJ2ZXJfY2xpZW50X291dHNpZGUubyBjeWdz
ZXJ2ZXJfcHJvY2Vzcy5vIHRocmVhZGVkX3F1ZXVlLm8gd2luY2FwLm8gdmVy
c2lvbi5vIHNtYWxscHJpbnQubw0KIAkkKENYWCkgLW8gJEAgJF4NCiAjaWZk
ZWYgVkVSQk9TRQ0KICMJJChDWFgpICQoTUlOR1dfQ1hYRkxBR1MpIC1vICRA
ICR7d29yZGxpc3QgMSwzLCRefSAtQiQobWluZ3dfYnVpbGQpLyAkKE1JTkdX
X0xERkxBR1MpDQpJbmRleDogY3lnd2luL2N5Z3NlcnZlci5jYw0KPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5z
dXAvY3lnd2luL2N5Z3NlcnZlci5jYyx2DQpyZXRyaWV2aW5nIHJldmlzaW9u
IDEuNA0KZGlmZiAtdSAtcCAtcjEuNCBjeWdzZXJ2ZXIuY2MNCi0tLSBjeWd3
aW4vY3lnc2VydmVyLmNjCTE1IE1hciAyMDAyIDIxOjUyOjA1IC0wMDAwCTEu
NA0KKysrIGN5Z3dpbi9jeWdzZXJ2ZXIuY2MJMjYgSnVuIDIwMDIgMTg6Mjg6
MTIgLTAwMDANCkBAIC0zMSw2ICszMSw3IEBADQogI2luY2x1ZGUgImN5Z3dp
bi9jeWdzZXJ2ZXJfcHJvY2Vzcy5oIg0KICNpbmNsdWRlICJjeWd3aW4vY3ln
c2VydmVyLmgiDQogI2luY2x1ZGUgImN5Z3NlcnZlcl9zaG0uaCINCisjaW5j
bHVkZSAiY3lnc2VydmVyX2hhbmRsZS5oIg0KIA0KIC8qIGZvciBxdWlldGVy
IG9wZXJhdGlvbiwgc2V0IHRvIDAgKi8NCiAjZGVmaW5lIERFQlVHIDANCkBA
IC0zNjQsNiArMzY1LDEwIEBAIHNlcnZlcl9yZXF1ZXN0Ojpwcm9jZXNzICgp
DQogICAgICAgcmVxID0gbmV3IGNsaWVudF9yZXF1ZXN0X2F0dGFjaF90dHkg
KCk7IGJyZWFrOw0KICAgICBjYXNlIENZR1NFUlZFUl9SRVFVRVNUX1NIVVRE
T1dOOg0KICAgICAgIHJlcSA9IG5ldyBjbGllbnRfcmVxdWVzdF9zaHV0ZG93
biAoKTsgYnJlYWs7DQorICAgIGNhc2UgQ1lHU0VSVkVSX1JFUVVFU1RfSE9M
RF9IQU5ETEU6DQorICAgICAgcmVxID0gbmV3IGNsaWVudF9yZXF1ZXN0X2hv
bGRfaGFuZGxlKCk7IGJyZWFrOw0KKyAgICBjYXNlIENZR1NFUlZFUl9SRVFV
RVNUX1JFTEVBU0VfSEFORExFOg0KKyAgICAgIHJlcSA9IG5ldyBjbGllbnRf
cmVxdWVzdF9yZWxlYXNlX2hhbmRsZSgpOyBicmVhazsNCiAgICAgY2FzZSBD
WUdTRVJWRVJfUkVRVUVTVF9TSE1fR0VUOg0KICAgICAgcmVxID0gbmV3IGNs
aWVudF9yZXF1ZXN0X3NobSAoKTsgYnJlYWs7DQogICAgIGRlZmF1bHQ6DQpJ
bmRleDogY3lnd2luL2N5Z3NlcnZlcl9jbGllbnQuY2MNCj09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2N5
Z3dpbi9jeWdzZXJ2ZXJfY2xpZW50LmNjLHYNCnJldHJpZXZpbmcgcmV2aXNp
b24gMS4zDQpkaWZmIC11IC1wIC1yMS4zIGN5Z3NlcnZlcl9jbGllbnQuY2MN
Ci0tLSBjeWd3aW4vY3lnc2VydmVyX2NsaWVudC5jYwkxMyBNYXIgMjAwMiAw
MjozNDowMyAtMDAwMAkxLjMNCisrKyBjeWd3aW4vY3lnc2VydmVyX2NsaWVu
dC5jYwkyNiBKdW4gMjAwMiAxODoyODoxMiAtMDAwMA0KQEAgLTMwLDYgKzMw
LDcgQEANCiAjaW5jbHVkZSAiY3lnd2luL2N5Z3NlcnZlcl90cmFuc3BvcnRf
cGlwZXMuaCINCiAjaW5jbHVkZSAiY3lnd2luL2N5Z3NlcnZlcl90cmFuc3Bv
cnRfc29ja2V0cy5oIg0KICNpbmNsdWRlICJjeWd3aW4vY3lnc2VydmVyLmgi
DQorI2luY2x1ZGUgImN5Z3NlcnZlcl9oYW5kbGUuaCINCiANCiAvKiAwID0g
dW50ZXN0ZWQsIDEgPSBydW5uaW5nLCAyID0gZGVhZCAqLw0KIGludCBjeWdz
ZXJ2ZXJfcnVubmluZz1DWUdTRVJWRVJfVU5LTk9XTjsNCkBAIC01OCw2ICs1
OSwyMyBAQCBjbGllbnRfcmVxdWVzdF9hdHRhY2hfdHR5OjpjbGllbnRfcmVx
dWVzDQogICByZXEuZnJvbV9tYXN0ZXIgPSBuZnJvbV9tYXN0ZXI7DQogICBy
ZXEudG9fbWFzdGVyID0gbnRvX21hc3RlcjsNCiB9DQorDQorY2xpZW50X3Jl
cXVlc3RfaG9sZF9oYW5kbGU6OmNsaWVudF9yZXF1ZXN0X2hvbGRfaGFuZGxl
KERXT1JEIHBpZCwgSEFORExFIGZyb20pIDogY2xpZW50X3JlcXVlc3QoQ1lH
U0VSVkVSX1JFUVVFU1RfSE9MRF9IQU5ETEUsIHNpemVvZihyZXEpKQ0KK3sN
CisgIGJ1ZmZlciA9IChjaGFyKikmcmVxOw0KKyAgcmVxLnBpZCA9IHBpZDsN
CisgIHJlcS5mcm9tX2hhbmRsZSA9IGZyb207DQorICByZXEuY3lnc2VydmVy
X2hhbmRsZSA9IE5VTEw7DQorfQ0KKw0KK2NsaWVudF9yZXF1ZXN0X3JlbGVh
c2VfaGFuZGxlOjpjbGllbnRfcmVxdWVzdF9yZWxlYXNlX2hhbmRsZShEV09S
RCBwaWQsIEhBTkRMRSBjeWdoYW5kbGUpIDogY2xpZW50X3JlcXVlc3QoQ1lH
U0VSVkVSX1JFUVVFU1RfUkVMRUFTRV9IQU5ETEUsIHNpemVvZihyZXEpKQ0K
K3sNCisgIGJ1ZmZlciA9IChjaGFyKikmcmVxOw0KKyAgcmVxLnBpZCA9IHBp
ZDsNCisgIHJlcS5jeWdzZXJ2ZXJfaGFuZGxlID0gY3lnaGFuZGxlOw0KKyAg
cmVxLnRvX2hhbmRsZSA9IE5VTEw7DQorfQ0KKw0KIA0KIGNsaWVudF9yZXF1
ZXN0X3NodXRkb3duOjpjbGllbnRfcmVxdWVzdF9zaHV0ZG93biAoKSA6IGNs
aWVudF9yZXF1ZXN0IChDWUdTRVJWRVJfUkVRVUVTVF9TSFVURE9XTiwgMCkN
CiB7DQpJbmRleDogY3lnd2luL25ldC5jYw0KPT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQ0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAvY3lnd2luL25l
dC5jYyx2DQpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMTEzDQpkaWZmIC11IC1w
IC1yMS4xMTMgbmV0LmNjDQotLS0gY3lnd2luL25ldC5jYwkxMCBKdW4gMjAw
MiAxOTo1ODoxOSAtMDAwMAkxLjExMw0KKysrIGN5Z3dpbi9uZXQuY2MJMjYg
SnVuIDIwMDIgMTg6Mjg6MTMgLTAwMDANCkBAIC0zNCw2ICszNCw3IEBAIGRl
dGFpbHMuICovDQogI2luY2x1ZGUgInJlZ2lzdHJ5LmgiDQogI2luY2x1ZGUg
Indzb2NrX2V2ZW50LmgiDQogI2luY2x1ZGUgPHN5cy91aW8uaD4NCisjaW5j
bHVkZSAiY3lnc2VydmVyX2hhbmRsZS5oIg0KIA0KIGV4dGVybiAiQyIgew0K
IGludCBoX2Vycm5vOw0KQEAgLTI0NzQsNjYgKzI0NzUsMjY2IEBAIGVuZGhv
c3RlbnQgKHZvaWQpDQogew0KIH0NCiANCitzdHJ1Y3QgcGFzc2ZkIHsNCisg
IHVuc2lnbmVkIGludCB1aU1hZ2ljOyAgLy8gTWFnaWMgbnVtYmVyIHRvIHJl
Y29nbml6ZSBoZWFkZXIgZGF0YQ0KKyAgSEFORExFIGhIYW5kbGU7ICAgICAg
ICAvLyBIYW5kbGUgdmFsdWUgdmFsaWQgaW4gY3lnc2VydmVyDQorICBCT09M
IGJCaW5hcnk7ICAgICAgICAgIC8vIEJpbmFyeSBvciBUZXh0IG1vZGUNCisg
IEJPT0wgYlJlYWQ7ICAgICAgICAgICAgLy8gUmVhZCBhY2Nlc3M/DQorICBC
T09MIGJXcml0ZTsgICAgICAgICAgIC8vIFdyaXRlIGFjY2Vzcz8NCisgIGlu
dCBpRGV2aWNlOyAgICAgICAgICAgLy8gRGV2aWNlIFR5cGUgDQorICBpbnQg
aUFGOyAgICAgICAgICAgICAgIC8vIElmIGlEZXZpY2UgaXMgRkhfU09DS0VU
IEFkZHJlc3MgRmFtaWx5IG9mIFNvY2tldA0KK307DQorDQorDQorLy8gQ3Vy
cmVudGx5IG9ubHkgRkhfUElQRVIsIEZIX1BJUEVXLCBhbmQgRkhfU09DS0VU
IGFyZSBzdXBwb3J0ZWQNCisvLyBCZWNhdXNlIG9mIHRoaXMgYlJlYWQgYW5k
IGJXcml0ZSBhcmUgaWdub3JlZC4NCisvLyBTb2NrZXQgbmFtZSBvbiBBRl9M
T0NBTCB3aWxsIGJlIHNldCB0byAiIi4NCisvLyBSZXR1cm5zIHRoZSBmZCBv
ciAtMSBpZiB0aGVyZSdzIGFuIGVycm9yDQorc3RhdGljIGludA0KK2N5Z3dp
bl9oYW5kbGVfdG9fZmQgKEhBTkRMRSBoYW5kbGUsIHN0cnVjdCBwYXNzZmQg
KmZkcCkgDQorew0KKyAgRFdPUkQgbXlhY2Nlc3MgPSAoZmRwLT5iUmVhZCA/
IEdFTkVSSUNfUkVBRCA6IDApIHwgKGZkcC0+YldyaXRlID8gR0VORVJJQ19X
UklURSA6IDApOw0KKyAgaW50IGRldm4gPSBmZHAtPmlEZXZpY2UgJiBGSF9E
RVZNQVNLOyANCisNCisgIGludCBmZCA9IC0xOw0KKyAgc3dpdGNoIChkZXZu
KSB7DQorICBjYXNlIEZIX1BJUEVSOiANCisgICAgew0KKyAgICAgIGZkID0g
Y3lnaGVhcC0+ZmR0YWIuZmluZF91bnVzZWRfaGFuZGxlICgpOw0KKyAgICAg
IGZoYW5kbGVyX3BpcGUgKmZociA9IChmaGFuZGxlcl9waXBlICopIA0KKwlj
eWdoZWFwLT5mZHRhYi5idWlsZF9maGFuZGxlciAoZmQsRkhfUElQRVIsICIv
ZGV2L3BpcGVyIik7DQorICAgICAgZmhyLT5pbml0IChoYW5kbGUsIEdFTkVS
SUNfUkVBRCwgZmRwLT5iQmluYXJ5KTsNCisgICAgfQ0KKyAgICBicmVhazsN
CisgIGNhc2UgRkhfUElQRVc6IA0KKyAgICB7DQorICAgICAgZmQgPSBjeWdo
ZWFwLT5mZHRhYi5maW5kX3VudXNlZF9oYW5kbGUgKCk7DQorICAgICAgZmhh
bmRsZXJfcGlwZSAqZmh3ID0gKGZoYW5kbGVyX3BpcGUgKikgDQorCWN5Z2hl
YXAtPmZkdGFiLmJ1aWxkX2ZoYW5kbGVyIChmZCwgRkhfUElQRVcsICIvZGV2
L3BpcGV3Iik7DQorICAgICAgZmh3LT5pbml0IChoYW5kbGUsIEdFTkVSSUNf
V1JJVEUsIGZkcC0+YkJpbmFyeSk7DQorICAgIH0NCisgICAgYnJlYWs7DQor
ICBjYXNlIEZIX1NPQ0tFVDoNCisgICAgew0KKyAgICAgIGZkID0gY3lnaGVh
cC0+ZmR0YWIuZmluZF91bnVzZWRfaGFuZGxlICgpOw0KKyAgICAgIGNvbnN0
IGNoYXIgKm5hbWU7DQorICAgICAgaW50IHR5cGU7DQorICAgICAgDQorICAg
ICAgV1NBUFJPVE9DT0xfSU5GTyBQcm90SW5mbzsNCisgICAgICBpbnQgc2l6
ZSA9IHNpemVvZihQcm90SW5mbyk7DQorICAgICAgZ2V0c29ja29wdCgoU09D
S0VUKWhhbmRsZSwgU09MX1NPQ0tFVCwgDQorCQkgU09fUFJPVE9DT0xfSU5G
TywgKGNoYXIqKSZQcm90SW5mbywgJnNpemUpOw0KKw0KKyAgICAgIGlmIChQ
cm90SW5mby5pUHJvdG9jb2wgPT0gSVBQUk9UT19UQ1ApIA0KKwl0eXBlID0g
U09DS19TVFJFQU07DQorICAgICAgZWxzZSAvLyBYWFggYXJlIHRoZXJlIGFu
eSBvdGhlcnMgUHJvdG9jb2xzPw0KKwl0eXBlID0gU09DS19ER1JBTTsNCisN
CisgICAgICBpZiAoZmRwLT5pQUYgPT0gQUZfSU5FVCkNCisJbmFtZSA9ICh0
eXBlID09IFNPQ0tfU1RSRUFNID8gIi9kZXYvdGNwIiA6ICIvZGV2L3VkcCIp
Ow0KKyAgICAgIGVsc2UNCisJbmFtZSA9ICh0eXBlID09IFNPQ0tfU1RSRUFN
ID8gIi9kZXYvc3RyZWFtc29ja2V0IiA6ICIvZGV2L2Rnc29ja2V0Iik7DQor
ICAgICAgDQorICAgICAgZmhhbmRsZXJfc29ja2V0KiBmaCA9IChmaGFuZGxl
cl9zb2NrZXQgKikgDQorCWN5Z2hlYXAtPmZkdGFiLmJ1aWxkX2ZoYW5kbGVy
IChmZCwgRkhfU09DS0VULCBuYW1lKTsNCisgICAgICBpZiAoZmgpDQorCXsN
CisJICBmaC0+c2V0X2lvX2hhbmRsZSAoaGFuZGxlKTsNCisJICBmaC0+c2V0
X2ZsYWdzIChPX1JEV1IsIE9fQklOQVJZKTsNCisJICBmaC0+c2V0X2FkZHJf
ZmFtaWx5IChmZHAtPmlBRik7DQorCSAgZmgtPnNldF9zb2NrZXRfdHlwZSAo
dHlwZSk7DQorCX0NCisgICAgfQ0KKyAgICBicmVhazsNCisgIH0gIA0KKyAg
cmV0dXJuIGZkOw0KK30NCisNCisNCiAvKiBleHBvcnRlZCBhcyByZWN2bXNn
OiBzdGFuZGFyZHM/ICovDQogZXh0ZXJuICJDIiBpbnQNCiBjeWd3aW5fcmVj
dm1zZyhpbnQgcywgc3RydWN0IG1zZ2hkciAqbXNnLCBpbnQgZmxhZ3MpDQog
ew0KLSAgICBpbnQgcmV0LCBuYjsNCi0gICAgc2l6ZV90IHRvdCA9IDA7DQot
ICAgIGludCBpOw0KLSAgICBjaGFyICpidWYsICpwOw0KLSAgICBzdHJ1Y3Qg
aW92ZWMgKmlvdiA9IG1zZy0+bXNnX2lvdjsNCi0NCi0gICAgZm9yKGkgPSAw
OyBpIDwgbXNnLT5tc2dfaW92bGVuOyArK2kpDQotCXRvdCArPSBpb3ZbaV0u
aW92X2xlbjsNCi0gICAgYnVmID0gKGNoYXIgKikgbWFsbG9jKHRvdCk7DQot
ICAgIGlmICh0b3QgIT0gMCAmJiBidWYgPT0gTlVMTCkNCisgIGludCByZXQs
IG5iOw0KKyAgc2l6ZV90IHRvdCA9IDA7DQorICBpbnQgaTsNCisgIGNoYXIg
KmJ1ZiwgKnA7DQorICBzdHJ1Y3QgaW92ZWMgKmlvdiA9IG1zZy0+bXNnX2lv
djsNCisgIHN0cnVjdCBwYXNzZmQgZmRwWzFdOw0KKyAgaW50IGV4dHJhZGF0
YSA9IDA7DQorICANCisgIGZvcihpID0gMDsgaSA8IG1zZy0+bXNnX2lvdmxl
bjsgKytpKQ0KKyAgICB0b3QgKz0gaW92W2ldLmlvdl9sZW47DQorDQorICBp
ZiAobXNnLT5tc2dfYWNjcmlnaHRzbGVuKSANCisgICAgICAoKihpbnQgKilt
c2ctPm1zZ19hY2NyaWdodHMpID0gLTE7DQorDQorICBmaGFuZGxlcl9zb2Nr
ZXQgKnNvY2sgPSBnZXQgKHMpOw0KKw0KKyAgaWYgKHNvY2sgJiYgc29jay0+
Z2V0X2FkZHJfZmFtaWx5ICgpID09IEFGX0xPQ0FMKSB7DQorICAgIC8vIFdl
IG9ubHkgd29ycnkgYWJvdXQgbWVzc2FnZSBoZWFkZXJzIHVuZGVyIEFGX0xP
Q0FMDQorICAgIC8vIEkga25vdyB0aGF0IHVzaW5nIE1TR19QRUVLIGlzIGNv
bnNpZGVyZWQgaW5jb3JyZWN0IHNvbWV0aW1lcywNCisgICAgLy8gYnV0IG5v
dCBpbiB0aGlzIGNhc2UgYmVjYXVzZSB3ZSdyZSBub3QgdHJ5aW5nIHRvIGJ1
ZmZlciBkYXRhLg0KKw0KKyAgICAvLyBYWFggLSBXZSBuZWVkIHRvIGFkZCB0
aGlzIGNoZWNrIHRvIHRoZSBvdGhlciByZWN2IGNhbGxzIHNvIHRoYXQgDQor
ICAgIC8vIHRoZXkgY2FuIHN0cmlwIG9mZiB0aGlzIGV4dHJhIGRhdGEsIGku
ZS4gc29tZWJvZHkgc2VuZHMgYSBkZXNjcmlwdG9yLCANCisgICAgLy8gdGhl
IG90aGVyIGNhbGxzIHJlY3YgaW5zdGVhZCBvZiByZWN2X21zZw0KKw0KKyAg
ICBpZiAoY3lnd2luX3JlY3YocywgKGNoYXIqKSBmZHAsIHNpemVvZihmZHAp
LCBNU0dfUEVFSykgPT0gc2l6ZW9mIChmZHApICYmIA0KKwlmZHAtPnVpTWFn
aWMgPT0gMHhBQUJCQ0NERCkgew0KKyAgICAgIGV4dHJhZGF0YSA9IHNpemVv
ZihmZHApOw0KKyAgICAgIA0KKyAgICB9DQorICB9DQorDQorICBidWYgPSAo
Y2hhciAqKSBtYWxsb2ModG90ICsgZXh0cmFkYXRhKTsNCisgIGlmICh0b3Qg
IT0gMCAmJiBidWYgPT0gTlVMTCkNCisgICAgew0KKyAgICAgIGVycm5vID0g
RU5PTUVNOw0KKyAgICAgIHJldHVybiAtMTsNCisgICAgfQ0KKw0KKyAgaWYg
KG1zZy0+bXNnX25hbWUpIA0KKyAgICBuYiA9IHJldCA9IGN5Z3dpbl9yZWN2
ZnJvbSAocywgYnVmLCB0b3QgKyBleHRyYWRhdGEsIGZsYWdzLA0KKwkJCQko
c3RydWN0IHNvY2thZGRyICopIG1zZy0+bXNnX25hbWUsIA0KKwkJCQkoaW50
ICopICZtc2ctPm1zZ19uYW1lbGVuKTsNCisgIGVsc2UNCisgICAgbmIgPSBy
ZXQgPSBjeWd3aW5fcmVjdiAocywgYnVmLCB0b3QgKyBleHRyYWRhdGEsIGZs
YWdzKTsNCisNCisgIG5iID0gbmIgLSBleHRyYWRhdGE7DQorDQorICBpZiAo
ZXh0cmFkYXRhKSB7DQorICAgIGRlYnVnX3ByaW50ZigiSGFuZGxlIGluIGN5
Z3NlcnZlcjogMHglWFxuIiwgZmRwLT5oSGFuZGxlKTsNCisgICAgY2xpZW50
X3JlcXVlc3RfcmVsZWFzZV9oYW5kbGUgKnJlcXVlc3QgPSANCisgICAgICBu
ZXcgY2xpZW50X3JlcXVlc3RfcmVsZWFzZV9oYW5kbGUoKERXT1JEKSBHZXRD
dXJyZW50UHJvY2Vzc0lkKCksDQorCQkJCSAgICAgKEhBTkRMRSkgZmRwLT5o
SGFuZGxlKTsNCisgICAgaWYgKGN5Z3NlcnZlcl9yZXF1ZXN0IChyZXF1ZXN0
KSA9PSAwICYmDQorCXJlcXVlc3QtPmhlYWRlci5lcnJvcl9jb2RlID09IDAp
IA0KICAgICAgIHsNCi0JZXJybm8gPSBFTk9NRU07DQotCXJldHVybiAtMTsN
CisJLy8gV2Ugbm93IGhhdmUgYSBoYW5kbGUgdGhhdCB3ZSB3YW50IHRvIHR1
cm4gaW50byBhbiBmZC4NCisJZGVidWdfcHJpbnRmKCJMb2NhbCBIYW5kbGU6
IDB4JVhcbiIsIHJlcXVlc3QtPnRvX2hhbmRsZSgpKTsNCisJaWYgKG1zZy0+
bXNnX2FjY3JpZ2h0c2xlbikgDQorCSAgew0KKwkgICAgKCooaW50ICopbXNn
LT5tc2dfYWNjcmlnaHRzKSA9IGN5Z3dpbl9oYW5kbGVfdG9fZmQocmVxdWVz
dC0+dG9faGFuZGxlKCksIGZkcCk7DQorCSAgICBkZWJ1Z19wcmludGYoIk5l
dyBmZDogJWQiLCAoKihpbnQgKiltc2ctPm1zZ19hY2NyaWdodHMpKTsNCisJ
ICB9DQorCWVsc2UNCisJICB7IA0KKwkgICAgLy8gSWYgdGhlIHVzZXIgZGlk
bid0IGxlYXZlIHJvb20gZm9yIGFuIGZkIGp1c3QgY2xvc2UgdGhlIGhhbmRs
ZSwgd2UgZG9uJ3Qgd2FudCBleHRyYSBoYW5kbGVzIGZsb2F0aW5nIGFyb3Vu
ZC4NCisJICAgIENsb3NlSGFuZGxlKHJlcXVlc3QtPnRvX2hhbmRsZSgpKTsN
CisJICB9DQogICAgICAgfQ0KLSAgICBuYiA9IHJldCA9IGN5Z3dpbl9yZWN2
ZnJvbSAocywgYnVmLCB0b3QsIGZsYWdzLA0KLSAgICAgIChzdHJ1Y3Qgc29j
a2FkZHIgKikgbXNnLT5tc2dfbmFtZSwgKGludCAqKSAmbXNnLT5tc2dfbmFt
ZWxlbik7DQotICAgIHAgPSBidWY7DQotICAgIHdoaWxlIChuYiA+IDApDQot
ICAgICAgew0KLQlzc2l6ZV90IGNudCA9IG1pbihuYiwgaW92LT5pb3ZfbGVu
KTsNCisgICAgZGVsZXRlIHJlcXVlc3Q7DQorICB9DQogDQotCW1lbWNweSAo
aW92LT5pb3ZfYmFzZSwgcCwgY250KTsNCi0JcCArPSBjbnQ7DQotCW5iIC09
IGNudDsNCi0JKytpb3Y7DQotICAgICAgfQ0KLSAgICBmcmVlKGJ1Zik7DQot
ICAgIHJldHVybiByZXQ7DQorICBwID0gYnVmICsgZXh0cmFkYXRhOw0KKyAg
d2hpbGUgKG5iID4gMCkNCisgICAgew0KKyAgICAgIHNzaXplX3QgY250ID0g
bWluKG5iLCBpb3YtPmlvdl9sZW4pOw0KKyAgICAgIA0KKyAgICAgIG1lbWNw
eSAoaW92LT5pb3ZfYmFzZSwgcCwgY250KTsNCisgICAgICBwICs9IGNudDsN
CisgICAgICBuYiAtPSBjbnQ7DQorICAgICAgKytpb3Y7DQorICAgIH0NCisg
IGZyZWUoYnVmKTsNCisgIHJldHVybiByZXQtZXh0cmFkYXRhOw0KIH0NCiAN
CiAvKiBleHBvcnRlZCBhcyBzZW5kbXNnOiBzdGFuZGFyZHM/ICovDQogZXh0
ZXJuICJDIiBpbnQNCiBjeWd3aW5fc2VuZG1zZyhpbnQgcywgY29uc3Qgc3Ry
dWN0IG1zZ2hkciAqbXNnLCBpbnQgZmxhZ3MpDQogew0KLSAgICBpbnQgcmV0
Ow0KLSAgICBzaXplX3QgdG90ID0gMDsNCi0gICAgaW50IGk7DQotICAgIGNo
YXIgKmJ1ZiwgKnA7DQotICAgIHN0cnVjdCBpb3ZlYyAqaW92ID0gbXNnLT5t
c2dfaW92Ow0KLQ0KLSAgICBmb3IoaSA9IDA7IGkgPCBtc2ctPm1zZ19pb3Zs
ZW47ICsraSkNCi0JdG90ICs9IGlvdltpXS5pb3ZfbGVuOw0KLSAgICBidWYg
PSAoY2hhciAqKSBtYWxsb2ModG90KTsNCi0gICAgaWYgKHRvdCAhPSAwICYm
IGJ1ZiA9PSBOVUxMKQ0KLSAgICAgIHsNCi0JZXJybm8gPSBFTk9NRU07DQot
CXJldHVybiAtMTsNCi0gICAgICB9DQotICAgIHAgPSBidWY7DQotICAgIGZv
ciAoaSA9IDA7IGkgPCBtc2ctPm1zZ19pb3ZsZW47ICsraSkNCisgIGludCBy
ZXQ7DQorICBzaXplX3QgdG90ID0gMDsNCisgIGludCBpOw0KKyAgY2hhciAq
YnVmLCAqcDsNCisgIHN0cnVjdCBpb3ZlYyAqaW92ID0gbXNnLT5tc2dfaW92
Ow0KKyAgc3RydWN0IHBhc3NmZCBmZHBbMV07DQorICBpbnQgZXh0cmFkYXRh
ID0gMDsNCisNCisgIGZoYW5kbGVyX3NvY2tldCAqc29jayA9IGdldCAocyk7
DQorICBzeXNjYWxsX3ByaW50ZiAoInNlbmRfbXNnICglZCwgJWQsICVkKSIs
IHMsIG1zZy0+bXNnX2FjY3JpZ2h0c2xlbiwgc29jayA/IHNvY2stPmdldF9h
ZGRyX2ZhbWlseSgpOiAtMSk7DQorDQorDQorICBpZiAobXNnLT5tc2dfYWNj
cmlnaHRzbGVuICYmIHNvY2sgJiYgc29jay0+Z2V0X2FkZHJfZmFtaWx5ICgp
ID09IEFGX0xPQ0FMKSB7DQorICAgIGludCB3ZmQgPSAqKChpbnQqKSBtc2ct
Pm1zZ19hY2NyaWdodHMpOw0KKyAgICANCisgICAgLy9maGFuZGxlcl9zb2Nr
ZXQgKmggPSBnZXQgKHdmZCk7DQorICAgIGN5Z2hlYXBfZmRnZXQgY2ZkICh3
ZmQpOw0KKyAgICBzeXNjYWxsX3ByaW50ZigiU2VuZGluZyBzb2NrZXQ6ICVk
ICV1XG4iLHdmZCwgY2ZkKTsgDQorICAgIGlmIChjZmQpIA0KICAgICAgIHsN
Ci0JbWVtY3B5IChwLCBpb3ZbaV0uaW92X2Jhc2UsIGlvdltpXS5pb3ZfbGVu
KTsNCi0JcCArPSBpb3ZbaV0uaW92X2xlbjsNCi0gICAgICB9DQotICAgIHJl
dCA9IGN5Z3dpbl9zZW5kdG8gKHMsIGJ1ZiwgdG90LCBmbGFncywNCi0gICAg
ICAoc3RydWN0IHNvY2thZGRyICopIG1zZy0+bXNnX25hbWUsIG1zZy0+bXNn
X25hbWVsZW4pOw0KLSAgICBmcmVlIChidWYpOw0KLSAgICByZXR1cm4gcmV0
Ow0KKwlkZWJ1Z19wcmludGYoIlNlbmRpbmcgaGFuZGxlOiAweCVYXG4iLGNm
ZC0+Z2V0X2hhbmRsZSgpKTsgDQorCWZkcC0+dWlNYWdpYyA9IDB4QUFCQkND
REQ7DQorCWNsaWVudF9yZXF1ZXN0X2hvbGRfaGFuZGxlICpyZXF1ZXN0ID0g
DQorCSAgbmV3IGNsaWVudF9yZXF1ZXN0X2hvbGRfaGFuZGxlKChEV09SRCkg
R2V0Q3VycmVudFByb2Nlc3NJZCgpLA0KKwkJCQkJIGNmZC0+Z2V0X2hhbmRs
ZSgpKTsNCisJaW50IHJlcyA9IGN5Z3NlcnZlcl9yZXF1ZXN0KHJlcXVlc3Qp
Ow0KKwlzeXNjYWxsX3ByaW50ZigiUmVxdWVzdDogJWQsICVkXG4iLCByZXMs
IHJlcXVlc3QtPmhlYWRlci5lcnJvcl9jb2RlKTsNCisJaWYgKHJlcyA9PSAw
ICYmIHJlcXVlc3QtPmhlYWRlci5lcnJvcl9jb2RlID09IDApIA0KKwkgIHsN
CisJICAgIGZkcC0+aEhhbmRsZSA9IHJlcXVlc3QtPmN5Z3NlcnZlcl9oYW5k
bGUoKTsNCisJICAgIGRlYnVnX3ByaW50ZigiSGFuZGxlIGluIGN5Z3NlcnZl
cjogMHglWFxuIiwgZmRwLT5oSGFuZGxlKTsgDQorCSAgICBmZHAtPmJCaW5h
cnkgPSBjZmQtPmdldF9mbGFncyAoKSAmIChPX0JJTkFSWSB8IE9fVEVYVCk7
DQorCSAgICBmZHAtPmlEZXZpY2UgPSBjZmQtPmdldF9kZXZpY2UoKTsNCisJ
ICAgIGZkcC0+YlJlYWQgPSAxOw0KKwkgICAgZmRwLT5iV3JpdGUgPTE7DQor
DQorCSAgICBzd2l0Y2ggKGZkcC0+aURldmljZSkgew0KKwkgICAgY2FzZSBG
SF9QSVBFUjoNCisJICAgICAgZmRwLT5iV3JpdGUgPSAwOw0KKwkgICAgICBi
cmVhazsNCisJICAgIGNhc2UgRkhfUElQRVc6DQorCSAgICAgIGZkcC0+YlJl
YWQgPSAwOw0KKwkgICAgICBicmVhazsNCisJICAgIGNhc2UgRkhfU09DS0VU
Og0KKwkgICAgICBmZHAtPmlBRiA9IGNmZC0+aXNfc29ja2V0KCktPmdldF9h
ZGRyX2ZhbWlseSAoKTsNCisJICAgICAgYnJlYWs7DQorCSAgICBkZWZhdWx0
Og0KKwkgICAgICBicmVhazsNCisJICAgIH0NCisJICAgIGV4dHJhZGF0YSA9
IHNpemVvZiAoc3RydWN0IHBhc3NmZCk7DQorCSAgfQ0KKwlkZWxldGUgcmVx
dWVzdDsNCisgICAgICB9IA0KKyAgfQ0KKyAgICANCisgIGZvcihpID0gMDsg
aSA8IG1zZy0+bXNnX2lvdmxlbjsgKytpKQ0KKyAgICB0b3QgKz0gaW92W2ld
Lmlvdl9sZW47DQorDQorICBidWYgPSAoY2hhciopIG1hbGxvYyAodG90ICsg
ZXh0cmFkYXRhKTsNCisgIGlmICh0b3QgIT0gMCAmJiBidWYgPT0gTlVMTCkN
CisgICAgew0KKyAgICAgIGVycm5vID0gRU5PTUVNOw0KKyAgICAgIHJldHVy
biAtMTsNCisgICAgfQ0KKw0KKyAgaWYgKGV4dHJhZGF0YSkNCisgICAgICBt
ZW1jcHkgKGJ1ZiwgZmRwLCBzaXplb2YgKHN0cnVjdCBwYXNzZmQpKTsNCisg
IHAgPSBidWYgKyBleHRyYWRhdGE7DQorDQorICBmb3IgKGkgPSAwOyBpIDwg
bXNnLT5tc2dfaW92bGVuOyArK2kpDQorICAgIHsNCisgICAgICBtZW1jcHkg
KHAsIGlvdltpXS5pb3ZfYmFzZSwgaW92W2ldLmlvdl9sZW4pOw0KKyAgICAg
IHAgKz0gaW92W2ldLmlvdl9sZW47DQorICAgIH0NCisgIGlmIChtc2ctPm1z
Z19uYW1lKSANCisgICAgew0KKyAgICAgIC8vIFNlbmRpbmcgYW4gT09CIG1l
c3NhZ2UgbWFrZXMgd2luc29jayBwcmVzZXJ2ZSBtZXNzYWdlIGJvdW5kYXJp
ZXMNCisgICAgICBpZiAoZXh0cmFkYXRhKQ0KKwljeWd3aW5fc2VuZHRvIChz
LCAiayIsIDEsIE1TR19PT0IsIChzdHJ1Y3Qgc29ja2FkZHIgKikgbXNnLT5t
c2dfbmFtZSwgDQorCQkgICAgICAgbXNnLT5tc2dfbmFtZWxlbik7DQorICAg
ICAgcmV0ID0gY3lnd2luX3NlbmR0byAocywgYnVmLCB0b3QrIGV4dHJhZGF0
YSwgZmxhZ3MsDQorCQkJICAgKHN0cnVjdCBzb2NrYWRkciAqKSBtc2ctPm1z
Z19uYW1lLCBtc2ctPm1zZ19uYW1lbGVuKTsNCisgICAgfSANCisgIGVsc2Ug
DQorICAgIHsNCisgICAgICAvLyBTZW5kaW5nIGFuIE9PQiBtZXNzYWdlIG1h
a2VzIHdpbnNvY2sgcHJlc2VydmUgbWVzc2FnZSBib3VuZGFyaWVzDQorICAg
ICAgaWYgKGV4dHJhZGF0YSkgDQorCWN5Z3dpbl9zZW5kIChzLCAiayIsIDEs
IE1TR19PT0IpOw0KKyAgICAgIHJldCA9IGN5Z3dpbl9zZW5kIChzLCBidWYs
IHRvdCArIGV4dHJhZGF0YSwgZmxhZ3MpOw0KKyAgICB9DQorICBmcmVlIChi
dWYpOw0KKyAgcmV0dXJuIHJldC1leHRyYWRhdGE7DQogfQ0KSW5kZXg6IGN5
Z3dpbi9pbmNsdWRlL2N5Z3dpbi9jeWdzZXJ2ZXIuaA0KPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAvY3ln
d2luL2luY2x1ZGUvY3lnd2luL2N5Z3NlcnZlci5oLHYNCnJldHJpZXZpbmcg
cmV2aXNpb24gMS4zDQpkaWZmIC11IC1wIC1yMS4zIGN5Z3NlcnZlci5oDQot
LS0gY3lnd2luL2luY2x1ZGUvY3lnd2luL2N5Z3NlcnZlci5oCTEzIE1hciAy
MDAyIDAyOjM0OjA1IC0wMDAwCTEuMw0KKysrIGN5Z3dpbi9pbmNsdWRlL2N5
Z3dpbi9jeWdzZXJ2ZXIuaAkyNiBKdW4gMjAwMiAxODoyODoxMyAtMDAwMA0K
QEAgLTMzLDYgKzMzLDggQEAgdHlwZWRlZiBlbnVtIHsNCiAgIENZR1NFUlZF
Ul9SRVFVRVNUX0FUVEFDSF9UVFksDQogICBDWUdTRVJWRVJfUkVRVUVTVF9T
SFVURE9XTiwNCiAgIENZR1NFUlZFUl9SRVFVRVNUX1NITV9HRVQsDQorICBD
WUdTRVJWRVJfUkVRVUVTVF9IT0xEX0hBTkRMRSwNCisgIENZR1NFUlZFUl9S
RVFVRVNUX1JFTEVBU0VfSEFORExFLA0KICAgQ1lHU0VSVkVSX1JFUVVFU1Rf
TEFTVA0KIH0gY3lnc2VydmVyX3JlcXVlc3RfY29kZTsNCiANCkBAIC04Miw2
ICs4NCwyNyBAQCBzdHJ1Y3QgcmVxdWVzdF9hdHRhY2hfdHR5DQogICBfX2F0
dHJpYnV0ZV9fICgocGFja2VkKSkNCiAjZW5kaWYNCiA7DQorDQorc3RydWN0
IHJlcXVlc3RfaG9sZF9oYW5kbGUNCit7DQorICBEV09SRCBwaWQ7DQorICBI
QU5ETEUgZnJvbV9oYW5kbGUsIGN5Z3NlcnZlcl9oYW5kbGU7DQorfQ0KKyNp
ZmRlZiBfX0dOVUNfXw0KKyAgX19hdHRyaWJ1dGVfXyAoKHBhY2tlZCkpDQor
I2VuZGlmDQorOw0KKw0KK3N0cnVjdCByZXF1ZXN0X3JlbGVhc2VfaGFuZGxl
DQorew0KKyAgRFdPUkQgcGlkOw0KKyAgSEFORExFIGN5Z3NlcnZlcl9oYW5k
bGUsIHRvX2hhbmRsZTsNCit9DQorI2lmZGVmIF9fR05VQ19fDQorICBfX2F0
dHJpYnV0ZV9fICgocGFja2VkKSkNCisjZW5kaWYNCis7DQorDQogDQogY2xh
c3MgY2xpZW50X3JlcXVlc3QNCiB7DQo=

---559023410-851401618-1025120707=:20345
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="testfd.c"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30L.0206261545074.20345@biohazard-cafe.mit.edu>
Content-Description: 
Content-Disposition: attachment; filename="testfd.c"
Content-length: 3583

I2luY2x1ZGUgPHN5cy9zb2NrZXQuaD4NDQojaW5jbHVkZSA8c3lzL3Vpby5o
Pg0NCiNpbmNsdWRlIDxzdGRpby5oPg0NCiNpbmNsdWRlIDxlcnJuby5oPg0N
Cg0NCnNzaXplX3QNDQp3cml0ZWZkIChpbnQgZmQsIGNvbnN0IHZvaWQgKmJ1
Ziwgc2l6ZV90IGxlbiwgaW50IHdmZCkNDQp7DQ0KICBzdHJ1Y3QgaW92ZWMg
aW92WzFdOw0NCiAgc3RydWN0IG1zZ2hkciBtaDsNDQogIGludCBmZHBbMV07
DQ0KICBpb3YtPmlvdl9iYXNlID0gKHZvaWQgKikgYnVmOw0NCiAgaW92LT5p
b3ZfbGVuID0gbGVuOw0NCg0NCiAgKmZkcCA9IHdmZDsNDQogIGJ6ZXJvICgm
bWgsIHNpemVvZiBtaCk7DQ0KICBtaC5tc2dfaW92ID0gKHN0cnVjdCBpb3Zl
YyAqKSBpb3Y7DQ0KICBtaC5tc2dfaW92bGVuID0gMTsNDQogIG1oLm1zZ19h
Y2NyaWdodHMgPSAoY2hhciAqKSBmZHA7DQ0KICBtaC5tc2dfYWNjcmlnaHRz
bGVuID0gc2l6ZW9mIChmZHApOw0NCiAgcmV0dXJuIHNlbmRtc2cgKGZkLCAm
bWgsIDApOw0NCn0NDQoNDQpzc2l6ZV90DQ0KcmVhZGZkIChpbnQgZmQsIGNv
bnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxlbiwgaW50ICpyZmRwKQ0NCnsNDQog
IHN0cnVjdCBpb3ZlYyBpb3ZbMV07DQ0KICBzdHJ1Y3QgbXNnaGRyIG1oOw0N
CiAgaW50IGZkcFsxXTsNDQogIGludCBuOw0NCg0NCiAgaW92LT5pb3ZfYmFz
ZSA9ICh2b2lkKikgYnVmOw0NCiAgaW92LT5pb3ZfbGVuID0gbGVuOw0NCg0N
CiAgKmZkcCA9IC0xOw0NCiAgYnplcm8gKCZtaCwgc2l6ZW9mIG1oKTsNDQog
IG1oLm1zZ19pb3YgPSAoc3RydWN0IGlvdmVjICopIGlvdjsNDQogIG1oLm1z
Z19pb3ZsZW4gPSAxOw0NCiAgbWgubXNnX2FjY3JpZ2h0cyA9IChjaGFyICop
IGZkcDsNDQogIG1oLm1zZ19hY2NyaWdodHNsZW4gPSBzaXplb2YgKGZkcCk7
DQ0KDQ0KICBuID0gcmVjdm1zZyAoZmQsICZtaCwgMCk7DQ0KICAqcmZkcCA9
ICpmZHA7DQ0KICBpZiAoKmZkcCA+PSAwICYmIG4gPT0gMCkgew0NCiAgICBu
ID0gLTE7DQ0KICAgIGVycm5vID0gRUFHQUlOOw0NCiAgfQ0NCiAgcmV0dXJu
IG47DQ0KfQ0NCg0NCnZvaWQgZmF0YWwoY2hhciogcykgew0NCiAgcHJpbnRm
KHMpOw0NCiAgZXhpdCgxKTsNDQp9DQ0KDQ0Kdm9pZCBmYXRhbDIoY2hhciog
cywgY2hhciogczIpIHsNDQogIHByaW50ZihzLCBzMik7DQ0KICBleGl0KDEp
Ow0NCn0NDQppbnQNDQptYWluIChpbnQgYXJnYywgY2hhciAqKmFyZ3YpDQ0K
ew0NCiAgaW50IHBpZDsNDQogIGludCB4ZmQ7DQ0KICBpbnQgcmZkOw0NCiAg
aW50IHdmZDsNDQogIGludCBmZHNbMl07DQ0KICBjaGFyIGM7DQ0KICBjaGFy
IG1zZ1tdID0gIlRlc3QgcGF0dGVybiI7DQ0KICBjaGFyIGJ1ZltzaXplb2Yg
KG1zZyldOw0NCg0NCiAgaWYgKHNvY2tldHBhaXIgKEFGX1VOSVgsIFNPQ0tf
U1RSRUFNLCAwLCBmZHMpIDwgMCkNDQogICAgZmF0YWwgKCJzb2NrZXRwYWly
XG4iKTsNDQoNDQogIHBpZCA9IGZvcmsgKCk7DQ0KICBpZiAocGlkID09IC0x
KQ0NCiAgICBmYXRhbCAoImZvcmtcbiIpOw0NCiAgZWxzZSBpZiAocGlkID09
IDApIHsNDQogICAgeGZkID0gZmRzWzBdOw0NCiAgICBjbG9zZSAoZmRzWzFd
KTsNDQogIH0gZWxzZSB7DQ0KICAgIHhmZCA9IGZkc1sxXTsNDQogICAgY2xv
c2UgKGZkc1swXSk7DQ0KICB9DQ0KDQ0KICBpZiAoc29ja2V0cGFpciAoQUZf
SU5FVCwgU09DS19TVFJFQU0sIDAsIGZkcykgPCAwKQ0NCiAgICBmYXRhbCAo
InNvY2tldHBhaXJcbiIpOw0NCg0NCiAgd2ZkID0gZmRzWzFdOw0NCiAgaWYg
KHdyaXRlZmQgKHhmZCwgIiIsIDEsIGZkc1swXSkgPCAwKQ0NCiAgICBmYXRh
bCAoIndyaXRlZmRcbiIpOw0NCiAgY2xvc2UgKGZkc1swXSk7DQ0KDQ0KI2lm
IDANDQogIHsNDQogICAgY2hhciBjOw0NCiAgICB3cml0ZSAoeGZkLCAiXDE3
MyIsIDEpOw0NCiAgICByZWFkICh4ZmQsICZjLCAxKTsNDQogIH0NDQojZW5k
aWYNDQoNDQogIGlmIChyZWFkZmQgKHhmZCwgJmMsIDEsICZyZmQpIDwgMCkN
DQogICAgZmF0YWwgKCJyZWFkZmRcbiIpOw0NCg0NCiAgaWYgKHBpZCkgew0N
CiAgICBpZiAod3JpdGUgKHdmZCwgbXNnLCBzaXplb2YgKG1zZykpICE9IHNp
emVvZiAobXNnKSkNDQogICAgICBmYXRhbDIgKCJ3cml0ZTogJXNcbiIsIChj
aGFyKilzdHJlcnJvciAoZXJybm8pKTsNDQogICAgaWYgKHJlYWQgKHJmZCwg
YnVmLCBzaXplb2YgKG1zZykpICE9IHNpemVvZiAobXNnKSkNDQogICAgICBm
YXRhbDIgKCJyZWFkOiAlc1xuIiwgKGNoYXIqKXN0cmVycm9yIChlcnJubykp
Ow0NCiAgICBpZiAoc3RybmNtcCAobXNnLCBidWYsIHNpemVvZiAobXNnKSkp
DQ0KICAgICAgZmF0YWwgKCJNZXNzYWdlIGNvcnJ1cHRcbiIpOw0NCiAgICBw
cmludGYoIlRlc3QgcGFzc2VkIVxuIik7DQ0KICB9DQ0KICBlbHNlIHsNDQog
ICAgaWYgKHJlYWQgKHJmZCwgYnVmLCBzaXplb2YgKG1zZykpICE9IHNpemVv
ZiAobXNnKSkNDQogICAgICBmYXRhbDIgKCJyZWFkOiAlc1xuIiwgKGNoYXIq
KXN0cmVycm9yIChlcnJubykpOw0NCiAgICBpZiAod3JpdGUgKHdmZCwgYnVm
LCBzaXplb2YgKG1zZykpICE9IHNpemVvZiAobXNnKSkNDQogICAgICBmYXRh
bDIgKCJ3cml0ZTogJXNcbiIsIChjaGFyKilzdHJlcnJvciAoZXJybm8pKTsN
DQogIH0NDQoNDQogIGV4aXQgKDApOw0NCn0NDQoNDQo=

---559023410-851401618-1025120707=:20345--
