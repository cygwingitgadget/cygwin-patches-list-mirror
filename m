From: Egor Duda <deo@logos-m.ru>
To: cygwin-patches@sourceware.cygnus.com
Subject: oem/ansi codepage support
Date: Wed, 29 Nov 2000 06:48:00 -0000
Message-id: <129109438394.20001129174705@logos-m.ru>
X-SW-Source: 2000-q4/msg00025.html
Content-type: multipart/mixed; boundary="----------=_1583532846-65437-17"

This is a multi-part message in MIME format...

------------=_1583532846-65437-17
Content-length: 658

Hi!

  this    patch    allows    to   specify   CYGWIN=codepage:oem   or
CYGWIN=codepage:ansi  and  force  cygwin  to use appropriate codepage.
Default codepage is ansi, as it is currently.
There's  one  caveat  in  this  patch:  cygwin  performs  switching to
specified   codepage  after  initializing  the  environment,  so  all
initializations   performed   before  environ_init()  will  use  ansi
codepage.   as  far  as  i can see, there's no codepage-dependant code
in those initializations now, but they may appear in the future.

Egor.            mailto:deo@logos-m.ru ICQ 5165414 FidoNet 2:5020/496.19
oem-cp-support.ChangeLog
oem-cp-support.diff


------------=_1583532846-65437-17
Content-Type: text/plain; charset=us-ascii; name="oem-cp-support.ChangeLog"
Content-Disposition: inline; filename="oem-cp-support.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 1241

MjAwMC0xMS0yMyAgRWdvciBEdWRhIDxkZW9AbG9nb3MtbS5ydT4KCgkqIGF1
dG9sb2FkLmNjOiBBdXRvbG9hZCBDaGFyVG9PZW1BLgoJKiBkY3J0MC5jYyAo
ZGxsX2NydDBfMSk6IElmIGN1cnJlbnQgY29kZXBhZ2UgaXMgT0VNLCB0cmFu
c2xhdGUKCWNvbW1hbmQgbGluZSB0byBpdC4KCSogZW52aXJvbi5jYzogQWRk
IG5ldyBvcHRpb24gJ2NvZGVwYWdlJyB0byBDWUdXSU4gZW52aXJvbm1lbnQK
CXZhcmlhYmxlLgoJKiBmaGFuZGxlcl9jbGlwYm9hcmQuY2MgKGZoYW5kbGVy
X2NsaXBib2FyZDo6cmVhZCk6IElmIGN1cnJlbnQKCWNvZGVwYWdlIGlzIE9F
TSwgcmVhZCBjbGlwYm9hcmQgaW4gT0VNIG1vZGUuCgkqIGZoYW5kbGVyX2Nv
bnNvbGUuY2MgKGZoYW5kbGVyX2NvbnNvbGU6OnJlYWQpOiBPbmx5IHRoYW5z
bGF0ZQoJY29uc29sZSBpbnB1dCBpZiBjdXJyZW50IGNvZGVwYWdlIGlzIEFO
U0kuCgkqIGZoYW5kbGVyX2NvbnNvbGUuY2MgKGZoYW5kbGVyX2NvbnNvbGU6
OndyaXRlX25vcm1hbCk6IElmIGN1cnJlbnQKCWNvZGVwYWdlIGlzIEFOU0ks
IHRyYW5zbGF0ZSBvdXRwdXQgZGF0YS4KCSogcGluZm8uY2MgKGNvZGVwYWdl
X2luaXQpOiBOZXcgZnVuY3Rpb24uIFNldHVwIGN1cnJlbnQgY29kZXBhZ2UK
CWZyb20gQ1lHV0lOIGVudmlyb25tZW50IHZhcmlhYmxlIGFuZCBzZXQgY29k
ZXBhZ2UgZm9yIGZpbGUgQVBJcy4KCSogc2VjdXJpdHkuY2MgKHJlYWRfc2Qp
OiBJZiBjdXJyZW50IGNvZGVwYWdlIGlzIE9FTSwgdHJhbnNsYXRlIGZpbGUK
CW5hbWUgdG8gaXQuCgkqIHdpbnN1cC5oOiAoc3lzX3djc3RvbWJzLHN5c19t
YnN0b3djcyk6IFVzZSBjdXJyZW50IGNvZGVwYWdlIGZvcgoJdHJhbnNsYXRp
b25zIGJldHdlZW4gbXVsdGlieXRlIGFuZCB3aWRlY2hhciBzdHJpbmcgYW5k
IHZpY2UgdmVyc2EuCg==

------------=_1583532846-65437-17
Content-Type: text/x-c; charset=us-ascii; name="oem-cp-support.diff"
Content-Disposition: inline; filename="oem-cp-support.diff"
Content-Transfer-Encoding: base64
Content-Length: 10692

SW5kZXg6IHdpbnN1cC9jeWd3aW4vYXV0b2xvYWQuY2MKPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jeWd3
aW4vYXV0b2xvYWQuY2MsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMwpkaWZm
IC1jIC0yIC1yMS4zIGF1dG9sb2FkLmNjCioqKiB3aW5zdXAvY3lnd2luL2F1
dG9sb2FkLmNjCTIwMDAvMTEvMDcgMjA6MDE6MDkJMS4zCi0tLSB3aW5zdXAv
Y3lnd2luL2F1dG9sb2FkLmNjCTIwMDAvMTEvMjkgMTQ6MzQ6NTgKKioqKioq
KioqKioqKioqCioqKiAyNDgsMjUxICoqKioKLS0tIDI0OCwyNTIgLS0tLQog
IAogIExvYWRETExpbml0ICh1c2VyMzIpCisgTG9hZERMTGZ1bmMgKENoYXJU
b09lbUEsIDgsIHVzZXIzMikKICBMb2FkRExMZnVuYyAoQ2hhclRvT2VtQnVm
ZkEsIDEyLCB1c2VyMzIpCiAgTG9hZERMTGZ1bmMgKENsb3NlQ2xpcGJvYXJk
LCAwLCB1c2VyMzIpCkluZGV4OiB3aW5zdXAvY3lnd2luL2RjcnQwLmNjCj09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93
aW5zdXAvY3lnd2luL2RjcnQwLmNjLHYKcmV0cmlldmluZyByZXZpc2lvbiAx
LjgxCmRpZmYgLWMgLTIgLXIxLjgxIGRjcnQwLmNjCioqKiB3aW5zdXAvY3ln
d2luL2RjcnQwLmNjCTIwMDAvMTEvMTUgMDY6Mjc6NDgJMS44MQotLS0gd2lu
c3VwL2N5Z3dpbi9kY3J0MC5jYwkyMDAwLzExLzI5IDE0OjM0OjU5CioqKioq
KioqKioqKioqKgoqKiogMTYsMTkgKioqKgotLS0gMTYsMjEgLS0tLQogICNp
bmNsdWRlIDxjdHlwZS5oPgogICNpbmNsdWRlIDxsaW1pdHMuaD4KKyAjaW5j
bHVkZSA8d2luZ2RpLmg+CisgI2luY2x1ZGUgPHdpbnVzZXIuaD4KICAjaW5j
bHVkZSAic3luYy5oIgogICNpbmNsdWRlICJzaWdwcm9jLmgiCioqKioqKioq
KioqKioqKgoqKiogNTYsNTkgKioqKgotLS0gNTgsNjIgLS0tLQogIEJPT0wg
c3RyaXBfdGl0bGVfcGF0aCA9IEZBTFNFOwogIEJPT0wgYWxsb3dfZ2xvYiA9
IFRSVUU7CisgY29kZXBhZ2VfdHlwZSBjdXJyZW50X2NvZGVwYWdlID0gYW5z
aV9jcDsKICAKICBpbnQgY3lnd2luX2ZpbmlzaGVkX2luaXRpYWxpemluZyA9
IDA7CioqKioqKioqKioqKioqKgoqKiogNzg5LDc5MiAqKioqCi0tLSA3OTIs
Nzk4IC0tLS0KICAgICAgICBjaGFyICpsaW5lID0gR2V0Q29tbWFuZExpbmVB
ICgpOwogICAgICAgIGxpbmUgPSBzdHJjcHkgKChjaGFyICopIGFsbG9jYSAo
c3RybGVuIChsaW5lKSArIDEpLCBsaW5lKTsKKyAKKyAgICAgICBpZiAoY3Vy
cmVudF9jb2RlcGFnZSA9PSBvZW1fY3ApCisgICAgICAgICBDaGFyVG9PZW1B
ICggbGluZSwgbGluZSApOwogIAogICAgICAgIC8qIFNjYW4gdGhlIGNvbW1h
bmQgbGluZSBhbmQgYnVpbGQgYXJndi4gIEV4cGFuZCB3aWxkY2FyZHMgaWYg
bm90CkluZGV4OiB3aW5zdXAvY3lnd2luL2Vudmlyb24uY2MKPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQpSQ1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9j
eWd3aW4vZW52aXJvbi5jYyx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4zNwpk
aWZmIC1jIC0yIC1yMS4zNyBlbnZpcm9uLmNjCioqKiB3aW5zdXAvY3lnd2lu
L2Vudmlyb24uY2MJMjAwMC8xMS8xNSAwNjoyNzo0OAkxLjM3Ci0tLSB3aW5z
dXAvY3lnd2luL2Vudmlyb24uY2MJMjAwMC8xMS8yOSAxNDozNDo1OQoqKioq
KioqKioqKioqKioKKioqIDQzMiw0MzUgKioqKgotLS0gNDMyLDQzNiAtLS0t
CiAgewogICAgeyJiaW5tb2RlIiwge3g6ICZiaW5tb2RlfSwganVzdHNldCwg
TlVMTCwge3tPX1RFWFR9LCB7T19CSU5BUll9fX0sCisgICB7ImNvZGVwYWdl
Iiwge2Z1bmM6ICZjb2RlcGFnZV9pbml0fSwgaXNmdW5jLCBOVUxMLCB7ezB9
LCB7MH19fSwKICAgIHsiZW52Y2FjaGUiLCB7JmVudmNhY2hlfSwganVzdHNl
dCwgTlVMTCwge3tUUlVFfSwge0ZBTFNFfX19LAogICAgeyJlcnJvcl9zdGFy
dCIsIHtmdW5jOiAmZXJyb3Jfc3RhcnRfaW5pdH0sIGlzZnVuYywgTlVMTCwg
e3swfSwgezB9fX0sCkluZGV4OiB3aW5zdXAvY3lnd2luL2ZoYW5kbGVyX2Ns
aXBib2FyZC5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAv
Y3ZzL3NyYy9zcmMvd2luc3VwL2N5Z3dpbi9maGFuZGxlcl9jbGlwYm9hcmQu
Y2MsdgpyZXRyaWV2aW5nIHJldmlzaW9uIDEuMgpkaWZmIC1jIC0yIC1yMS4y
IGZoYW5kbGVyX2NsaXBib2FyZC5jYwoqKiogd2luc3VwL2N5Z3dpbi9maGFu
ZGxlcl9jbGlwYm9hcmQuY2MJMjAwMC8xMC8yOCAwNTo0MTo0MwkxLjIKLS0t
IHdpbnN1cC9jeWd3aW4vZmhhbmRsZXJfY2xpcGJvYXJkLmNjCTIwMDAvMTEv
MjkgMTQ6MzQ6NTkKKioqKioqKioqKioqKioqCioqKiA1Myw1NyAqKioqCiAg
ICAgIHsKICAgICAgICBPcGVuQ2xpcGJvYXJkKDApOwohICAgICAgIGhnbGIg
PSBHZXRDbGlwYm9hcmREYXRhKENGX1RFWFQpOwogICAgICAgIGxwc3RyID0g
KExQU1RSKSBHbG9iYWxMb2NrKGhnbGIpOwogICAgICAgIGlmIChsZW4gPCBz
aXplb2YgKGxwc3RyKSkKLS0tIDUzLDU3IC0tLS0KICAgICAgewogICAgICAg
IE9wZW5DbGlwYm9hcmQoMCk7CiEgICAgICAgaGdsYiA9IEdldENsaXBib2Fy
ZERhdGEoKGN1cnJlbnRfY29kZXBhZ2U9PWFuc2lfY3AgPyBDRl9URVhUIDog
Q0ZfT0VNVEVYVCkpOwogICAgICAgIGxwc3RyID0gKExQU1RSKSBHbG9iYWxM
b2NrKGhnbGIpOwogICAgICAgIGlmIChsZW4gPCBzaXplb2YgKGxwc3RyKSkK
SW5kZXg6IHdpbnN1cC9jeWd3aW4vZmhhbmRsZXJfY29uc29sZS5jYwo9PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2lu
c3VwL2N5Z3dpbi9maGFuZGxlcl9jb25zb2xlLmNjLHYKcmV0cmlldmluZyBy
ZXZpc2lvbiAxLjI4CmRpZmYgLWMgLTIgLXIxLjI4IGZoYW5kbGVyX2NvbnNv
bGUuY2MKKioqIHdpbnN1cC9jeWd3aW4vZmhhbmRsZXJfY29uc29sZS5jYwky
MDAwLzExLzE3IDAzOjAxOjE0CTEuMjgKLS0tIHdpbnN1cC9jeWd3aW4vZmhh
bmRsZXJfY29uc29sZS5jYwkyMDAwLzExLzI5IDE0OjM1OjAyCioqKioqKioq
KioqKioqKgoqKiogMjIyLDIyNiAqKioqCiAgCSAgLyogTmVlZCB0aGlzIGNo
ZWNrIHNpbmNlIFVTIGNvZGUgcGFnZSBzZWVtcyB0byBoYXZlIGEgYnVnIHdo
ZW4KICAJICAgICBjb252ZXJ0aW5nIGEgQ1RSTC1VLiAqLwohIAkgIGlmICgo
dW5zaWduZWQgY2hhcilpY2ggPiAweDdmKQogIAkgICAgT2VtVG9DaGFyQnVm
ZiAodG1wICsgMSwgdG1wICsgMSwgMSk7CiAgCSAgaWYgKCEoaW5wdXRfcmVj
LkV2ZW50LktleUV2ZW50LmR3Q29udHJvbEtleVN0YXRlICYgTEVGVF9BTFRf
UFJFU1NFRCkpCi0tLSAyMjIsMjI2IC0tLS0KICAJICAvKiBOZWVkIHRoaXMg
Y2hlY2sgc2luY2UgVVMgY29kZSBwYWdlIHNlZW1zIHRvIGhhdmUgYSBidWcg
d2hlbgogIAkgICAgIGNvbnZlcnRpbmcgYSBDVFJMLVUuICovCiEgCSAgaWYg
KCh1bnNpZ25lZCBjaGFyKWljaCA+IDB4N2YgJiYgY3VycmVudF9jb2RlcGFn
ZSA9PSBhbnNpX2NwKQogIAkgICAgT2VtVG9DaGFyQnVmZiAodG1wICsgMSwg
dG1wICsgMSwgMSk7CiAgCSAgaWYgKCEoaW5wdXRfcmVjLkV2ZW50LktleUV2
ZW50LmR3Q29udHJvbEtleVN0YXRlICYgTEVGVF9BTFRfUFJFU1NFRCkpCioq
KioqKioqKioqKioqKgoqKiogMTA3NSwxMDc5ICoqKioKICAgICAgICBkbyB7
CiAgCXNpemVfdCBsMiA9IG1pbiAoc2l6ZW9mIChidWYpLCBsZW4pOwohIAlD
aGFyVG9PZW1CdWZmICgoTFBDU1RSKXNyYywgYnVmLCBsMik7CiAgCWlmICgh
IFdyaXRlRmlsZSAoZ2V0X291dHB1dF9oYW5kbGUgKCksIGJ1ZiwgbDIsICZk
b25lLCAwKSkKICAJewotLS0gMTA3NSwxMDgyIC0tLS0KICAgICAgICBkbyB7
CiAgCXNpemVfdCBsMiA9IG1pbiAoc2l6ZW9mIChidWYpLCBsZW4pOwohIAlp
ZiAoY3VycmVudF9jb2RlcGFnZSA9PSBhbnNpX2NwKQohIAkgIENoYXJUb09l
bUJ1ZmYgKChMUENTVFIpc3JjLCBidWYsIGwyKTsKISAJZWxzZQohIAkgIHN0
cm5jcHkgKGJ1ZiwgKExQQ1NUUilzcmMsIGwyKTsKICAJaWYgKCEgV3JpdGVG
aWxlIChnZXRfb3V0cHV0X2hhbmRsZSAoKSwgYnVmLCBsMiwgJmRvbmUsIDAp
KQogIAl7CkluZGV4OiB3aW5zdXAvY3lnd2luL3BpbmZvLmNjCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAv
Y3lnd2luL3BpbmZvLmNjLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjM4CmRp
ZmYgLWMgLTIgLXIxLjM4IHBpbmZvLmNjCioqKiB3aW5zdXAvY3lnd2luL3Bp
bmZvLmNjCTIwMDAvMTEvMDUgMDY6NDI6MjMJMS4zOAotLS0gd2luc3VwL2N5
Z3dpbi9waW5mby5jYwkyMDAwLzExLzI5IDE0OjM1OjAzCioqKioqKioqKioq
KioqKgoqKiogODgsOTEgKioqKgotLS0gODgsMTE2IC0tLS0KICB9CiAgCisg
ZXh0ZXJuICJDIiB2b2lkCisgY29kZXBhZ2VfaW5pdCAoY29uc3QgY2hhciAq
YnVmKQorIHsKKyAgIGlmICghYnVmIHx8ICEqYnVmKQorICAgICByZXR1cm47
CisgCisgICBpZiAoIHN0cmNtcCAoIGJ1ZiwgIm9lbSIgKSA9PSAwICkKKyAg
ICAgeworICAgICAgIGN1cnJlbnRfY29kZXBhZ2UgPSBvZW1fY3A7CisgICAg
ICAgU2V0RmlsZUFwaXNUb09FTSAoKTsKKyAgICAgICBkZWJ1Z19wcmludGYg
KCAiRmlsZSBBUElzIHNldCB0byBPRU0iICk7CisgICAgIH0KKyAgIGVsc2Ug
aWYgKCBzdHJjbXAgKCBidWYsICJhbnNpIiApID09IDAgKQorICAgICB7Cisg
ICAgICAgY3VycmVudF9jb2RlcGFnZSA9IGFuc2lfY3A7CisgICAgICAgU2V0
RmlsZUFwaXNUb0FOU0kgKCk7CisgICAgICAgZGVidWdfcHJpbnRmICggIkZp
bGUgQVBJcyBzZXQgdG8gQU5TSSIgKTsKKyAgICAgfQorICAgZWxzZQorICAg
ICB7CisgICAgICAgZGVidWdfcHJpbnRmICggIldyb25nIGNvZGVwYWdlIG5h
bWU6ICVzIiwgYnVmICk7CisgICAgIH0KKyB9CisgCisgCiAgLyogSW5pdGlh
bGl6ZSB0aGUgcHJvY2VzcyB0YWJsZSBlbnRyeSBmb3IgdGhlIGN1cnJlbnQg
dGFzay4KICAgICBUaGlzIGlzIG5vdCBjYWxsZWQgZm9yIGZvcmsnZCB0YXNr
cywgb25seSBleGVjJ2Qgb25lcy4gICovCkluZGV4OiB3aW5zdXAvY3lnd2lu
L3NlY3VyaXR5LmNjCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6
IC9jdnMvc3JjL3NyYy93aW5zdXAvY3lnd2luL3NlY3VyaXR5LmNjLHYKcmV0
cmlldmluZyByZXZpc2lvbiAxLjI5CmRpZmYgLWMgLTIgLXIxLjI5IHNlY3Vy
aXR5LmNjCioqKiB3aW5zdXAvY3lnd2luL3NlY3VyaXR5LmNjCTIwMDAvMTEv
MTUgMjE6MDQ6MDIJMS4yOQotLS0gd2luc3VwL2N5Z3dpbi9zZWN1cml0eS5j
YwkyMDAwLzExLzI5IDE0OjM1OjAzCioqKioqKioqKioqKioqKgoqKiogMjMs
MjYgKioqKgotLS0gMjMsMjggLS0tLQogICNpbmNsdWRlIDxzeXMvYWNsLmg+
CiAgI2luY2x1ZGUgPGN0eXBlLmg+CisgI2luY2x1ZGUgPHdpbmdkaS5oPgor
ICNpbmNsdWRlIDx3aW51c2VyLmg+CiAgI2luY2x1ZGUgImN5Z2Vycm5vLmgi
CiAgI2luY2x1ZGUgImZoYW5kbGVyLmgiCioqKioqKioqKioqKioqKgoqKiog
NTE0LDUxOSAqKioqCiAgCiAgICBEV09SRCBsZW4gPSAwOwohICAgaWYgKCEg
R2V0RmlsZVNlY3VyaXR5IChmaWxlLAohIAkJCSBPV05FUl9TRUNVUklUWV9J
TkZPUk1BVElPTgogIAkJCSB8IEdST1VQX1NFQ1VSSVRZX0lORk9STUFUSU9O
CiAgCQkJIHwgREFDTF9TRUNVUklUWV9JTkZPUk1BVElPTiwKLS0tIDUxNiw1
MzEgLS0tLQogIAogICAgRFdPUkQgbGVuID0gMDsKISAgIGNvbnN0IGNoYXIg
KnBmaWxlID0gZmlsZTsKISAgIGNoYXIgZmJ1ZiBbUEFUSF9NQVhdOwohICAg
aWYgKGN1cnJlbnRfY29kZXBhZ2UgPT0gb2VtX2NwKQohICAgICB7CiEgICAg
ICAgRFdPUkQgZm5hbWVfbGVuID0gbWluIChzaXplb2YgKGZidWYpIC0gMSwg
c3RybGVuIChmaWxlKSk7CiEgICAgICAgYnplcm8gKGZidWYsIHNpemVvZiAo
ZmJ1ZikpOwohICAgICAgIE9lbVRvQ2hhckJ1ZmYoZmlsZSwgZmJ1ZiwgZm5h
bWVfbGVuKTsKISAgICAgICBwZmlsZSA9IGZidWY7CiEgICAgIH0KISAKISAg
IGlmICghIEdldEZpbGVTZWN1cml0eSAocGZpbGUsCiEgCSAJCU9XTkVSX1NF
Q1VSSVRZX0lORk9STUFUSU9OCiAgCQkJIHwgR1JPVVBfU0VDVVJJVFlfSU5G
T1JNQVRJT04KICAJCQkgfCBEQUNMX1NFQ1VSSVRZX0lORk9STUFUSU9OLApJ
bmRleDogd2luc3VwL2N5Z3dpbi93aW5zdXAuaAo9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2N5Z3dpbi93
aW5zdXAuaCx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS40NApkaWZmIC1jIC0y
IC1yMS40NCB3aW5zdXAuaAoqKiogd2luc3VwL2N5Z3dpbi93aW5zdXAuaAky
MDAwLzEwLzI3IDA5OjUwOjMzCTEuNDQKLS0tIHdpbnN1cC9jeWd3aW4vd2lu
c3VwLmgJMjAwMC8xMS8yOSAxNDozNTowMwoqKioqKioqKioqKioqKioKKioq
IDg0LDk0ICoqKioKICBleHRlcm4gb3NfdHlwZSBvc19iZWluZ19ydW47CiAg
CiAgLyogVXNlZCB0byBjaGVjayBpZiBDeWd3aW4gRExMIGlzIGR5bmFtaWNh
bGx5IGxvYWRlZC4gKi8KICBleHRlcm4gaW50IGR5bmFtaWNhbGx5X2xvYWRl
ZDsKICAKICAjZGVmaW5lIHN5c193Y3N0b21icyh0Z3Qsc3JjLGxlbikgXAoh
IAkJICAgIFdpZGVDaGFyVG9NdWx0aUJ5dGUoQ1BfQUNQLDAsKHNyYyksLTEs
KHRndCksKGxlbiksTlVMTCxOVUxMKQogICNkZWZpbmUgc3lzX21ic3Rvd2Nz
KHRndCxzcmMsbGVuKSBcCiEgCQkgICAgTXVsdGlCeXRlVG9XaWRlQ2hhcihD
UF9BQ1AsMCwoc3JjKSwtMSwodGd0KSwobGVuKSkKICAKICAjZGVmaW5lIFRJ
VExFU0laRSAxMDI0Ci0tLSA4NCw5NyAtLS0tCiAgZXh0ZXJuIG9zX3R5cGUg
b3NfYmVpbmdfcnVuOwogIAorIGVudW0gY29kZXBhZ2VfdHlwZSB7YW5zaV9j
cCwgb2VtX2NwfTsKKyBleHRlcm4gY29kZXBhZ2VfdHlwZSBjdXJyZW50X2Nv
ZGVwYWdlOworIAogIC8qIFVzZWQgdG8gY2hlY2sgaWYgQ3lnd2luIERMTCBp
cyBkeW5hbWljYWxseSBsb2FkZWQuICovCiAgZXh0ZXJuIGludCBkeW5hbWlj
YWxseV9sb2FkZWQ7CiAgCiAgI2RlZmluZSBzeXNfd2NzdG9tYnModGd0LHNy
YyxsZW4pIFwKISAJCSAgICBXaWRlQ2hhclRvTXVsdGlCeXRlKChjdXJyZW50
X2NvZGVwYWdlPT1hbnNpX2NwP0NQX0FDUDpDUF9PRU1DUCksMCwoc3JjKSwt
MSwodGd0KSwobGVuKSxOVUxMLE5VTEwpCiAgI2RlZmluZSBzeXNfbWJzdG93
Y3ModGd0LHNyYyxsZW4pIFwKISAJCSAgICBNdWx0aUJ5dGVUb1dpZGVDaGFy
KChjdXJyZW50X2NvZGVwYWdlPT1hbnNpX2NwP0NQX0FDUDpDUF9PRU1DUCks
MCwoc3JjKSwtMSwodGd0KSwobGVuKSkKICAKICAjZGVmaW5lIFRJVExFU0la
RSAxMDI0CioqKioqKioqKioqKioqKgoqKiogMTgyLDE4NSAqKioqCi0tLSAx
ODUsMTkwIC0tLS0KICBleHRlcm4gIkMiIHZvaWQgZXJyb3Jfc3RhcnRfaW5p
dCAoY29uc3QgY2hhciopOwogIGV4dGVybiAiQyIgaW50IHRyeV90b19kZWJ1
ZyAoKTsKKyAKKyBleHRlcm4gIkMiIHZvaWQgY29kZXBhZ2VfaW5pdCAoY29u
c3QgY2hhciopOwogIAogIGV4dGVybiBpbnQgY3lnd2luX2ZpbmlzaGVkX2lu
aXRpYWxpemluZzsK

------------=_1583532846-65437-17--
