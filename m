From: egor duda <deo@logos-m.ru>
To: cygwin-patches@cygwin.com
Subject: "correct" stack trace in gdb
Date: Wed, 25 Apr 2001 23:21:00 -0000
Message-id: <189167092696.20010426101930@logos-m.ru>
X-SW-Source: 2001-q2/msg00165.html
Content-type: multipart/mixed; boundary="----------=_1583532847-65438-52"

This is a multi-part message in MIME format...

------------=_1583532847-65438-52
Content-length: 1868

Hi!

  several people complained in mailing list recently that when they're
"error_start"ing gdb or dumper to analyze crashes, they see "incorrect"
stack traces -- without the frame of function which had actually crashed.
this patch is supposed to fix this problem, but it has a drawback of
stripping handle_exception() and try_to_debug() frames from stack
trace.

2001-04-24  Egor Duda  <deo@logos-m.ru>

        * exceptions.cc (try_to_debug): store exception context in shared
        memory area. Create signalling event before starting debugger.
        (handle_exceptions): Pass exception context to debugger.
        * winsup.h (try_to_debug): Change prototype.
        * include/sys/cygwin.h: Add structure for passing data to debugger.

2001-04-24  Egor Duda  <deo@logos-m.ru>

        * dumper.cc (dumper::collect_process_information): Change name of
        signalling event to match with cygwin1.dll
        (dumper::write_core_dump): Get exception context from shared
        memory area and store it as context of appropriate thread.

2001-04-24  Egor Duda  <deo@logos-m.ru>

        * win32-nat.c (struct thread_info_struct): Add exception context
        information.
        (get_thread_context): New function.
        (do_child_fetch_inferior_registers): Use it.
        (do_child_store_inferior_registers): Ditto.
        (get_exception_context_info): Get exception context from shared
        memory area.
        (handle_exception): Fix typo.
        (get_child_debug_event): Store pid of current process. Get exception
        context from debuggee.

egor.            mailto:deo@logos-m.ru icq 5165414 fidonet 2:5020/496.19
exception-on-stack-gdb.ChangeLog
exception-on-stack-gdb.diff
exception-on-stack-winsup-cygwin.ChangeLog
exception-on-stack-winsup-cygwin.diff
exception-on-stack-winsup-utils.ChangeLog
exception-on-stack-winsup-utils.diff


------------=_1583532847-65438-52
Content-Type: text/plain; charset=us-ascii;
 name="exception-on-stack-gdb.ChangeLog"
Content-Disposition: inline; filename="exception-on-stack-gdb.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 615

MjAwMS0wNC0yNCAgRWdvciBEdWRhICA8ZGVvQGxvZ29zLW0ucnU+CgoJKiB3
aW4zMi1uYXQuYyAoc3RydWN0IHRocmVhZF9pbmZvX3N0cnVjdCk6IEFkZCBl
eGNlcHRpb24gY29udGV4dAoJaW5mb3JtYXRpb24uCgkoZ2V0X3RocmVhZF9j
b250ZXh0KTogTmV3IGZ1bmN0aW9uLgoJKGRvX2NoaWxkX2ZldGNoX2luZmVy
aW9yX3JlZ2lzdGVycyk6IFVzZSBpdC4KCShkb19jaGlsZF9zdG9yZV9pbmZl
cmlvcl9yZWdpc3RlcnMpOiBEaXR0by4KCShnZXRfZXhjZXB0aW9uX2NvbnRl
eHRfaW5mbyk6IEdldCBleGNlcHRpb24gY29udGV4dCBmcm9tIHNoYXJlZAoJ
bWVtb3J5IGFyZWEuCgkoaGFuZGxlX2V4Y2VwdGlvbik6IEZpeCB0eXBvLgoJ
KGdldF9jaGlsZF9kZWJ1Z19ldmVudCk6IFN0b3JlIHBpZCBvZiBjdXJyZW50
IHByb2Nlc3MuIEdldCBleGNlcHRpb24KCWNvbnRleHQgZnJvbSBkZWJ1Z2dl
ZS4K

------------=_1583532847-65438-52
Content-Type: text/x-diff; charset=us-ascii;
 name="exception-on-stack-gdb.diff"
Content-Disposition: inline; filename="exception-on-stack-gdb.diff"
Content-Transfer-Encoding: base64
Content-Length: 5039

SW5kZXg6IHdpbjMyLW5hdC5jCj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNT
IGZpbGU6IC9jdnMvc3JjL3NyYy9nZGIvd2luMzItbmF0LmMsdgpyZXRyaWV2
aW5nIHJldmlzaW9uIDEuMjYKZGlmZiAtdSAtcCAtMiAtcjEuMjYgd2luMzIt
bmF0LmMKLS0tIHdpbjMyLW5hdC5jCTIwMDEvMDMvMTggMjE6MzU6NTgJMS4y
NgorKysgd2luMzItbmF0LmMJMjAwMS8wNC8yNCAwNjozMzoyNgpAQCAtOTUs
NCArOTUsNiBAQCB0eXBlZGVmIHN0cnVjdCB0aHJlYWRfaW5mb19zdHJ1Y3QK
ICAgICBpbnQgc3VzcGVuZF9jb3VudDsKICAgICBDT05URVhUIGNvbnRleHQ7
CisgICAgaW50IGV4Y2VwdGlvbl9jb250ZXh0X3ByZXNlbnQ7CisgICAgQ09O
VEVYVCBleGNlcHRpb25fY29udGV4dDsKICAgICBTVEFDS0ZSQU1FIHNmOwog
ICB9CkBAIC0xMDYsNCArMTA4LDUgQEAgc3RhdGljIERFQlVHX0VWRU5UIGN1
cnJlbnRfZXZlbnQ7CS8qIFRoZQogCQkJCQkgICBXYWl0Rm9yRGVidWdFdmVu
dCAqLwogc3RhdGljIEhBTkRMRSBjdXJyZW50X3Byb2Nlc3NfaGFuZGxlOwkv
KiBDdXJyZW50bHkgZXhlY3V0aW5nIHByb2Nlc3MgKi8KK3N0YXRpYyBEV09S
RCBjdXJyZW50X3Byb2Nlc3NfaWQ7CS8qIEN1cnJlbnRseSBleGVjdXRpbmcg
cHJvY2VzcyBpZCAqLwogc3RhdGljIHRocmVhZF9pbmZvICpjdXJyZW50X3Ro
cmVhZDsJLyogSW5mbyBvbiBjdXJyZW50bHkgc2VsZWN0ZWQgdGhyZWFkICov
CiBzdGF0aWMgRFdPUkQgbWFpbl90aHJlYWRfaWQ7CS8qIFRocmVhZCBJRCBv
ZiB0aGUgbWFpbiB0aHJlYWQgKi8KQEAgLTIxOSw0ICsyMjIsMTEgQEAgdGhy
ZWFkX3JlYyAoRFdPUkQgaWQsIGludCBnZXRfY29udGV4dCkKIH0KIAorc3Rh
dGljIENPTlRFWFQgKgorZ2V0X3RocmVhZF9jb250ZXh0ICh0aHJlYWRfaW5m
byogdGgpCit7CisgIHJldHVybiAodGgtPmV4Y2VwdGlvbl9jb250ZXh0X3By
ZXNlbnQgPworICAgICAgICAgICAgJnRoLT5leGNlcHRpb25fY29udGV4dCA6
ICZ0aC0+Y29udGV4dCk7Cit9CisKIC8qIEFkZCBhIHRocmVhZCB0byB0aGUg
dGhyZWFkIGxpc3QgKi8KIHN0YXRpYyB0aHJlYWRfaW5mbyAqCkBAIC0yOTAs
NSArMzAwLDYgQEAgc3RhdGljIHZvaWQKIGRvX2NoaWxkX2ZldGNoX2luZmVy
aW9yX3JlZ2lzdGVycyAoaW50IHIpCiB7Ci0gIGNoYXIgKmNvbnRleHRfb2Zm
c2V0ID0gKChjaGFyICopICZjdXJyZW50X3RocmVhZC0+Y29udGV4dCkgKyBt
YXBwaW5nc1tyXTsKKyAgY2hhciAqY29udGV4dF9vZmZzZXQgPSAoKGNoYXIg
KikgZ2V0X3RocmVhZF9jb250ZXh0IChjdXJyZW50X3RocmVhZCkpICsKKwkJ
CSBtYXBwaW5nc1tyXTsKICAgbG9uZyBsOwogICBpZiAociA9PSBGQ1NfUkVH
TlVNKQpAQCAtMzIyLDUgKzMzMyw1IEBAIGRvX2NoaWxkX3N0b3JlX2luZmVy
aW9yX3JlZ2lzdGVycyAoaW50IHIKIHsKICAgaWYgKHIgPj0gMCkKLSAgICBy
ZWFkX3JlZ2lzdGVyX2dlbiAociwgKChjaGFyICopICZjdXJyZW50X3RocmVh
ZC0+Y29udGV4dCkgKyBtYXBwaW5nc1tyXSk7CisgICAgcmVhZF9yZWdpc3Rl
cl9nZW4gKHIsICgoY2hhciAqKSBnZXRfdGhyZWFkX2NvbnRleHQgKGN1cnJl
bnRfdGhyZWFkKSkgKyBtYXBwaW5nc1tyXSk7CiAgIGVsc2UKICAgICB7CkBA
IC02ODksNCArNzAwLDQxIEBAIGluZm9fZGxsX2NvbW1hbmQgKGNoYXIgKmln
bm9yZSBBVFRSSUJVVEUKIH0KIAorc3RhdGljIGludAorZ2V0X2V4Y2VwdGlv
bl9jb250ZXh0X2luZm8gKERXT1JEIHBpZCkKK3sKKyAgaW50IHJldF92YWwg
PSAwOworICB0aHJlYWRfaW5mbyogdGg7CisgIGNoYXIgc2hhcmVfbmFtZSBb
NjRdOworICBIQU5ETEUgc2hhcmVfaCA9IE5VTEw7CisgIHN0cnVjdCBkZWJ1
Z2dlcl9pbmZvKiBzaGFyZV9wdHI7CisKKyAgc3ByaW50ZiAoc2hhcmVfbmFt
ZSwgImN5Z3dpbl9kZWJ1Z2dlcl9zaGFyZSVsZCIsIHBpZCk7CisgIHNoYXJl
X2ggPSBPcGVuRmlsZU1hcHBpbmcgKEZJTEVfTUFQX1JFQUQsIEZBTFNFLCBz
aGFyZV9uYW1lKTsKKyAgaWYgKCFzaGFyZV9oKSAgICAKKyAgICBnb3RvIG91
dDsKKworICBzaGFyZV9wdHIgPSAoc3RydWN0IGRlYnVnZ2VyX2luZm8qKSBN
YXBWaWV3T2ZGaWxlIChzaGFyZV9oLAorCQkJCQkJRklMRV9NQVBfUkVBRCwK
KwkJCQkJCTAsIDAsCisJCQkJCQlzaXplb2YgKHN0cnVjdCBkZWJ1Z2dlcl9p
bmZvKSk7CisgIGlmICghc2hhcmVfcHRyKQorICAgIGdvdG8gb3V0OworICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IAorICBpZiAoISh0aCA9IHRocmVhZF9yZWMgKHNoYXJlX3B0ci0+ZXhjZXB0
aW9uX3RocmVhZF9pZCwgMCkpKQorICAgIGdvdG8gb3V0OworCisgIHRoLT5l
eGNlcHRpb25fY29udGV4dF9wcmVzZW50ID0gMTsKKyAgbWVtbW92ZSAoJih0
aC0+ZXhjZXB0aW9uX2NvbnRleHQpLAorCSAgICZzaGFyZV9wdHItPmV4Y2Vw
dGlvbl9jb250ZXh0LAorCSAgIHNpemVvZiAodGgtPmV4Y2VwdGlvbl9jb250
ZXh0KSk7CisgIHJldF92YWwgPSAxOworCitvdXQ6CisgIGlmIChzaGFyZV9o
KSAKKyAgICBDbG9zZUhhbmRsZSAoc2hhcmVfaCk7CisKKyAgcmV0dXJuIHJl
dF92YWw7Cit9CisKIC8qIEhhbmRsZSBERUJVR19TVFJJTkcgb3V0cHV0IGZy
b20gY2hpbGQgcHJvY2Vzcy4KICAgIEN5Z3dpbiBwcmVwZW5kcyBpdHMgbWVz
c2FnZXMgd2l0aCBhICJjeWd3aW46Ii4gIEludGVycHJldCB0aGlzIGFzCkBA
IC03NDUsNSArNzkzLDUgQEAgaGFuZGxlX2V4Y2VwdGlvbiAoc3RydWN0IHRh
cmdldF93YWl0c3RhdAogICAgIGNhc2UgU1RBVFVTX0ZMT0FUX09WRVJGTE9X
OgogICAgIGNhc2UgU1RBVFVTX0lOVEVHRVJfRElWSURFX0JZX1pFUk86Ci0g
ICAgICBERUJVR19FWENFUFQgKCgiZ2RiOiBUYXJnZXQgZXhjZXB0aW9uIFNU
QUNLX09WRVJGTE9XIGF0IDB4JTA4bHhcbiIsCisgICAgICBERUJVR19FWENF
UFQgKCgiZ2RiOiBUYXJnZXQgZXhjZXB0aW9uIERJVklERV9PVkVSRkxPVyBh
dCAweCUwOGx4XG4iLAogICAgICAgIChEV09SRCkgY3VycmVudF9ldmVudC51
LkV4Y2VwdGlvbi5FeGNlcHRpb25SZWNvcmQuRXhjZXB0aW9uQWRkcmVzcykp
OwogICAgICAgb3Vyc3RhdHVzLT52YWx1ZS5zaWcgPSBUQVJHRVRfU0lHTkFM
X0ZQRTsKQEAgLTg2OSw0ICs5MTcsNSBAQCBnZXRfY2hpbGRfZGVidWdfZXZl
bnQgKGludCBwaWQgQVRUUklCVVRFCiAJCSAgICAgIkNSRUFURV9QUk9DRVNT
X0RFQlVHX0VWRU5UIikpOwogICAgICAgY3VycmVudF9wcm9jZXNzX2hhbmRs
ZSA9IGN1cnJlbnRfZXZlbnQudS5DcmVhdGVQcm9jZXNzSW5mby5oUHJvY2Vz
czsKKyAgICAgIGN1cnJlbnRfcHJvY2Vzc19pZCA9IGN1cnJlbnRfZXZlbnQu
ZHdQcm9jZXNzSWQ7CiAKICAgICAgIG1haW5fdGhyZWFkX2lkID0gY3VycmVu
dF9ldmVudC5kd1RocmVhZElkOwpAQCAtOTE2LDQgKzk2NSw1IEBAIGdldF9j
aGlsZF9kZWJ1Z19ldmVudCAoaW50IHBpZCBBVFRSSUJVVEUKIAkJICAgICAo
dW5zaWduZWQpIGN1cnJlbnRfZXZlbnQuZHdUaHJlYWRJZCwKIAkJICAgICAi
RVhDRVBUSU9OX0RFQlVHX0VWRU5UIikpOworICAgICAgZ2V0X2V4Y2VwdGlv
bl9jb250ZXh0X2luZm8gKGN1cnJlbnRfcHJvY2Vzc19pZCk7CiAgICAgICBo
YW5kbGVfZXhjZXB0aW9uIChvdXJzdGF0dXMpOwogICAgICAgcmV0dmFsID0g
Y3VycmVudF9ldmVudC5kd1RocmVhZElkOwo=

------------=_1583532847-65438-52
Content-Type: text/plain; charset=us-ascii;
 name="exception-on-stack-winsup-cygwin.ChangeLog"
Content-Disposition: inline;
 filename="exception-on-stack-winsup-cygwin.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 468

MjAwMS0wNC0yNCAgRWdvciBEdWRhICA8ZGVvQGxvZ29zLW0ucnU+CgoJKiBl
eGNlcHRpb25zLmNjICh0cnlfdG9fZGVidWcpOiBzdG9yZSBleGNlcHRpb24g
Y29udGV4dCBpbiBzaGFyZWQKCW1lbW9yeSBhcmVhLiBDcmVhdGUgc2lnbmFs
bGluZyBldmVudCBiZWZvcmUgc3RhcnRpbmcgZGVidWdnZXIuCgkoaGFuZGxl
X2V4Y2VwdGlvbnMpOiBQYXNzIGV4Y2VwdGlvbiBjb250ZXh0IHRvIGRlYnVn
Z2VyLgoJKiB3aW5zdXAuaCAodHJ5X3RvX2RlYnVnKTogQ2hhbmdlIHByb3Rv
dHlwZS4KCSogaW5jbHVkZS9zeXMvY3lnd2luLmg6IEFkZCBzdHJ1Y3R1cmUg
Zm9yIHBhc3NpbmcgZGF0YSB0byBkZWJ1Z2dlci4K

------------=_1583532847-65438-52
Content-Type: text/x-diff; charset=us-ascii;
 name="exception-on-stack-winsup-cygwin.diff"
Content-Disposition: inline; filename="exception-on-stack-winsup-cygwin.diff"
Content-Transfer-Encoding: base64
Content-Length: 5124

SW5kZXg6IGV4Y2VwdGlvbnMuY2MKPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpS
Q1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jeWd3aW4vZXhjZXB0aW9u
cy5jYyx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS43NApkaWZmIC11IC1wIC0y
IC1yMS43NCBleGNlcHRpb25zLmNjCi0tLSBleGNlcHRpb25zLmNjCTIwMDEv
MDQvMDkgMDA6NDQ6MjUJMS43NAorKysgZXhjZXB0aW9ucy5jYwkyMDAxLzA0
LzI0IDA2OjQ1OjE5CkBAIC0yMiw0ICsyMiw1IEBAIGRldGFpbHMuICovCiAj
aW5jbHVkZSAicGVycHJvY2Vzcy5oIgogI2luY2x1ZGUgInNlY3VyaXR5Lmgi
CisjaW5jbHVkZSAic3lzL2N5Z3dpbi5oIgogCiAjZGVmaW5lIENBTExfSEFO
RExFUl9SRVRSWSAyMApAQCAtMjk3LDUgKzI5OCw1IEBAIHN0YXRpYyBpbnQg
Tk9fQ09QWSBrZWVwX2xvb3BpbmcgPSAwOwogCiBleHRlcm4gIkMiIGludAot
dHJ5X3RvX2RlYnVnICgpCit0cnlfdG9fZGVidWcgKENPTlRFWFQqIGN0eF9w
dHIpCiB7CiAgIGRlYnVnX3ByaW50ZiAoImRlYnVnZ2VyX2NvbW1hbmQgJyVz
JyIsIGRlYnVnZ2VyX2NvbW1hbmQpOwpAQCAtMzM5LDQgKzM0MCwzNiBAQCB0
cnlfdG9fZGVidWcgKCkKICAgICB9CiAKKyAgY2hhciBldmVudF9uYW1lIFs2
NF07CisgIERXT1JEIHdpbjMyX3BpZCA9IEdldEN1cnJlbnRQcm9jZXNzSWQg
KCk7CisgIF9fc21hbGxfc3ByaW50ZiAoZXZlbnRfbmFtZSwgImN5Z3dpbl9l
cnJvcl9zdGFydF9ldmVudCVkIiwgd2luMzJfcGlkKTsKKyAgSEFORExFIHN5
bmNfd2l0aF9kYmcgPSBDcmVhdGVFdmVudCAoTlVMTCwgVFJVRSwgRkFMU0Us
IGV2ZW50X25hbWUpOworCisgIHN0cnVjdCBkZWJ1Z2dlcl9pbmZvKiBkYmdf
c2hhcmVfcHRyOyAKKyAgSEFORExFIGRiZ19zaGFyZV9oOworICBjaGFyIGRi
Z19zaGFyZV9uYW1lIFs2NF07CisgIF9fc21hbGxfc3ByaW50ZiAoZGJnX3No
YXJlX25hbWUsICJjeWd3aW5fZGVidWdnZXJfc2hhcmUlZCIsIHdpbjMyX3Bp
ZCk7CisKKyAgaWYgKGN0eF9wdHIpCisgICAgeworICAgICAgZGJnX3NoYXJl
X2ggPSBDcmVhdGVGaWxlTWFwcGluZ0EgKElOVkFMSURfSEFORExFX1ZBTFVF
LAorCQkJCQlOVUxMLAorCQkJCQlQQUdFX1JFQURXUklURSwKKwkJCQkJMCwK
KwkJCQkJc2l6ZW9mIChzdHJ1Y3QgZGVidWdnZXJfaW5mbyksCisJCQkJCWRi
Z19zaGFyZV9uYW1lKTsKKyAgICAgIGlmIChkYmdfc2hhcmVfaCAmJgorICAg
ICAgICAgIChkYmdfc2hhcmVfcHRyID0gKHN0cnVjdCBkZWJ1Z2dlcl9pbmZv
KikKKwkJCSAgICBNYXBWaWV3T2ZGaWxlIChkYmdfc2hhcmVfaCwKKwkJCQkJ
ICAgRklMRV9NQVBfV1JJVEUsCisgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgMCwgMCwKKwkJCQkgICAgICAgICAgIHNpemVv
ZiAoc3RydWN0IGRlYnVnZ2VyX2luZm8pKSkpCisJeworCSAgZGJnX3NoYXJl
X3B0ci0+ZXhjZXB0aW9uX3RocmVhZF9pZCA9IEdldEN1cnJlbnRUaHJlYWRJ
ZCAoKTsKKwkgIG1lbW1vdmUgKCZkYmdfc2hhcmVfcHRyLT5leGNlcHRpb25f
Y29udGV4dCwKKwkJICAgY3R4X3B0ciwKKwkJICAgc2l6ZW9mIChkYmdfc2hh
cmVfcHRyLT5leGNlcHRpb25fY29udGV4dCkpOworCX0KKyAgICB9CisKICAg
ZGJnID0gQ3JlYXRlUHJvY2VzcyAoTlVMTCwKIAkJICAgICAgIGRlYnVnZ2Vy
X2NvbW1hbmQsCkBAIC0zNTgsOCArMzkxLDQgQEAgdHJ5X3RvX2RlYnVnICgp
CiAgIGVsc2UKICAgICB7Ci0gICAgICBjaGFyIGV2ZW50X25hbWUgW3NpemVv
ZiAoImN5Z3dpbl9lcnJvcl9zdGFydF9ldmVudCIpICsgOV07Ci0gICAgICBE
V09SRCB3aW4zMl9waWQgPSBHZXRDdXJyZW50UHJvY2Vzc0lkICgpOwotICAg
ICAgX19zbWFsbF9zcHJpbnRmIChldmVudF9uYW1lLCAiY3lnd2luX2Vycm9y
X3N0YXJ0X2V2ZW50JXgiLCB3aW4zMl9waWQpOwotICAgICAgSEFORExFIHN5
bmNfd2l0aF9kYmcgPSBDcmVhdGVFdmVudCAoTlVMTCwgVFJVRSwgRkFMU0Us
IGV2ZW50X25hbWUpOwogICAgICAga2VlcF9sb29waW5nID0gMTsKICAgICAg
IHdoaWxlIChrZWVwX2xvb3BpbmcpCkBAIC0zNjcsOSArMzk2LDkgQEAgdHJ5
X3RvX2RlYnVnICgpCiAJICBpZiAoc3luY193aXRoX2RiZyA9PSBOVUxMKQog
CSAgICBTbGVlcCAoVElNRV9UT19XQUlUX0ZPUl9ERUJVR0dFUik7Ci0JICBl
bHNlCisJICBlbHNlIGlmIChXYWl0Rm9yU2luZ2xlT2JqZWN0IChzeW5jX3dp
dGhfZGJnLAorCQkJCSAgICAgICAgVElNRV9UT19XQUlUX0ZPUl9ERUJVR0dF
UikgPT0gV0FJVF9PQkpFQ1RfMCkKIAkgICAgewotCSAgICAgIGlmIChXYWl0
Rm9yU2luZ2xlT2JqZWN0IChzeW5jX3dpdGhfZGJnLAotCQkJCSAgICAgICBU
SU1FX1RPX1dBSVRfRk9SX0RFQlVHR0VSKSA9PSBXQUlUX09CSkVDVF8wKQot
CQlicmVhazsKKwkgICAgICBDbG9zZUhhbmRsZSAoc3luY193aXRoX2RiZyk7
CisJICAgICAgYnJlYWs7CiAJICAgIH0KIAkgfQpAQCAtNTI5LDUgKzU1OCw1
IEBAIGhhbmRsZV9leGNlcHRpb25zIChFWENFUFRJT05fUkVDT1JEICplLCAK
IAkgIHN0YWNrZHVtcCAoZSwgJmMpOwogCX0KLSAgICAgIHRyeV90b19kZWJ1
ZyAoKTsKKyAgICAgIHRyeV90b19kZWJ1ZyAoaW4pOwogICAgICAgc2lnbmFs
X2V4aXQgKDB4ODAgfCBzaWcpOwkJLy8gRmxhZyBzaWduYWwgKyBjb3JlIGR1
bXAKICAgICB9CkluZGV4OiB3aW5zdXAuaAo9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09ClJDUyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2N5Z3dpbi93aW5z
dXAuaCx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS41MApkaWZmIC11IC1wIC0y
IC1yMS41MCB3aW5zdXAuaAotLS0gd2luc3VwLmgJMjAwMS8wNC8wMyAwMjo1
MzoyNAkxLjUwCisrKyB3aW5zdXAuaAkyMDAxLzA0LzI0IDA2OjQ1OjIwCkBA
IC0xODQsNSArMTg0LDUgQEAgZXh0ZXJuIEhBTkRMRSBuZXRhcGkzMl9oYW5k
bGU7CiAvKiBkZWJ1Z19vbl90cmFwIHN1cHBvcnQuIHNlZSBleGNlcHRpb25z
LmNjOnRyeV90b19kZWJ1ZygpICovCiBleHRlcm4gIkMiIHZvaWQgZXJyb3Jf
c3RhcnRfaW5pdCAoY29uc3QgY2hhciopOwotZXh0ZXJuICJDIiBpbnQgdHJ5
X3RvX2RlYnVnICgpOworZXh0ZXJuICJDIiBpbnQgdHJ5X3RvX2RlYnVnIChD
T05URVhUKiBjdHhfcHRyID0gMCk7CiAKIGV4dGVybiBpbnQgY3lnd2luX2Zp
bmlzaGVkX2luaXRpYWxpemluZzsKSW5kZXg6IGluY2x1ZGUvc3lzL2N5Z3dp
bi5oCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnMvc3Jj
L3NyYy93aW5zdXAvY3lnd2luL2luY2x1ZGUvc3lzL2N5Z3dpbi5oLHYKcmV0
cmlldmluZyByZXZpc2lvbiAxLjI0CmRpZmYgLXUgLXAgLTIgLXIxLjI0IGN5
Z3dpbi5oCi0tLSBpbmNsdWRlL3N5cy9jeWd3aW4uaAkyMDAxLzAzLzA1IDIx
OjI5OjIzCTEuMjQKKysrIGluY2x1ZGUvc3lzL2N5Z3dpbi5oCTIwMDEvMDQv
MjQgMDY6NDU6MjAKQEAgLTIzNSw0ICsyMzUsMTEgQEAgc3RydWN0IGV4dGVy
bmFsX3BpbmZvCiAKIERXT1JEIGN5Z3dpbl9pbnRlcm5hbCAoY3lnd2luX2dl
dGluZm9fdHlwZXMsIC4uLik7CisKK3N0cnVjdCBkZWJ1Z2dlcl9pbmZvCit7
CisgIERXT1JEIGV4Y2VwdGlvbl90aHJlYWRfaWQ7CisgIENPTlRFWFQgZXhj
ZXB0aW9uX2NvbnRleHQ7Cit9OworCiAjZW5kaWYgLypXSU5WRVIqLwogCg==

------------=_1583532847-65438-52
Content-Type: text/plain; charset=us-ascii;
 name="exception-on-stack-winsup-utils.ChangeLog"
Content-Disposition: inline;
 filename="exception-on-stack-winsup-utils.ChangeLog"
Content-Transfer-Encoding: base64
Content-Length: 375

MjAwMS0wNC0yNCAgRWdvciBEdWRhICA8ZGVvQGxvZ29zLW0ucnU+CgoJKiBk
dW1wZXIuY2MgKGR1bXBlcjo6Y29sbGVjdF9wcm9jZXNzX2luZm9ybWF0aW9u
KTogQ2hhbmdlIG5hbWUgb2YKCXNpZ25hbGxpbmcgZXZlbnQgdG8gbWF0Y2gg
d2l0aCBjeWd3aW4xLmRsbAoJKGR1bXBlcjo6d3JpdGVfY29yZV9kdW1wKTog
R2V0IGV4Y2VwdGlvbiBjb250ZXh0IGZyb20gc2hhcmVkCgltZW1vcnkgYXJl
YSBhbmQgc3RvcmUgaXQgYXMgY29udGV4dCBvZiBhcHByb3ByaWF0ZSB0aHJl
YWQuCg==

------------=_1583532847-65438-52
Content-Type: text/x-diff; charset=us-ascii;
 name="exception-on-stack-winsup-utils.diff"
Content-Disposition: inline; filename="exception-on-stack-winsup-utils.diff"
Content-Transfer-Encoding: base64
Content-Length: 2741

SW5kZXg6IGR1bXBlci5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBm
aWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL3V0aWxzL2R1bXBlci5jYyx2CnJl
dHJpZXZpbmcgcmV2aXNpb24gMS40CmRpZmYgLXUgLXAgLTIgLXIxLjQgZHVt
cGVyLmNjCi0tLSBkdW1wZXIuY2MJMjAwMS8wNC8xOSAxNDoyMjozMAkxLjQK
KysrIGR1bXBlci5jYwkyMDAxLzA0LzI0IDA2OjQ3OjQ3CkBAIC0zNyw3ICsz
Nyw3IEBAIF9fYXR0cmlidXRlX18gKChwYWNrZWQpKQogICBub3RlX2hlYWRl
cjsKIAotICAgICBCT09MIHZlcmJvc2UgPSBGQUxTRTsKK0JPT0wgdmVyYm9z
ZSA9IEZBTFNFOwogCi0gICAgIGludCBkZWJfcHJpbnRmIChjb25zdCBjaGFy
ICpmb3JtYXQsLi4uKQoraW50IGRlYl9wcmludGYgKGNvbnN0IGNoYXIgKmZv
cm1hdCwuLi4pCiB7CiAgIGlmICghdmVyYm9zZSkKQEAgLTQ4Niw2ICs0ODYs
NiBAQCBkdW1wZXI6OmNvbGxlY3RfcHJvY2Vzc19pbmZvcm1hdGlvbiAoKQog
ICAgIH0KIAotICBjaGFyIGV2ZW50X25hbWVbc2l6ZW9mICgiY3lnd2luX2Vy
cm9yX3N0YXJ0X2V2ZW50IikgKyAyMF07Ci0gIHNwcmludGYgKGV2ZW50X25h
bWUsICJjeWd3aW5fZXJyb3Jfc3RhcnRfZXZlbnQlMTZseCIsIHBpZCk7Cisg
IGNoYXIgZXZlbnRfbmFtZVs2NF07CisgIHNwcmludGYgKGV2ZW50X25hbWUs
ICJjeWd3aW5fZXJyb3Jfc3RhcnRfZXZlbnQlbGQiLCBwaWQpOwogICBIQU5E
TEUgc3luY193aXRoX2RlYnVnZWUgPSBPcGVuRXZlbnQgKEVWRU5UX01PRElG
WV9TVEFURSwgRkFMU0UsIGV2ZW50X25hbWUpOwogCkBAIC03MDEsNCArNzAx
LDIyIEBAIGR1bXBlcjo6d3JpdGVfY29yZV9kdW1wICgpCiAgICAgcmV0dXJu
IDA7CiAKKyAgY2hhciBzaGFyZV9uYW1lIFs2NF07CisgIEhBTkRMRSBzaGFy
ZV9oOworICBzdHJ1Y3QgZGVidWdnZXJfaW5mbyogc2hhcmVfcHRyID0gMDsK
KworICBzcHJpbnRmIChzaGFyZV9uYW1lLCAiY3lnd2luX2RlYnVnZ2VyX3No
YXJlJWxkIiwgcGlkKTsKKyAgc2hhcmVfaCA9IE9wZW5GaWxlTWFwcGluZyAo
RklMRV9NQVBfUkVBRCwgRkFMU0UsIHNoYXJlX25hbWUpOworICBpZiAoc2hh
cmVfaCkgICAgCisgICAgeworICAgICAgc2hhcmVfcHRyID0gKHN0cnVjdCBk
ZWJ1Z2dlcl9pbmZvKikKKwkJCU1hcFZpZXdPZkZpbGUgKHNoYXJlX2gsCisJ
CQkJICAgICAgIEZJTEVfTUFQX1JFQUQsCisJCQkJICAgICAgIDAsIDAsCisJ
CQkJICAgICAgIHNpemVvZiAoc3RydWN0IGRlYnVnZ2VyX2luZm8pKTsKKyAg
ICB9IAorICBpZiAoc2hhcmVfcHRyKQorICAgIGRlYl9wcmludGYgKCJnb3Qg
ZXhjZXB0aW9uIGNvbnRleHQgZm9yIHRocmVhZCAlbGRcbiIsCisgICAgICAg
ICAgICAgICAgc2hhcmVfcHRyLT5leGNlcHRpb25fdGhyZWFkX2lkKTsKKwog
ICBmb3IgKHByb2Nlc3NfZW50aXR5ICogcCA9IGxpc3Q7IHAgIT0gTlVMTDsg
cCA9IHAtPm5leHQpCiAgICAgewpAQCAtNzE5LDQgKzczNywxMiBAQCBkdW1w
ZXI6OndyaXRlX2NvcmVfZHVtcCAoKQogCiAJY2FzZSBwcl9lbnRfdGhyZWFk
OgorICAgICAgICAgIGlmIChzaGFyZV9wdHIgJiYKKyAgICAgICAgICAgICAg
cC0+dS50aHJlYWQudGlkID09IHNoYXJlX3B0ci0+ZXhjZXB0aW9uX3RocmVh
ZF9pZCkKKyAgICAgICAgICAgIHsKKyAgICAgICAgICAgICAgZGViX3ByaW50
ZiAoInNhdmVkIGV4Y2VwdGlvbiBjb250ZXh0IGZvciB0aHJlYWQgJWxkXG4i
LAorICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZV9wdHItPmV4Y2Vw
dGlvbl90aHJlYWRfaWQpOworICAgICAgICAgICAgICBtZW1tb3ZlICgmcC0+
dS50aHJlYWQuY29udGV4dCwgJnNoYXJlX3B0ci0+ZXhjZXB0aW9uX2NvbnRl
eHQsCisgICAgICAgICAgICAgICAgICAgICAgIHNpemVvZiAocC0+dS50aHJl
YWQuY29udGV4dCkpOworICAgICAgICAgICAgfQogCSAgZHVtcF90aHJlYWQg
KHAtPnNlY3Rpb24sICYocC0+dS50aHJlYWQpKTsKIAkgIGJyZWFrOwo=

------------=_1583532847-65438-52--
