From: "Gary R. Van Sickle" <g.r.vansickle@worldnet.att.net>
To: <cygwin-patches@sourceware.cygnus.com>
Subject: [PATCH] Mask mnemonics and expressions, help, version, getopts_long() for strace
Date: Thu, 15 Nov 2001 05:24:00 -0000
Message-ID: <NCBBIHCHBLCMLBLOBONKMEFPCHAA.g.r.vansickle@worldnet.att.net>
X-SW-Source: 2001-q4/msg00228.html
Content-type: multipart/mixed; boundary="----------=_1583532850-65438-116"
Message-ID: <20011115052400.2PkQm2Cuho5jTo9Eb77_iPivrOTBbPR-QdMyPntX3xE@z>

This is a multi-part message in MIME format...

------------=_1583532850-65438-116
Content-length: 871

12th time's the charm;-)!:

2001-11-15  Gary R. Van Sickle  <g.r.vansickle@worldnet.att.net>

	* strace.cc (main): Change getopt() to getopt_long().
	Add support for help and version info.
	Use new parse_mask() function for -m/--mask option.
	(longopts): Add long options structure.
	(opts): Move options string from getopts call to static var.
	(usage): Print usage information.
	(SCCSid): Version info.
	(version): New function for displaying version info.
	(parse_mask): New function supporting parsing of mnemonics,
	hex, and basic expressions in masks.
	(mnemonic2ul): New mnemonic parsing function.
	(tag_mask_mnemonic): New type.
	(mnemonic_table): New table of mnemonics for mnemonic2ul() to
	search through.

-- 
Gary R. Van Sickle
Brewer.  Patriot. 
Attachment:
strace.cc-patch
Description: Binary data
Attachment:
strace.cc-changelog
Description: Binary data


------------=_1583532850-65438-116
Content-Type: text/plain; charset=us-ascii; name="strace.cc-changelog"
Content-Disposition: inline; filename="strace.cc-changelog"
Content-Transfer-Encoding: base64
Content-Length: 936

MjAwMS0xMS0xNSAgR2FyeSBSLiBWYW4gU2lja2xlICA8Zy5yLnZhbnNpY2ts
ZUB3b3JsZG5ldC5hdHQubmV0PgoKCSogc3RyYWNlLmNjIChtYWluKTogQ2hh
bmdlIGdldG9wdCgpIHRvIGdldG9wdF9sb25nKCkuCglBZGQgc3VwcG9ydCBm
b3IgaGVscCBhbmQgdmVyc2lvbiBpbmZvLgoJVXNlIG5ldyBwYXJzZV9tYXNr
KCkgZnVuY3Rpb24gZm9yIC1tLy0tbWFzayBvcHRpb24uCgkobG9uZ29wdHMp
OiBBZGQgbG9uZyBvcHRpb25zIHN0cnVjdHVyZS4KCShvcHRzKTogTW92ZSBv
cHRpb25zIHN0cmluZyBmcm9tIGdldG9wdHMgY2FsbCB0byBzdGF0aWMgdmFy
LgoJKHVzYWdlKTogUHJpbnQgdXNhZ2UgaW5mb3JtYXRpb24uCgkoU0NDU2lk
KTogVmVyc2lvbiBpbmZvLgoJKHZlcnNpb24pOiBOZXcgZnVuY3Rpb24gZm9y
IGRpc3BsYXlpbmcgdmVyc2lvbiBpbmZvLgoJKHBhcnNlX21hc2spOiBOZXcg
ZnVuY3Rpb24gc3VwcG9ydGluZyBwYXJzaW5nIG9mIG1uZW1vbmljcywKCWhl
eCwgYW5kIGJhc2ljIGV4cHJlc3Npb25zIGluIG1hc2tzLgoJKG1uZW1vbmlj
MnVsKTogTmV3IG1uZW1vbmljIHBhcnNpbmcgZnVuY3Rpb24uCgkodGFnX21h
c2tfbW5lbW9uaWMpOiBOZXcgdHlwZS4KCShtbmVtb25pY190YWJsZSk6IE5l
dyB0YWJsZSBvZiBtbmVtb25pY3MgZm9yIG1uZW1vbmljMnVsKCkgdG8KCXNl
YXJjaCB0aHJvdWdoLgo=

------------=_1583532850-65438-116
Content-Type: text/x-diff; charset=us-ascii; name="strace.cc-patch"
Content-Disposition: inline; filename="strace.cc-patch"
Content-Transfer-Encoding: base64
Content-Length: 10891

SW5kZXg6IHN0cmFjZS5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBm
aWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL3V0aWxzL3N0cmFjZS5jYyx2CnJl
dHJpZXZpbmcgcmV2aXNpb24gMS4xMgpkaWZmIC1wIC11IC1iIC1yMS4xMiBz
dHJhY2UuY2MKLS0tIHN0cmFjZS5jYwkyMDAxLzExLzA0IDEyOjU3OjU1CTEu
MTIKKysrIHN0cmFjZS5jYwkyMDAxLzExLzE1IDEzOjE3OjI1CkBAIC0zMCw2
ICszMCw5IEBAIGludCBfaW1wdXJlX3B0cjsKIC8qIHdlICprbm93KiB3ZSdy
ZSBiZWluZyBidWlsdCB3aXRoIEdDQyAqLwogI2RlZmluZSBhbGxvY2EgX19i
dWlsdGluX2FsbG9jYQogCisvLyBWZXJzaW9uIHN0cmluZy4KK3N0YXRpYyBj
aGFyICpTQ0NTaWQgPSAiQCgjKXN0cmFjZSBWMS4wLCBDb3B5cmlnaHQgKEMp
IDIwMDEgUmVkIEhhdCBJbmMuLCAiIF9fREFURV9fICJcbiI7CisKIHN0YXRp
YyBjb25zdCBjaGFyICpwZ207CiBzdGF0aWMgaW50IGZvcmtkZWJ1ZyA9IDA7
CiBzdGF0aWMgaW50IG51bWVycm9yID0gMTsKQEAgLTYwMiw2ICs2MDUsMTk2
IEBAIGRvc3RyYWNlICh1bnNpZ25lZCBtYXNrLCBGSUxFICpvZmlsZSwgY2gK
ICAgcmV0dXJuOwogfQogCit0eXBlZGVmIHN0cnVjdCB0YWdfbWFza19tbmVt
b25pYworeworICB1bnNpZ25lZCBsb25nIHZhbDsKKyAgY29uc3QgY2hhciAq
dGV4dDsKK30KK21hc2tfbW5lbW9uaWM7CisKK3N0YXRpYyBjb25zdCBtYXNr
X21uZW1vbmljIG1uZW1vbmljX3RhYmxlW10gPSB7CisgIHtfU1RSQUNFX0FM
TCwgImFsbCJ9LAorICB7X1NUUkFDRV9GTFVTSCwgImZsdXNoIn0sCisgIHtf
U1RSQUNFX0lOSEVSSVQsICJpbmhlcml0In0sCisgIHtfU1RSQUNFX1VIT0gs
ICJ1aG9oIn0sCisgIHtfU1RSQUNFX1NZU0NBTEwsICJzeXNjYWxsIn0sCisg
IHtfU1RSQUNFX1NUQVJUVVAsICJzdGFydHVwIn0sCisgIHtfU1RSQUNFX0RF
QlVHLCAiZGVidWcifSwKKyAge19TVFJBQ0VfUEFSQU5PSUQsICJwYXJhbm9p
ZCJ9LAorICB7X1NUUkFDRV9URVJNSU9TLCAidGVybWlvcyJ9LAorICB7X1NU
UkFDRV9TRUxFQ1QsICJzZWxlY3QifSwKKyAge19TVFJBQ0VfV00sICJ3bSJ9
LAorICB7X1NUUkFDRV9TSUdQLCAic2lncCJ9LAorICB7X1NUUkFDRV9NSU5J
TUFMLCAibWluaW1hbCJ9LAorICB7X1NUUkFDRV9FWElURFVNUCwgImV4aXRk
dW1wIn0sCisgIHtfU1RSQUNFX1NZU1RFTSwgInN5c3RlbSJ9LAorICB7X1NU
UkFDRV9OT01VVEVYLCAibm9tdXRleCJ9LAorICB7X1NUUkFDRV9NQUxMT0Ms
ICJtYWxsb2MifSwKKyAge19TVFJBQ0VfVEhSRUFELCAidGhyZWFkIn0sCisg
IHswLCBOVUxMfQorfTsKKworc3RhdGljIHVuc2lnbmVkIGxvbmcKK21uZW1v
bmljMnVsIChjb25zdCBjaGFyICpucHRyLCBjaGFyICoqZW5kcHRyKQorewor
ICAvLyBMb29rIHVwIG1uZW1vbmljIGluIHRhYmxlLCByZXR1cm4gdmFsdWUu
CisgIC8vICplbmRwdHIgPSBwdHIgdG8gY2hhciB0aGF0IGJyZWFrcyBtYXRj
aC4KKyAgY29uc3QgbWFza19tbmVtb25pYyAqbW5wID0gbW5lbW9uaWNfdGFi
bGU7CisKKyAgd2hpbGUgKG1ucC0+dGV4dCAhPSBOVUxMKQorICAgIHsKKyAg
ICAgIGlmIChzdHJjbXAgKG1ucC0+dGV4dCwgbnB0cikgPT0gMCkKKwl7CisJ
ICAvLyBGb3VuZCBhIG1hdGNoLgorCSAgaWYgKGVuZHB0ciAhPSBOVUxMKQor
CSAgICB7CisJICAgICAgKmVuZHB0ciA9ICgoY2hhciAqKSBucHRyKSArIHN0
cmxlbiAobW5wLT50ZXh0KTsKKwkgICAgfQorCSAgcmV0dXJuIG1ucC0+dmFs
OworCX0KKyAgICAgIG1ucCsrOworICAgIH0KKworICAvLyBEaWRuJ3QgZmlu
ZCBpdC4KKyAgaWYgKGVuZHB0ciAhPSBOVUxMKQorICAgIHsKKyAgICAgICpl
bmRwdHIgPSAoY2hhciAqKSBucHRyOworICAgIH0KKyAgcmV0dXJuIDA7Cit9
CisKK3N0YXRpYyB1bnNpZ25lZCBsb25nCitwYXJzZV9tYXNrIChjb25zdCBj
aGFyICptcywgY2hhciAqKmVuZHB0cikKK3sKKyAgY29uc3QgY2hhciAqcCA9
IG1zOworICBjaGFyICpuZXdwOworICB1bnNpZ25lZCBsb25nIHJldHZhbCA9
IDAsIHRoaXN2YWw7CisgIGNvbnN0IHNpemVfdCBidWZzaXplID0gMTY7Cisg
IGNoYXIgYnVmZmVyW2J1ZnNpemVdOworICBzaXplX3QgbGVuOworCisgIHdo
aWxlICgqcCAhPSAnXDAnKQorICAgIHsKKyAgICAgIC8vIEZpcnN0IGV4dHJh
Y3QgdGhlIHRlcm0sIHRlcm1pbmF0ZSBpdCwgYW5kIGxvd2VyY2FzZSBpdC4K
KyAgICAgIHN0cm5jcHkgKGJ1ZmZlciwgcCwgYnVmc2l6ZSk7CisgICAgICBi
dWZmZXJbYnVmc2l6ZSAtIDFdID0gJ1wwJzsKKyAgICAgIGxlbiA9IHN0cmNz
cG4gKGJ1ZmZlciwgIissXDAiKTsKKyAgICAgIGJ1ZmZlcltsZW5dID0gJ1ww
JzsKKyAgICAgIHN0cmx3ciAoYnVmZmVyKTsKKworICAgICAgLy8gQ2hlY2sg
aWYgdGhpcyBpcyBhIG1uZW1vbmljLiAgV2UgaGF2ZSB0byBkbyB0aGlzIGZp
cnN0IG9yIHN0cnRvdWwoKQorICAgICAgLy8gd2lsbCBmYWxzZS10cmlnZ2Vy
IG9uIGFueXRoaW5nIHN0YXJ0aW5nIHdpdGggImEiIHRocm91Z2ggImYiLgor
ICAgICAgdGhpc3ZhbCA9IG1uZW1vbmljMnVsIChidWZmZXIsICZuZXdwKTsK
KyAgICAgIGlmIChidWZmZXIgPT0gbmV3cCkKKwl7CisJICAvLyBUaGlzIHRl
cm0gaXNuJ3QgbW5lbW9uaWMsIGNoZWNrIGlmIGl0J3MgaGV4LgorCSAgdGhp
c3ZhbCA9IHN0cnRvdWwgKGJ1ZmZlciwgJm5ld3AsIDE2KTsKKwkgIGlmIChu
ZXdwICE9IGJ1ZmZlciArIGxlbikKKwkgICAgeworCSAgICAgIC8vIE5vdCBo
ZXggZWl0aGVyLCBzeW50YXggZXJyb3IuCisJICAgICAgKmVuZHB0ciA9IChj
aGFyICopIHA7CisJICAgICAgcmV0dXJuIDA7CisJICAgIH0KKwl9CisKKyAg
ICAgIHAgKz0gbGVuOworICAgICAgcmV0dmFsICs9IHRoaXN2YWw7CisKKyAg
ICAgIC8vIEhhbmRsZSBvcGVyYXRvcnMKKyAgICAgIGlmICgqcCA9PSAnXDAn
KQorCWJyZWFrOworICAgICAgaWYgKCgqcCA9PSAnKycpIHx8ICgqcCA9PSAn
LCcpKQorCXsKKwkgIC8vIEZvciBub3cgdGhlc2UgYm90aCBlcXVhdGUgdG8g
YWRkaXRpb24vT1JpbmcuICBVbnRpbCB3ZSBnZXQKKwkgIC8vIGZhbmN5IGFu
ZCBhZGQgdGhpbmdzIGxpa2UgImFsbC08c29tZXRoaW5nPiIsIGFsbCB3ZSBu
ZWVkIGRvIGlzCisJICAvLyBjb250aW51ZSB0aGUgbG9vcGluZy4KKwkgIHAr
KzsKKwkgIGNvbnRpbnVlOworCX0KKyAgICAgIGVsc2UKKwl7CisJICAvLyBT
eW50YXggZXJyb3IKKwkgICplbmRwdHIgPSAoY2hhciAqKSBwOworCSAgcmV0
dXJuIDA7CisJfQorICAgIH0KKworICAqZW5kcHRyID0gKGNoYXIgKikgcDsK
KyAgcmV0dXJuIHJldHZhbDsKK30KKworc3RhdGljIHZvaWQKK3VzYWdlICgp
Cit7CisgIGZwcmludGYgKHN0ZGVyciwgIlwKK1VzYWdlOiBzdHJhY2UgW09Q
VElPTlNdIDxjb21tYW5kLWxpbmU+XG5cCisgIC1iLCAtLWJ1ZmZlci1zaXpl
PVNJWkUgICAgICAgU2V0IHNpemUgb2Ygb3V0cHV0IGZpbGUgYnVmZmVyLlxu
XAorICAtbSwgLS1tYXNrPU1BU0sgICAgICAgICAgICAgIFNldCBtZXNzYWdl
IGZpbHRlciBtYXNrLlxuXAorXG5cCisgICAgTUFTSyBjYW4gYmUgYW55IGNv
bWJpbmF0aW9uIG9mIHRoZSBmb2xsb3dpbmcgbW5lbW9uaWNzIGFuZC9vciBo
ZXggdmFsdWVzXG5cCisgICAgKDB4IGlzIG9wdGlvbmFsKS4gIENvbWJpbmUg
bWFza3Mgd2l0aCAnKycgb3IgJywnIGxpa2Ugc286XG5cCitcblwKKyAgICAg
ICAgICAgICAgICAgICAgICAtLW1hc2s9d20rc3lzdGVtLG1hbGxvYysweDAw
ODAwXG5cCitcblwKKyAgICBNbmVtb25pYyBIZXggICAgIENvcnJlc3BvbmRp
bmcgRGVmICBEZXNjcmlwdGlvblxuXAorICAgID09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT1cblwKKyAgICBhbGwgICAgICAweDAwMDAxIChfU1RSQUNF
X0FMTCkgICAgICBBbGwgc3RyYWNlIG1lc3NhZ2VzLlxuXAorICAgIGZsdXNo
ICAgIDB4MDAwMDIgKF9TVFJBQ0VfRkxVU0gpICAgIEZsdXNoIG91dHB1dCBi
dWZmZXIgYWZ0ZXIgZWFjaCBtZXNzYWdlLlxuXAorICAgIGluaGVyaXQgIDB4
MDAwMDQgKF9TVFJBQ0VfSU5IRVJJVCkgIENoaWxkcmVuIGluaGVyaXQgbWFz
ayBmcm9tIHBhcmVudC5cblwKKyAgICB1aG9oICAgICAweDAwMDA4IChfU1RS
QUNFX1VIT0gpICAgICBVbnVzdWFsIG9yIHdlaXJkIHBoZW5vbWVub24uXG5c
CisgICAgc3lzY2FsbCAgMHgwMDAxMCAoX1NUUkFDRV9TWVNDQUxMKSAgU3lz
dGVtIGNhbGxzLlxuXAorICAgIHN0YXJ0dXAgIDB4MDAwMjAgKF9TVFJBQ0Vf
U1RBUlRVUCkgIGFyZ2MvZW52cCBwcmludG91dCBhdCBzdGFydHVwLlxuXAor
ICAgIGRlYnVnICAgIDB4MDAwNDAgKF9TVFJBQ0VfREVCVUcpICAgIEluZm8g
dG8gaGVscCBkZWJ1Z2dpbmcuIFxuXAorICAgIHBhcmFub2lkIDB4MDAwODAg
KF9TVFJBQ0VfUEFSQU5PSUQpIFBhcmFub2lkIGluZm8uXG5cCisgICAgdGVy
bWlvcyAgMHgwMDEwMCAoX1NUUkFDRV9URVJNSU9TKSAgSW5mbyBmb3IgZGVi
dWdnaW5nIHRlcm1pb3Mgc3R1ZmYuXG5cCisgICAgc2VsZWN0ICAgMHgwMDIw
MCAoX1NUUkFDRV9TRUxFQ1QpICAgSW5mbyBvbiB1Z2x5IHNlbGVjdCBpbnRl
cm5hbHMuXG5cCisgICAgd20gICAgICAgMHgwMDQwMCAoX1NUUkFDRV9XTSkg
ICAgICAgVHJhY2UgV2luZG93cyBtc2dzIChlbmFibGUgX3N0cmFjZV93bSku
XG5cCisgICAgc2lncCAgICAgMHgwMDgwMCAoX1NUUkFDRV9TSUdQKSAgICAg
VHJhY2Ugc2lnbmFsIGFuZCBwcm9jZXNzIGhhbmRsaW5nLlxuXAorICAgIG1p
bmltYWwgIDB4MDEwMDAgKF9TVFJBQ0VfTUlOSU1BTCkgIFZlcnkgbWluaW1h
bCBzdHJhY2Ugb3V0cHV0LlxuXAorICAgIGV4aXRkdW1wIDB4MDQwMDAgKF9T
VFJBQ0VfRVhJVERVTVApIER1bXAgc3RyYWNlIGNhY2hlIG9uIGV4aXQuXG5c
CisgICAgc3lzdGVtICAgMHgwODAwMCAoX1NUUkFDRV9TWVNURU0pICAgQ2Fj
aGUgc3RyYWNlIG1lc3NhZ2VzLlxuXAorICAgIG5vbXV0ZXggIDB4MTAwMDAg
KF9TVFJBQ0VfTk9NVVRFWCkgIERvbid0IHVzZSBtdXRleCBmb3Igc3luY2hy
b25pemF0aW9uLlxuXAorICAgIG1hbGxvYyAgIDB4MjAwMDAgKF9TVFJBQ0Vf
TUFMTE9DKSAgIFRyYWNlIG1hbGxvYyBjYWxscy5cblwKKyAgICB0aHJlYWQg
ICAweDQwMDAwIChfU1RSQUNFX1RIUkVBRCkgICBUaHJlYWQtbG9ja2luZyBj
YWxscy5cblwKK1xuXAorICAtbywgLS1vdXRwdXQ9RklMRU5BTUUgICAgICAg
IFNldCBvdXRwdXQgZmlsZSB0byBGSUxFTkFNRS5cblwKKyAgLWYsIC0tdHJh
Y2UtY2hpbGRyZW4gICAgICAgICBBbHNvIHRyYWNlIGZvcmtlZCBjaGlsZCBw
cm9jZXNzZXMuXG5cCisgIC1uLCAtLWNyYWNrLWVycm9yLW51bWJlcnMgICAg
T3V0cHV0IGRlc2NyaXB0aXZlIHRleHQgaW5zdGVhZCBvZiBlcnJvclxuXAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVycyBmb3Ig
V2luZG93cyBlcnJvcnMuXG5cCisgIC1kLCAtLW5vLWRlbHRhICAgICAgICAg
ICAgICAgRG9uJ3QgZGlzcGxheSB0aGUgZGVsdGEtdCBtaWNyb3NlY29uZCB0
aW1lc3RhbXAuXG5cCisgIC10LCAtLXRpbWVzdGFtcCAgICAgICAgICAgICAg
VXNlIGFuIGFic29sdXRlIGhoOm1tOnNzIHRpbWVzdGFtcCBpbnN0ZWQgb2Yg
dGhlXG5cCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZh
dWx0IG1pY3Jvc2Vjb25kIHRpbWVzdGFtcC4gIEltcGxpZXMgLWQuXG5cCisg
IC13LCAtLW5ldy13aW5kb3cgICAgICAgICAgICAgU3Bhd24gcHJvZ3JhbSB1
bmRlciB0ZXN0IGluIGEgbmV3IHdpbmRvdy5cblwKKyAgLVMsIC0tZmx1c2gt
cGVyaW9kPVBFUklPRCAgICBGbHVzaCBidWZmZXJlZCBzdHJhY2Ugb3V0cHV0
IGV2ZXJ5IFBFUklPRCBzZWNzLlxuXAorICAtdiwgLS12ZXJzaW9uICAgICAg
ICAgICAgICAgIERpc3BsYXkgdmVyc2lvbiBpbmZvLlxuXAorICAtaCwgLS1o
ZWxwICAgICAgICAgICAgICAgICAgIERpc3BsYXkgdGhpcyBoZWxwIGluZm8u
XG5cCisiKTsKK30KKworc3RhdGljIHZvaWQKK3ZlcnNpb24gKCkKK3sKKyAg
ZnByaW50ZiAoc3RkZXJyLCBTQ0NTaWQrNCk7Cit9CisKK3N0cnVjdCBvcHRp
b24gbG9uZ29wdHNbXSA9IHsKKyAgeyJoZWxwIiwgbm9fYXJndW1lbnQsIE5V
TEwsICdoJ30sCisgIHsidmVyc2lvbiIsIG5vX2FyZ3VtZW50LCBOVUxMLCAn
did9LAorICB7ImJ1ZmZlci1zaXplIiwgcmVxdWlyZWRfYXJndW1lbnQsIE5V
TEwsICdiJ30sCisgIHsibWFzayIsIHJlcXVpcmVkX2FyZ3VtZW50LCBOVUxM
LCAnbSd9LAorICB7Im91dHB1dCIsIHJlcXVpcmVkX2FyZ3VtZW50LCBOVUxM
LCAnbyd9LAorICB7InRyYWNlLWNoaWxkcmVuIiwgbm9fYXJndW1lbnQsIE5V
TEwsICdmJ30sCisgIHsiY3JhY2stZXJyb3ItbnVtYmVycyIsIG5vX2FyZ3Vt
ZW50LCBOVUxMLCAnbid9LAorICB7Im5vLWRlbHRhIiwgbm9fYXJndW1lbnQs
IE5VTEwsICdkJ30sCisgIHsidXNlY3MiLCBub19hcmd1bWVudCwgTlVMTCwg
J3UnfSwKKyAgeyJ0aW1lc3RhbXAiLCBub19hcmd1bWVudCwgTlVMTCwgJ3Qn
fSwKKyAgeyJuZXctd2luZG93Iiwgbm9fYXJndW1lbnQsIE5VTEwsICd3J30s
CisgIHsiZmx1c2gtcGVyaW9kIiwgcmVxdWlyZWRfYXJndW1lbnQsIE5VTEws
ICdTJ30sCisgIHtOVUxMLCAwLCBOVUxMLCAwfQorfTsKKworc3RhdGljIGNv
bnN0IGNoYXIgKmNvbnN0IG9wdHMgPSAiaHZiOm06bzpmbmR1dHdTOiI7CisK
IGludAogbWFpbiAoaW50IGFyZ2MsIGNoYXIgKiphcmd2KQogewpAQCAtNjE0
LDkgKzgwNywxOSBAQCBtYWluIChpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAg
IGVsc2UKICAgICBwZ20rKzsKIAotICB3aGlsZSAoKG9wdCA9IGdldG9wdCAo
YXJnYywgYXJndiwgImI6bTpvOmZuZHV0d1M6IikpICE9IEVPRikKKyAgd2hp
bGUgKChvcHQgPSBnZXRvcHRfbG9uZyAoYXJnYywgYXJndiwgb3B0cywgbG9u
Z29wdHMsIE5VTEwpKSAhPSBFT0YpCiAgICAgc3dpdGNoIChvcHQpCiAgICAg
ICB7CisgICAgICBjYXNlICdoJzoKKwkvLyBQcmludCBoZWxwIGFuZCBleGl0
CisJdXNhZ2UgKCk7CisJcmV0dXJuIDE7CisJYnJlYWs7CisgICAgICBjYXNl
ICd2JzoKKwkvLyBQcmludCB2ZXJzaW9uIGluZm8gYW5kIGV4aXQKKwl2ZXJz
aW9uICgpOworCXJldHVybiAxOworCWJyZWFrOwogICAgICAgY2FzZSAnZic6
CiAJZm9ya2RlYnVnIF49IDE7CiAJYnJlYWs7CkBAIC02MjQsOCArODI3LDE3
IEBAIG1haW4gKGludCBhcmdjLCBjaGFyICoqYXJndikKIAlidWZzaXplID0g
YXRvaSAob3B0YXJnKTsKIAlicmVhazsKICAgICAgIGNhc2UgJ20nOgotCW1h
c2sgPSBzdHJ0b3VsIChvcHRhcmcsIE5VTEwsIDE2KTsKKwl7CisJICBjaGFy
ICplbmRwdHI7CisJICBtYXNrID0gcGFyc2VfbWFzayAob3B0YXJnLCAmZW5k
cHRyKTsKKwkgIGlmICgqZW5kcHRyICE9ICdcMCcpCisJICAgIHsKKwkgICAg
ICAvLyBCYWQgbWFzayBleHByZXNzaW9uLgorCSAgICAgIGVycm9yICgwLCAi
c3ludGF4IGVycm9yIGluIG1hc2sgZXhwcmVzc2lvbiBcIiVzXCIgbmVhciBc
CitjaGFyYWN0ZXIgIyVkLlxuIiwgb3B0YXJnLCAoaW50KSAoZW5kcHRyIC0g
b3B0YXJnKSwgZW5kcHRyKTsKKwkgICAgfQogCWJyZWFrOworCX0KICAgICAg
IGNhc2UgJ28nOgogCWlmICgob2ZpbGUgPSBmb3BlbiAob3B0YXJnLCAidyIp
KSA9PSBOVUxMKQogCSAgZXJyb3IgKDEsICJjYW4ndCBvcGVuICVzIiwgb3B0
YXJnKTsKQEAgLTY0Myw2ICs4NTUsOSBAQCBtYWluIChpbnQgYXJnYywgY2hh
ciAqKmFyZ3YpCiAJZGVsdGEgXj0gMTsKIAlicmVhazsKICAgICAgIGNhc2Ug
J3UnOgorICAgIC8vIEZJWE1FOiBUaGlzIG9wdGlvbiBpc24ndCBoYW5kbGVk
IHByb3Blcmx5L2F0IGFsbCBieSB0aGUKKyAgICAvLyBwcm9ncmFtJ3MgbG9n
aWMuICBJdCBzZWVtcyB0byBiZSB0aGUgZGVmYXVsdCwgZG9lcyBpdAorICAg
IC8vIG5lZWQgdG8ganVzdCBiZSByZW1vdmVkPwogCXVzZWNzIF49IDE7CiAJ
YnJlYWs7CiAgICAgICBjYXNlICd3JzoK

------------=_1583532850-65438-116--
