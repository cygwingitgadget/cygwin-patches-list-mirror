From: "Robert Collins" <robert.collins@itdomain.com.au>
To: "Corinna Vinschen" <cygwin-patches@cygwin.com>
Subject: Re: updated: Categories and basic dependency handling for setup
Date: Wed, 13 Jun 2001 16:55:00 -0000
Message-id: <020601c0f464$78636260$0200a8c0@lifelesswks>
References: <EA18B9FA0FE4194AA2B4CDB91F73C0EF7A00@itdomain002.itdomain.net.au> <20010613162448.M1144@cygbert.vinschen.de>
X-SW-Source: 2001-q2/msg00291.html
Content-type: multipart/mixed; boundary="----------=_1583532848-65438-67"

This is a multi-part message in MIME format...

------------=_1583532848-65438-67
Content-length: 403

----- Original Message -----
From: "Corinna Vinschen" <cygwin-patches@cygwin.com>
>
> Did I miss something?
>
> Corinna
>

Could you try the attached updated patch - this is against current CVS.
I tried the same experiment you did - stand setup.ini, no installed.db,
added category: shell to ash. Clicking full/part shows me
current   new   src category  package
          @skip     shell     ash


Rob

------------=_1583532848-65438-67
Content-Type: text/x-diff; charset=us-ascii; name="depends3.patch"
Content-Disposition: inline; filename="depends3.patch"
Content-Transfer-Encoding: base64
Content-Length: 14539

PyAudGFyLmNjLnN3cAo/IGRlcGVuZHMyLnBhdGNoCj8gZGVwZW5kczMucGF0
Y2gKSW5kZXg6IGNob29zZS5jYwo9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJD
UyBmaWxlOiAvY3ZzL3NyYy9zcmMvd2luc3VwL2NpbnN0YWxsL2Nob29zZS5j
Yyx2CnJldHJpZXZpbmcgcmV2aXNpb24gMi4yNApkaWZmIC11IC1wIC1yMi4y
NCBjaG9vc2UuY2MKLS0tIGNob29zZS5jYwkyMDAxLzA2LzEzIDE2OjExOjAx
CTIuMjQKKysrIGNob29zZS5jYwkyMDAxLzA2LzEzIDIzOjUzOjQzCkBAIC04
MSwxNCArODEsMjAgQEAgaGVhZGVyc1tdID0gewogI2RlZmluZSBORVdfQ09M
IDEKICAgeyAiU3JjPyIsIDQsIDAsIDAgfSwKICNkZWZpbmUgU1JDX0NPTCAy
CisgIHsgIkNhdGVnb3J5IiwgOCwgMCwgMCB9LAorI2RlZmluZSBDQVRFR09S
WV9DT0wgMwogICB7ICJQYWNrYWdlIiwgNywgMCwgMCB9LAotI2RlZmluZSBQ
QUNLQUdFX0NPTCAzCisjZGVmaW5lIFBBQ0tBR0VfQ09MIDQKICAgeyAwLCAw
LCAwLCAwIH0KIH07CiAjZGVmaW5lIE5VTV9DT0xVTU5TIChzaXplb2YgKGhl
YWRlcnMpIC8gKHNpemVvZiAoaGVhZGVyc1swXSkpIC0gMSkKIAogaW50ICpw
YWNrYWdlX2luZGV4ZXMsIG5pbmRleGVzOwogCitzdGF0aWMgaW50IGFkZF9y
ZXF1aXJlZChQYWNrYWdlICpwa2cpOworc3RhdGljIHZvaWQgc2V0X2Z1bGxf
bGlzdCAoSFdORCBoLCBpbnQgaXNmdWxsKTsKKworCiBzdGF0aWMgYm9vbAog
aXNpbnN0YWxsZWQgKFBhY2thZ2UgKnBrZywgaW50IHRydXN0KQogewpAQCAt
OTksNiArMTA1LDE3IEBAIGlzaW5zdGFsbGVkIChQYWNrYWdlICpwa2csIGlu
dCB0cnVzdCkKIAkgICBzdHJjbXAgKHBrZy0+aW5zdGFsbGVkLT52ZXJzaW9u
LCBwa2ctPmluZm9bdHJ1c3RdLnZlcnNpb24pID09IDA7CiB9CiAKK3N0YXRp
YyBQYWNrYWdlICoKK2ZpbmRfcGFja2FnZSAoY29uc3QgY2hhciAqbmFtZSkK
K3sKKyAgZm9yIChQYWNrYWdlICpwa2cgPSBwYWNrYWdlOyBwa2ctPm5hbWU7
IHBrZysrKQorICAgIHsKKyAgICAgIGlmICghc3RyY2FzZWNtcChuYW1lLCBw
a2ctPm5hbWUpKQorICAgICAgICByZXR1cm4gcGtnOworICAgIH0KKyAgcmV0
dXJuIE5VTEw7Cit9CisKIHN0YXRpYyB2b2lkCiBzZXRfYWN0aW9uIChQYWNr
YWdlICpwa2csIGJvb2wgcHJlaW5jKQogewpAQCAtMTUyLDYgKzE2OSw3MiBA
QCBzZXRfYWN0aW9uIChQYWNrYWdlICpwa2csIGJvb2wgcHJlaW5jKQogICAg
ICAgfQogfQogCitzdGF0aWMgaW50CithZGRfcmVxdWlyZWQgKFBhY2thZ2Ug
KnBrZykKK3sKKyAgRGVwZW5kZW5jeSAqZHA7CisgIFBhY2thZ2UgKnJlcXVp
cmVkOworICBpbnQgYzsKKyAgaW50IGNoYW5nZWQgPSAwOworICBkcCA9IHBr
Zy0+cmVxdWlyZWQ7CisgIHN3aXRjaCAocGtnLT5hY3Rpb24pCisgICAgewor
ICAgIGNhc2UgQUNUSU9OX1VOSU5TVEFMTDoKKyAgICBjYXNlIEFDVElPTl9F
UlJPUjoKKyAgICBjYXNlIEFDVElPTl9VTktOT1dOOgorICAgIGNhc2UgQUNU
SU9OX1NSQ19PTkxZOgorICAgIGNhc2UgQUNUSU9OX1NLSVA6CisgICAgICBy
ZXR1cm4gMDsKKyAgICBkZWZhdWx0OgorICAgICAgYnJlYWs7CisgICAgfQor
ICB3aGlsZSAoZHApCisgICAgeworICAgICAgaWYgKChyZXF1aXJlZCA9IGZp
bmRfcGFja2FnZShkcC0+cGFja2FnZSkpID09IE5VTEwpCisgICAgICAgIHsK
KyAgICAgICAgICBkcD1kcC0+bmV4dDsKKyAgICAgICAgICBjb250aW51ZTsK
KyAgICAgICAgfQorICAgICAgc3dpdGNoIChyZXF1aXJlZC0+YWN0aW9uKQor
ICAgICAgICB7CisJY2FzZSBBQ1RJT05fUFJFVjoKKwljYXNlIEFDVElPTl9D
VVJSOgorCWNhc2UgQUNUSU9OX1RFU1Q6CisJY2FzZSBBQ1RJT05fTEFTVDoK
KwljYXNlIEFDVElPTl9TQU1FX0NVUlI6CisJY2FzZSBBQ1RJT05fU0FNRV9U
RVNUOgorCWNhc2UgQUNUSU9OX1NBTUVfUFJFVjoKKwljYXNlIEFDVElPTl9S
RURPOgorCWNhc2UgQUNUSU9OX1NBTUVfTEFTVDoKKwkgIC8qIHdlIGFyZSBp
bnN0YWxsaW5nIGEgdXNlciBzZWxlY3RlZCB2ZXJzaW9uICovCisJICBicmVh
azsKKwkKKwljYXNlIEFDVElPTl9VTklOU1RBTEw6CisJICAvKiBpdCdzIGFs
cmVhZHkgaW5zdGFsbGVkIC0gbGVhdmUgaXQgKi8KKwkgIHJlcXVpcmVkLT5h
Y3Rpb24gPSBBQ1RJT05fU0tJUDsKKwkgIGJyZWFrOworCWNhc2UgQUNUSU9O
X0VSUk9SOgorCWNhc2UgQUNUSU9OX1VOS05PV046CisJY2FzZSBBQ1RJT05f
U1JDX09OTFk6CisJY2FzZSBBQ1RJT05fU0tJUDoKKwkgIC8qIHRoZSBjdXJy
ZW50IGluc3RhbGwgd2lsbCBmYWlsICovCisJICByZXF1aXJlZC0+YWN0aW9u
ID0gQUNUSU9OX1BSRVY7IC8qIHRoaXMgZmluZCBwcmV2LCB0aGVuIGN1cnIs
IHRoZW4gdGVzdC4gKi8KKwkgIHNldF9hY3Rpb24ocmVxdWlyZWQsIDApOwkg
IC8qIHdlIG5lZWQgYSBmaW5kX2Jlc3QgdGhhdCBnZXRzIGluc3RhbGxlZCwg
Ki8KKwkgIGNoYW5nZWQrKzsJCQkgIC8qIHRoZW4gY3VycmVudCwgdGhlbiBw
cmV2LCB0aGVuIHRlc3QgKi8KKwkgIGJyZWFrOworCWRlZmF1bHQ6CisJICBs
b2cgKDAsICJzaG91bGQgbmV2ZXIgZ2V0IGhlcmUgJWRcbiIsIHJlcXVpcmVk
LT5hY3Rpb24pOworCX0KKy8qICAgICAgZm9yIChjID0gMDsgYyA8IGV4dHJh
W2ldLm5waWNrOyBjKyspCisgICAgICAgaWYgKHBhY2thZ2VbaV0udHJ1c3Qg
PT0gZXh0cmFbaV0uY2hvb3NlcltjXS50cnVzdCkKKyAgICAgICAgIGV4dHJh
W2ldLnBpY2sgPSBjOyAqLworICAgICAgY2hhbmdlZCArPSBhZGRfcmVxdWly
ZWQgKHJlcXVpcmVkKTsKKyAgICAgIGRwPWRwLT5uZXh0OworICAgIH0KKyAg
cmV0dXJuIGNoYW5nZWQ7Cit9CisKKwogY29uc3QgY2hhciAqCiBjaG9vc2Vf
Y2FwdGlvbiAoUGFja2FnZSAqcGtnKQogewpAQCAtMjQ0LDYgKzMyNyw5IEBA
IHBhaW50IChIV05EIGh3bmQpCiAgICAgICBCaXRCbHQgKGhkYywgeCArIGhl
YWRlcnNbU1JDX0NPTF0ueCwgYnksIDExLCAxMSwKIAkgICAgICBiaXRtYXBf
ZGMsIDAsIDAsIFNSQ0NPUFkpOwogCisgICAgICBpZiAocGFja2FnZVtpXS5j
YXRlZ29yeSkKKyAgICAgICBUZXh0T3V0IChoZGMsIHggKyBoZWFkZXJzW0NB
VEVHT1JZX0NPTF0ueCwgciwgcGFja2FnZVtpXS5jYXRlZ29yeSwgc3RybGVu
IChwYWNrYWdlW2ldLmNhdGVnb3J5KSk7CisKICAgICAgIGlmIChwYWNrYWdl
W2ldLnNkZXNjKQogCXMgPSBwYWNrYWdlW2ldLnNkZXNjOwogICAgICAgZWxz
ZQpAQCAtMzM2LDcgKzQyMiw3IEBAIGxpc3RfaHNjcm9sbCAoSFdORCBod25k
LCBIV05EIGhjdGwsIFVJTlQKIHN0YXRpYyBMUkVTVUxUIENBTExCQUNLCiBs
aXN0X2NsaWNrIChIV05EIGh3bmQsIEJPT0wgZGJsY2xrLCBpbnQgeCwgaW50
IHksIFVJTlQgaGl0Q29kZSkKIHsKLSAgaW50IHI7CisgIGludCByLHJlZnJl
c2g7CiAKICAgaWYgKG5pbmRleGVzID09IDApCiAgICAgcmV0dXJuIDA7CkBA
IC0zNTYsMTUgKzQ0MiwzNyBAQCBsaXN0X2NsaWNrIChIV05EIGh3bmQsIEJP
T0wgZGJsY2xrLCBpbnQgCiAgIGlmICh4ID49IGhlYWRlcnNbTkVXX0NPTF0u
eCAtIChITUFSR0lOIC8gMikgJiYgeCA8PSBoZWFkZXJzW05FV19DT0wgKyAx
XS54IC0gSE1BUkdJTi8yKQogICAgIHNldF9hY3Rpb24gKHBrZywgMSk7CiAK
KyAgLyogQWRkIGFueSBwYWNrYWdlcyB0aGF0IGFyZSBuZWVkZWQgYnkgdGhp
cyBwYWNrYWdlICovCisgIHJlZnJlc2ggPSBhZGRfcmVxdWlyZWQocGtnKTsK
KwogICBpZiAoeCA+PSBoZWFkZXJzW1NSQ19DT0xdLnggLSBITUFSR0lOLzIg
JiYgeCA8PSBoZWFkZXJzW1NSQ19DT0wgKyAxXS54IC0gSE1BUkdJTi8yKQog
ICAgIHBrZy0+c3JjcGlja2VkIF49IDE7CiAKLSAgUkVDVCByZWN0OwotICBy
ZWN0LmxlZnQgPSBoZWFkZXJzW05FV19DT0xdLnggLSBzY3JvbGxfdWxjX3g7
Ci0gIHJlY3QucmlnaHQgPSBoZWFkZXJzW1NSQ19DT0wgKyAxXS54IC0gc2Ny
b2xsX3VsY194OwotICByZWN0LnRvcCA9IGhlYWRlcl9oZWlnaHQgKyByICog
cm93X2hlaWdodCAtIHNjcm9sbF91bGNfeTsKLSAgcmVjdC5ib3R0b20gPSBy
ZWN0LnRvcCArIHJvd19oZWlnaHQ7Ci0gIEludmFsaWRhdGVSZWN0IChod25k
LCAmcmVjdCwgVFJVRSk7CisgIGlmIChyZWZyZXNoKQorICAgIHsKKyAgICAg
IFJFQ1QgcjsKKyAgICAgIEdldENsaWVudFJlY3QgKGx2LCAmcik7CisgICAg
ICBTQ1JPTExJTkZPIHNpOworICAgICAgbWVtc2V0ICgmc2ksIDAsIHNpemVv
ZiAoc2kpKTsKKyAgICAgIHNpLmNiU2l6ZSA9IHNpemVvZiAoc2kpOworICAg
ICAgc2kuZk1hc2sgPSBTSUZfQUxMOworICAgICAgc2kubk1pbiA9IDA7CisK
KyAgICAgIHNpLm5NYXggPSBuaW5kZXhlcyAqIHJvd19oZWlnaHQ7CisgICAg
ICBzaS5uUGFnZSA9IHIuYm90dG9tIC0gaGVhZGVyX2hlaWdodDsKKyAgICAg
IFNldFNjcm9sbEluZm8gKGx2LCBTQl9WRVJULCAmc2ksIFRSVUUpOworCisg
ICAgICBzY3JvbGxfdWxjX3ggPSBzY3JvbGxfdWxjX3kgPSAwOworICAgIH0K
KyAgZWxzZQorICAgIHsKKyAgICAgIFJFQ1QgcmVjdDsKKyAgICAgIHJlY3Qu
bGVmdCA9IGhlYWRlcnNbTkVXX0NPTF0ueCAtIHNjcm9sbF91bGNfeDsKKyAg
ICAgIHJlY3QucmlnaHQgPSBoZWFkZXJzW1NSQ19DT0wgKyAxXS54IC0gc2Ny
b2xsX3VsY194OworICAgICAgcmVjdC50b3AgPSBoZWFkZXJfaGVpZ2h0ICsg
ciAqIHJvd19oZWlnaHQgLSBzY3JvbGxfdWxjX3k7CisgICAgICByZWN0LmJv
dHRvbSA9IHJlY3QudG9wICsgcm93X2hlaWdodDsKKyAgICAgIEludmFsaWRh
dGVSZWN0IChod25kLCAmcmVjdCwgVFJVRSk7CisgICAgfQogfQogCiBzdGF0
aWMgTFJFU1VMVCBDQUxMQkFDSwpAQCAtNDY2LDYgKzU3NCw4IEBAIGRlZmF1
bHRfdHJ1c3QgKEhXTkQgaCwgdHJ1c3RzIHRydXN0KQogICBmb3IgKFBhY2th
Z2UgKnBrZyA9IHBhY2thZ2U7IHBrZy0+bmFtZTsgcGtnKyspCiAgICAgewog
ICAgICAgcGtnLT5hY3Rpb24gPSAoYWN0aW9ucykgdHJ1c3Q7CisgICAgICBp
ZiAocGtnLT5jYXRlZ29yeSAmJiBzdHJjYXNlY21wKHBrZy0+Y2F0ZWdvcnks
ICJSZXF1aXJlZCIpKQorCXBrZy0+YWN0aW9uID0gQUNUSU9OX1NLSVA7CiAg
ICAgICBzZXRfYWN0aW9uIChwa2csIDApOwogICAgIH0KICAgUkVDVCByOwpA
QCAtNTU5LDYgKzY2OSw3IEBAIGNyZWF0ZV9saXN0dmlldyAoSFdORCBkbGcs
IFJFQ1QgKnIpCiAJfQogICAgICAgZm9yICh0ID0gMTsgdCA8IE5UUlVTVDsg
dCsrKQogCW5vdGVfd2lkdGggKGRjLCBwa2ctPmluZm9bdF0udmVyc2lvbiwg
TkVXX0NPTF9TSVpFX1NMT1AsIE5FV19DT0wpOworICAgICAgbm90ZV93aWR0
aCAoZGMsIHBrZy0+Y2F0ZWdvcnksIDAsIENBVEVHT1JZX0NPTCk7CiAgICAg
ICBub3RlX3dpZHRoIChkYywgcGtnLT5uYW1lLCAwLCBQQUNLQUdFX0NPTCk7
CiAgICAgICBub3RlX3dpZHRoIChkYywgcGtnLT5zZGVzYywgMCwgUEFDS0FH
RV9DT0wpOwogICAgIH0KQEAgLTU2OCwxMCArNjc5LDEzIEBAIGNyZWF0ZV9s
aXN0dmlldyAoSFdORCBkbGcsIFJFQ1QgKnIpCiAgIGhlYWRlcnNbQ1VSUkVO
VF9DT0xdLnggPSBITUFSR0lOLzI7CiAgIGhlYWRlcnNbTkVXX0NPTF0ueCA9
IGhlYWRlcnNbQ1VSUkVOVF9DT0xdLnggKyBoZWFkZXJzW0NVUlJFTlRfQ09M
XS53aWR0aCArIE5FV19DT0xfU0laRV9TTE9QICsgSE1BUkdJTjsKICAgaGVh
ZGVyc1tTUkNfQ09MXS54ID0gaGVhZGVyc1tORVdfQ09MXS54ICsgaGVhZGVy
c1tORVdfQ09MXS53aWR0aCArIEhNQVJHSU47Ci0gIGhlYWRlcnNbUEFDS0FH
RV9DT0xdLnggPSBoZWFkZXJzW1NSQ19DT0xdLnggKyBoZWFkZXJzW1NSQ19D
T0xdLndpZHRoICsgSE1BUkdJTjsKKyAgaGVhZGVyc1tDQVRFR09SWV9DT0xd
LnggPSBoZWFkZXJzW1NSQ19DT0xdLnggKyBoZWFkZXJzW1NSQ19DT0xdLndp
ZHRoICsgSE1BUkdJTjsKKyAgaGVhZGVyc1tQQUNLQUdFX0NPTF0ueCA9IGhl
YWRlcnNbQ0FURUdPUllfQ09MXS54ICsgaGVhZGVyc1tDQVRFR09SWV9DT0xd
LndpZHRoICsgSE1BUkdJTjsKIAogICBkZWZhdWx0X3RydXN0IChsdiwgVFJV
U1RfQ1VSUik7CiAgIHNldF9mdWxsX2xpc3QgKGx2LCBmdWxsX2xpc3QpOwor
ICBmb3IgKFBhY2thZ2UgKmZvbyA9IHBhY2thZ2U7IGZvby0+bmFtZTsgZm9v
KyspCisgICAgYWRkX3JlcXVpcmVkKGZvbyk7CiAgIHN0YXRpYyBpbnQgdGFb
XSA9IHsgSURDX0NIT09TRV9DVVJSLCAwIH07CiAgIHJic2V0IChkbGcsIHRh
LCBJRENfQ0hPT1NFX0NVUlIpOwogCkBAIC01ODUsMTQgKzY5OSwyMCBAQCBk
aWFsb2dfY21kIChIV05EIGgsIGludCBpZCwgSFdORCBod25kY3RsCiAgICAg
ewogICAgIGNhc2UgSURDX0NIT09TRV9QUkVWOgogICAgICAgZGVmYXVsdF90
cnVzdCAobHYsIFRSVVNUX1BSRVYpOworICAgICAgZm9yIChQYWNrYWdlICpm
b28gPSBwYWNrYWdlOyBmb28tPm5hbWU7IGZvbysrKQorICAgICAgICBhZGRf
cmVxdWlyZWQoZm9vKTsKICAgICAgIHNldF9mdWxsX2xpc3QgKGx2LCBmdWxs
X2xpc3QpOwogICAgICAgYnJlYWs7CiAgICAgY2FzZSBJRENfQ0hPT1NFX0NV
UlI6CiAgICAgICBkZWZhdWx0X3RydXN0IChsdiwgVFJVU1RfQ1VSUik7Cisg
ICAgICBmb3IgKFBhY2thZ2UgKmZvbyA9IHBhY2thZ2U7IGZvby0+bmFtZTsg
Zm9vKyspCisgICAgICAgIGFkZF9yZXF1aXJlZChmb28pOwogICAgICAgc2V0
X2Z1bGxfbGlzdCAobHYsIGZ1bGxfbGlzdCk7CiAgICAgICBicmVhazsKICAg
ICBjYXNlIElEQ19DSE9PU0VfRVhQOgogICAgICAgZGVmYXVsdF90cnVzdCAo
bHYsIFRSVVNUX1RFU1QpOworICAgICAgZm9yIChQYWNrYWdlICpmb28gPSBw
YWNrYWdlOyBmb28tPm5hbWU7IGZvbysrKQorICAgICAgICBhZGRfcmVxdWly
ZWQoZm9vKTsKICAgICAgIHNldF9mdWxsX2xpc3QgKGx2LCBmdWxsX2xpc3Qp
OwogICAgICAgYnJlYWs7CiAgICAgY2FzZSBJRENfQ0hPT1NFX0ZVTExQQVJU
OgpAQCAtOTMwLDkgKzEwNTAsMTAgQEAgZG9fY2hvb3NlIChISU5TVEFOQ0Ug
aCkKIAkJCSAgICAgICA6ICJ1bmtub3duIik7CiAgICAgICBjb25zdCBjaGFy
ICpleGNsdWRlZCA9IChwa2ctPmV4Y2x1ZGUgPyAieWVzIiA6ICJubyIpOwog
Ci0gICAgICBsb2cgKExPR19CQUJCTEUsICJbJXNdIGFjdGlvbj0lcyB0cnVz
dD0lcyBpbnN0YWxsZWQ9JXMgZXhjbHVkZWQ9JXMgc3JjPz0lcyIsCisgICAg
ICBsb2cgKExPR19CQUJCTEUsICJbJXNdIGFjdGlvbj0lcyB0cnVzdD0lcyBp
bnN0YWxsZWQ9JXMgZXhjbHVkZWQ9JXMgc3JjPz0lcyIKKwkgICAiY2F0ZWdv
cnk9JXMiLAogCSAgIHBrZy0+bmFtZSwgYWN0aW9uLCB0cnVzdCwgaW5zdGFs
bGVkLAotCSAgIGV4Y2x1ZGVkLCBwa2ctPnNyY3BpY2tlZCA/ICJ5ZXMiIDog
Im5vIik7CisJICAgZXhjbHVkZWQsIHBrZy0+c3JjcGlja2VkID8gInllcyIg
OiAibm8iLCBwa2ctPmNhdGVnb3J5KTsKICAgICAgIGZvciAoaW50IHQgPSAx
OyB0IDwgTlRSVVNUOyB0KyspCiAJewogCSAgaWYgKHBrZy0+aW5mb1t0XS5p
bnN0YWxsKQpJbmRleDogaW5pLmgKPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpS
Q1MgZmlsZTogL2N2cy9zcmMvc3JjL3dpbnN1cC9jaW5zdGFsbC9pbmkuaCx2
CnJldHJpZXZpbmcgcmV2aXNpb24gMi44CmRpZmYgLXUgLXAgLXIyLjggaW5p
LmgKLS0tIGluaS5oCTIwMDEvMDYvMTMgMTY6MTE6MDEJMi44CisrKyBpbmku
aAkyMDAxLzA2LzEzIDIzOjUzOjQzCkBAIC05MCwxMSArOTAsMjAgQEAgdHlw
ZWRlZiBzdHJ1Y3QKICAgaW50IHNvdXJjZV9leGlzdHM7CS8qIHNvdXJjZSBm
aWxlIGV4aXN0cyBvbiBkaXNrICovCiB9IEluZm87CQkJLyogKzEgZm9yIFRS
VVNUX1VOS05PV04gKi8KIAordHlwZWRlZiBzdHJ1Y3QgRGVwZW5kZW5jeV90
IERlcGVuZGVuY3k7CitzdHJ1Y3QgRGVwZW5kZW5jeV90Cit7CisgIERlcGVu
ZGVuY3kgKm5leHQ7IC8qIHRoZSBuZXh0IHBhY2thZ2UgaW4gdGhpcyBkZXBl
bmRlbmN5IGxpc3QgKi8KKyAgY2hhciAqcGFja2FnZTsgICAgLyogdGhlIG5h
bWUgb2YgdGhlIHBhY2thZ2UgdGhhdCBpcyBkZXBlbmRlZCBvbiAqLworfTsg
ICAgICAgICAgICAgICAgICAvKiBEZXBlbmRlbmNpZXMgY2FuIGJlIHVzZWQg
Zm9yIHJlY29tbWVuZGVkL3JlcXVpcmVkL3JlbGF0ZWQuLi4gKi8KKwogdHlw
ZWRlZiBzdHJ1Y3QKIHsKICAgY2hhciAqbmFtZTsJCS8qIHBhY2thZ2UgbmFt
ZSwgbGlrZSAiY3lnd2luIiAqLwogICBjaGFyICpzZGVzYzsJCS8qIHNob3J0
IGRlc2NyaXB0aW9uIChyZXBsYWNlcyAibmFtZSIgaWYgcHJvdmlkZWQpICov
CiAgIGNoYXIgKmxkZXNjOwkJLyogbG9uZyBkZXNjcmlwdGlvbiAobXVsdGkt
bGluZSkgKi8KKyAgY2hhciAqY2F0ZWdvcnk7IC8qIHRoZSBjYXRlZ29yeSB0
aGUgcGFja2FnZSBiZWxvbmdzIHRvLCBsaWtlICJyZXF1aXJlZCIgb3IgIlhG
cmVlODYiICovCisgIERlcGVuZGVuY3kgKnJlcXVpcmVkOyAvKiB0aGUgcGFj
a2FnZXMgcmVxdWlyZWQgZm9yIHRoaXMgcGFja2FnZSB0byB3b3JrICovCiAg
IGFjdGlvbnMgYWN0aW9uOwkvKiBBQ1RJT05fKiAtIG9ubHkgTkVXIGFuZCBV
UEdSQURFIGdldCBpbnN0YWxsZWQgKi8KICAgdHJ1c3RzIHRydXN0OwkJLyog
VFJVU1RfKiAoc2VsZWN0cyBhbW9uZyBpbmZvW10gYmVsb3cpICovCiAgIGlu
dCBzcmNwaWNrZWQ7CS8qIFNSQ0FDVElPTl8gKi8KQEAgLTExNiw2ICsxMjUs
NyBAQCBleHRlcm4gIkMiIHsKIFBhY2thZ2UgKm5ld19wYWNrYWdlIChjaGFy
ICpuYW1lKTsKIHZvaWQJaW5pX2luaXQgKGNoYXIgKnN0cmluZyk7CiBQYWNr
YWdlICpnZXRwa2dieW5hbWUgKGNvbnN0IGNoYXIgKnBrZ25hbWUpOwordm9p
ZCAgICBuZXdfcmVxdWlyZW1lbnQoUGFja2FnZSAqcGFja2FnZSwgY2hhciAq
ZGVwZW5kc29uKTsKIAogI2lmZGVmIF9fY3BsdXNwbHVzCiB9CkluZGV4OiBp
bmlsZXgubAo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zz
L3NyYy9zcmMvd2luc3VwL2NpbnN0YWxsL2luaWxleC5sLHYKcmV0cmlldmlu
ZyByZXZpc2lvbiAyLjMKZGlmZiAtdSAtcCAtcjIuMyBpbmlsZXgubAotLS0g
aW5pbGV4LmwJMjAwMS8wNi8xMyAxNjoxMTowMQkyLjMKKysrIGluaWxleC5s
CTIwMDEvMDYvMTMgMjM6NTM6NDMKQEAgLTUyLDYgKzUyLDkgQEAgU1RSCVth
LXpBLVowLTlfLi8rLV0rCiAic2Rlc2M6IgkJcmV0dXJuIFNERVNDOwogImxk
ZXNjOiIJCXJldHVybiBMREVTQzsKIAorImNhdGVnb3J5OiIJCXJldHVybiBD
QVRFR09SWTsKKyJyZXF1aXJlczoiCQlyZXR1cm4gUkVRVUlSRVM7CisKICJh
cGF0aDoiCQlyZXR1cm4gQVBBVEg7CiAicHBhdGg6IgkJcmV0dXJuIFBQQVRI
OwogCkluZGV4OiBpbmlwYXJzZS55Cj09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0K
UkNTIGZpbGU6IC9jdnMvc3JjL3NyYy93aW5zdXAvY2luc3RhbGwvaW5pcGFy
c2UueSx2CnJldHJpZXZpbmcgcmV2aXNpb24gMi43CmRpZmYgLXUgLXAgLXIy
LjcgaW5pcGFyc2UueQotLS0gaW5pcGFyc2UueQkyMDAxLzA2LzEzIDE2OjEx
OjAxCTIuNworKysgaW5pcGFyc2UueQkyMDAxLzA2LzEzIDIzOjUzOjQzCkBA
IC00NSw2ICs0NSw3IEBAIGV4dGVybiBpbnQgeXlsaW5lbm87CiAKICV0b2tl
biBTVFJJTkcKICV0b2tlbiBTRVRVUF9USU1FU1RBTVAgU0VUVVBfVkVSU0lP
TiBWRVJTSU9OIElOU1RBTEwgU09VUkNFIFNERVNDIExERVNDCisldG9rZW4g
Q0FURUdPUlkgUkVRVUlSRVMKICV0b2tlbiBBUEFUSCBQUEFUSCBJTkNMVURF
X1NFVFVQIEVYQ0xVREVfUEFDS0FHRSBET1dOTE9BRF9VUkwKICV0b2tlbiBU
X1BSRVYgVF9DVVJSIFRfVEVTVCBUX1VOS05PV04KIApAQCAtODUsNiArODYs
OCBAQCBzaW1wbGVfbGluZQogIDogVkVSU0lPTiBTVFJJTkcJCXsgY3B0LT52
ZXJzaW9uID0gJDI7IH0KICB8IFNERVNDIFNUUklORwkJCXsgY3AtPnNkZXNj
ID0gJDI7IH0KICB8IExERVNDIFNUUklORwkJCXsgY3AtPmxkZXNjID0gJDI7
IH0KKyB8IENBVEVHT1JZIFNUUklORwkJeyBjcC0+Y2F0ZWdvcnkgPSAkMjsg
fQorIHwgUkVRVUlSRVMgcmVxdWlyZXMKICB8IElOU1RBTEwgU1RSSU5HIFNU
UklORwl7IGNwdC0+aW5zdGFsbCA9ICQyOwogCQkJCSAgY3B0LT5pbnN0YWxs
X3NpemUgPSBhdG9pKCQzKTsKIAkJCQkgIGlmICghY3B0LT52ZXJzaW9uKQpA
QCAtMTA4LDYgKzExMSwxMSBAQCBzaW1wbGVfbGluZQogCSAgICAgIH0KICA7
CiAKK3JlcXVpcmVzCisgOiBTVFJJTkcJCQl7IG5ld19yZXF1aXJlbWVudChj
cCwgJDEpOyB9IHJlcXVpcmVzCisgfCBTVFJJTkcJCQl7IG5ld19yZXF1aXJl
bWVudChjcCwgJDEpOyB9CisgOworCiAlJQogCiBQYWNrYWdlICpwYWNrYWdl
ID0gTlVMTDsKQEAgLTEzOCw0ICsxNDYsMTYgQEAgbmV3X3BhY2thZ2UgKGNo
YXIgKm5hbWUpCiAgICAgfQogCiAgIHJldHVybiBjcDsKK30KKwordm9pZAor
bmV3X3JlcXVpcmVtZW50KFBhY2thZ2UgKnBhY2thZ2UsIGNoYXIgKmRlcGVu
ZHNvbikKK3sKKyAgRGVwZW5kZW5jeSAqZHA7CisgIGlmICghZGVwZW5kc29u
KQorICAgIHJldHVybjsKKyAgZHAgPSAoRGVwZW5kZW5jeSAqKSBtYWxsb2Mg
KHNpemVvZiAoRGVwZW5kZW5jeSkpOworICBkcC0+bmV4dCA9IGNwLT5yZXF1
aXJlZDsKKyAgZHAtPnBhY2thZ2UgPSBkZXBlbmRzb247CisgIGNwLT5yZXF1
aXJlZCA9IGRwOwogfQo=

------------=_1583532848-65438-67--
